!function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[a]={exports:{}};t[a][0].call(l.exports,function(e){var n=t[a][1][e];return i(n||e)},l,l.exports,e,t,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(require,module,exports){"use strict";function e(e,t){n(e.presenter,{mode:"presenter"},function(n,i){r.exec(n,i,t,e.view)})}var t=require("./view/exports"),n=require("../inside/source/getSource"),r=require("./presenter/index");module.exports={viewEngin:t,exec:e}},{"../inside/source/getSource":60,"./presenter/index":6,"./view/exports":13}],2:[function(require,module,exports){function e(){var e=document.body;s.vnode&&(s.isRepeat||o.vdom.patch(null,s.vnode.vnode,s.vnode.source,void 0,function(t,n){e.innerHTML="",e.appendChild(t),n(e)}),e=s.main),o.vdom.patch(null,s.presenter.vnode,s.presenter.source,void 0,function(t,n){var r,i,o=e.parentNode,c=s.presenter.source.layoutInfo.blockMap;s.vnode&&s.main?(Object.keys(c).forEach(function(e){var t,n,r,i=s.blockMap[e],o=c[e],u=o.parentNode||s.presenter.vnode;i&&(t=i.vnode.elm[0],(r=i.parentNode)?(n=r.children.indexOf(i.vnode),[].splice.apply(r.children,[n,1].concat(o.vnode)),a.insertBefore(t.parentNode,o.vnode.elm,t)):a.insertBefore(document.body,o.vnode.elm,t),i.vnode.destroy(),u instanceof Array&&u.splice(u.indexOf(o.vnode,1)),s.blockMap[e]=o)}),i=[].concat(e.vnode.elm)[0],o&&(r=o.children.indexOf(e.vnode),[].splice.apply(o.children,[r,1].concat(s.presenter.vnode))),a.insertBefore(i.parentNode||document.body,t,i),e.vnode.innerVnode.forEach(function(e){e.destroy()}),e.vnode.elm=[],e.vnode.children=[],e.vnode.innerVnode=[],(s.main.vnode.innerVnode=s.main.vnode.innerVnode.concat(s.presenter.vnode)).forEach(function(t){e.vnode.elm=e.vnode.elm.concat(t.elm)})):(e.innerHTML="",e.appendChild(t),n(e))})}function t(e,t,n){var o=r(e,t,"presenter");if(s.vnode){if(o.url===s.url)return void(s.isRepeat=!0);Object.keys(s.blockMap).forEach(function(e){e.vnode.destroy()}),s.vnode.vnode.destroy(),s.presenter&&s.presenter.vnode.destroy()}s.vnode=null,s.blockMap={},s.isRepeat=null,s.presenter=null,s.url=o.url,i(o,{mode:"presenter"},function(r,i){i.isLayout=!0,n(r,i,t,e)})}function n(t,n){var r=o.html2vdom(t);if(n.info.isLayout)s.vnode={vnode:r,source:{scope:n.assign,filter:n.filter,layoutInfo:s}},s.presenter&&e();else{if(s.presenter={vnode:r,source:{scope:n.assign,filter:n.filter,layoutInfo:{blockMap:{}}}},n.useLayout){if(!s.vnode)return}else s.vnode&&(Object.keys(s.blockMap).forEach(function(e){s.blockMap[e].vnode.destroy()}),[].concat(s.vnode.vnode).forEach(function(e){e.destroy()}),s.vnode=null,s.url=null,s.blockMap={});e()}}var r=require("../../inside/source/sourcePathNormal"),i=require("../../inside/source/getSource"),o=require("../../engine/view/exports"),a=(require("../../inside/log/log"),o.vdom.domApi),s={url:null,vnode:null,main:null,isRepeat:null,presenter:null,blockMap:{}};module.exports={layout:t,display:n}},{"../../engine/view/exports":13,"../../inside/log/log":59,"../../inside/source/getSource":60,"../../inside/source/sourcePathNormal":61}],3:[function(require,module,exports){"use strict";var e=require("./lib/modelExample"),t=require("./modelInterface");module.exports={modelExample:e,modelInterface:t}},{"./lib/modelExample":4,"./modelInterface":5}],4:[function(require,module,exports){"use strict";function e(e){var i=this;this.interface=new n,this.useTrigger=[];var o=this.interface.__source__;t(e,{mode:e.mode},function(t){var n=[],a=t[0];if(!1===t)return void log.error("model文件 ["+this.responseURL+"]缺失！");t.length>1&&(a=t[1],n=t[0]),n.forEach(function(t){console.log(t,">>>>>>>>");var n=t.replace(/^\$:/,"");n!==t?console.log(r(n,e,"extend"),e):console.log(r(n,e,"model"),e)}),a instanceof Function&&(a.call(i.interface),o.isExec=!0,i.useTrigger.forEach(function(e){o.trigger[e.name]instanceof Function&&e.callback(o.trigger[e.name].apply(i,e.args))}))})}var t=require("../../../inside/source/getSource"),n=require("../modelInterface"),r=require("../../../inside/source/sourcePathNormal");e.prototype.watch=function(e,t,n){this.interface.watch(e,t,n)},e.prototype.unWatch=function(e,t){this.interface.unWatch(e,t)},e.prototype.write=function(e,t){this.interface.write(e,t)},e.prototype.read=function(e,t){this.interface.read(e,t)},e.prototype.trigger=function(e,t){var n,r,i=[].slice.call(arguments).slice(1),o=this.interface.__source__,a={name:e,args:i,callback:function(){}};return o.isExec?o.trigger[e]&&(n=!0,r=o.trigger[e].apply(this,i)):this.useTrigger.push(a),function(e){e instanceof Function&&(n?e(r):a.callback=e)}},module.exports=e},{"../../../inside/source/getSource":60,"../../../inside/source/sourcePathNormal":61,"../modelInterface":5}],5:[function(require,module,exports){"use strict";function e(){this.__source__={trigger:{},isExec:!1,observer:t(this)}}var t=require("../../inside/lib/observer"),n=require("../server/index");e.prototype.model=function(e){},e.prototype.watch=function(e,t,n){var r=this.__source__.observer;if(void 0===n){if(e instanceof Function)return"boolean"==typeof t?(r.readWatch("exports",e),this):(r.watch("exports",e),this)}else if(n)return r.readWatch("exports."+e,t),this;return r.watch("exports."+e,t),this},e.prototype.read=function(e,t){return 2===arguments.length?e="exports."+e:(t=e,e="exports"),this.__source__.observer.read(e,t),this},e.prototype.unWatch=function(e,t){return 2===arguments.length?e="exports."+e:(t=e,e="exports"),this.__source__.observer.unWatch(e,t),this},e.prototype.unRead=function(e,t){return 2===arguments.length?e="exports."+e:(t=e,e="exports"),this.__source__.observer.unRead(e,t),this},e.prototype.write=function(e,t){1===arguments.length?this.exports=e:2===arguments.length&&(this.exports instanceof Object||(this.exports={}),this.exports[e]=t)},e.prototype.trigger=function(e,t){this.__source__.trigger[e]=t},e.prototype.server=function(e){return n.serverExec(e)},module.exports=e},{"../../inside/lib/observer":53,"../server/index":8}],6:[function(require,module,exports){"use strict";var e=(require("../../inside/log/log"),require("./presenterInterface"));module.exports={exec:e.presenterExec}},{"../../inside/log/log":59,"./presenterInterface":7}],7:[function(require,module,exports){"use strict";function e(e,t,n,r){var i={writable:!0,configurable:!0,enumerable:!!r};void 0!==n&&(i.value=n),Object.defineProperty(e,t,i)}function t(t,n){u[this.__sourceId__=r()]={assign:{},assignReal:{},filter:{},animate:null,view:n,display:!1,info:t},e(this,"__sourceId__")}function n(e,n,r,i){var o=e[0];if(!e)return void log.error("presenter ["+n.url+"]中缺失"+n.slice+"操作(切片)");e.length>1&&(o=e[1]),o.call(new t({isLayout:n.isLayout,parameter:r.parameter,module:n.module,slice:n.slice,url:n.url,pathName:n.pathName,origin:n.origin},i))}var r=require("../../inside/lib/encrypt/uid"),i=require("../view/exports"),o=require("../../inside/config/lib/commData").appConf,a=require("../layout/index"),s=require("../model/index"),c=require("../../inside/source/sourcePathNormal"),u={};t.prototype.title=function(e){return e&&(window.document.title=e,u[this.__sourceId__].title=e),this},t.prototype.assign=function(e,t){var n=u[this.__sourceId__];if(n.assignReal[e]){if(n.assignReal[e]===t)return this;n.assignReal[e].unWatch()}return t instanceof s.modelExample?(n.assignReal[e]=t,t.watch(function(t){n.assign[e]=t},!0)):n.assign[e]=t,this},t.prototype.filter=function(e,t){return u[this.__sourceId__].filter[e]=t,this},t.prototype.extend=function(e){for(var t=arguments,n=0,r=t.length,i=[];++n<r;)i.push(t[n]);return this},t.prototype.layout=function(e){var t=u[this.__sourceId__];if(!t.info.isLayout)return t.useLayout=!0,a.layout(e,t.info,n),this},t.prototype.animate=function(e){return u[this.__sourceId__].animate=e,this},t.prototype.display=function(e){var t=u[this.__sourceId__];if(!1===e||t.display)return void(t.display=!0);e&&(t.view=e),t.display=!0;var n={tplSuffix:o.tplSuffix,requireType:o.viewRequire,view:t.view};return t.view instanceof Function?(e=t.view(function(e){Object.keys(e).forEach(function(t){n[t]=e[t]})},t.info))&&(n.view=e):t.view instanceof Object&&Object.keys(t).forEach(function(e){n[e]=t[e]}),n.tplSuffix="."+n.tplSuffix.replace(/^\./,""),i.viewSourc(n,t.info,function(e){a.display(e,t)}),this},t.prototype.redirect=function(e){return this},t.prototype.model=function(e){var t=u[this.__sourceId__],n=c(e,t.info,"model");return new s.modelExample(n)},module.exports={presenterExec:n,interface:t}},{"../../inside/config/lib/commData":31,"../../inside/lib/encrypt/uid":45,"../../inside/source/sourcePathNormal":61,"../layout/index":2,"../model/index":3,"../view/exports":13}],8:[function(require,module,exports){var e=require("./lib/serverExec"),t=require("./lib/serverRegister");module.exports={serverExec:e,serverRegister:t}},{"./lib/serverExec":10,"./lib/serverRegister":12}],9:[function(require,module,exports){serverComm={serverStroage:{}},module.exports=serverComm},{}],10:[function(require,module,exports){function e(e){return new t(e)}function t(e){var t=n.serverStroage[e.serverType||"http"];this.__innerConf__={option:e,error:[],success:[],receive:[],serverConf:t};var i=new r(this.__innerConf__);Object.keys(t.config||{}).forEach(function(n){"object"==typeof e[n]&&"object"==typeof t.config?Object.keys(t.config[n]).forEach(function(r){e[n][r]=t.config[n][r]}):e[n]=t.config[n]}),"object"==typeof t.filter&&t.filter.request instanceof Function&&t.filter.request.call(i,e)}var n=require("./serverComm"),r=require("./serverInterface");t.prototype.error=function(e){return-1===this.__innerConf__.error.indexOf(e)&&this.__innerConf__.error.push(e),this},t.prototype.success=function(e){return-1===this.__innerConf__.success.indexOf(e)&&this.__innerConf__.success.push(e),this},t.prototype.receive=function(){return-1===this.__innerConf__.receive.indexOf(fn)&&this.__innerConf__.receive.push(fn),this},t.prototype.send=function(e){var t=this.__innerConf__;t.serverConf.request.call(t.example,t.option,e)},module.exports=e},{"./serverComm":9,"./serverInterface":11}],11:[function(require,module,exports){function e(e){e.example=this,this.__innerConf__=e}e.prototype.complete=function(){var e,t=this,n=[].slice.call(arguments),r=this.__innerConf__,i=r.serverConf;"object"==typeof i.filter&&i.filter.receive instanceof Function&&void 0!==(e=i.filter.receive.call(this,n[0],r.option))&&(n[0]=e),r.receive.forEach(function(e){e.apply(t,n)})},e.prototype.success=function(){var e,t=this,n=[].slice.call(arguments),r=this.__innerConf__,i=r.serverConf;"object"==typeof i.filter&&i.filter.success instanceof Function&&void 0!==(e=i.filter.success.call(this,n[0],r.option))&&(n[0]=e),r.success.forEach(function(e){e.apply(t,n)})},e.prototype.error=function(){var e,t=this,n=[].slice.call(arguments),r=this.__innerConf__,i=r.serverConf;"object"==typeof i.filter&&i.filter.error instanceof Function&&void 0!==(e=i.filter.error.call(this,n[0],r.option))&&(n[0]=e),r.error.forEach(function(e){e.apply(t,n)})},module.exports=e},{}],12:[function(require,module,exports){function e(e,n){t.serverStroage[e]=n}var t=require("./serverComm");module.exports=e},{"./serverComm":9}],13:[function(require,module,exports){"use strict";function e(e,t,n){return o(e)}function t(e){}var n=require("./lib/vdom"),r=require("./lib/syntaxStruct"),i=require("./lib/syntaxHandle"),o=require("./lib/html2vdom"),a=require("./lib/viewSourc"),s=require("./lib/componentManage"),c=require("./lib/directiveManage");exports.vdom=n,exports.html2vdom=o,exports.syntaxStruct=r,exports.syntaxHandle=i,exports.componentMange=s,exports.directiveMange=c,exports.render=e,exports.destroy=t,exports.viewSourc=a},{"./lib/componentManage":14,"./lib/directiveManage":15,"./lib/html2vdom":16,"./lib/syntaxHandle":17,"./lib/syntaxStruct":18,"./lib/vdom":19,"./lib/viewSourc":20}],14:[function(require,module,exports){function e(e,t,n,r){t.isComponent=!0,t.innerScope={},t.innerFilter=e.filter||{},this.conf=e,this.vnode=t,this.priority=e.priority||0,this.extraParameter=n,this.watchs={create:[],render:[]},this.$api={scope:t.innerScope,filter:{},template:e.template,vnode:t,render:function(e,t,n){var i=r.html2vdom(e);return i.innerScope=t,i.$scope=t||i.$scope,i.innerFilter=n,i},stroage:{}}}var t=require("./syntaxStruct"),n=require("./syntaxHandle"),r={};e.prototype.watchCreate=function(e){e instanceof Function&&this.watchs.create.push(e)},e.prototype.watchRender=function(e){e instanceof Function&&this.watchs.render.push(e)},e.prototype.init=function(){function e(e,t){var n={};if(!f[e])return console.warn("组件数据属性 "+e+" 未定义!");t instanceof Function?(n=t=t.call(this,f[e].value),n.key=t.key||e,h=h.concat(n)):t instanceof Object?(n.key=t.key||e,n.exp=t.exp||f[e].value,Object.keys(t).forEach(function(e){n[e]=t[e]}),h.push(n)):h.push({key:e,exp:f[e].value})}function r(){h.length<=++l&&(i=!0,o.render())}var i,o=this,a=this.$api,s=this.conf,c=this.vnode,u=c.data,l=0,f=u.attrsMap,p=s.props,h=[],d=this.extraParameter;if(s.template||(s.template=c.children),p){if(p instanceof Array?p.forEach(function(t){e(t)}):p instanceof Object&&Object.keys(p).forEach(function(t){e(t,p[t])}),h.length)return h.forEach(function(e){var s,u=t(e.exp);if(u.errMsg)console.warn("表达式： "+e.exp+"有误！");else{var l=[c.rootScope].concat(c.middleScope);l.push(c.$scope),s=n(u,l,d.filter,!0),s.read(function(t){a.scope[e.key]=t,e.watch instanceof Function&&(e.watch.apply(this,arguments),s.watch(e.watch)),e.getWatchInfo instanceof Function&&e.getWatchInfo(s.getWatchInfo()),e.autoRender&&s.watch(function(t){a.scope[e.key]=t,e.getWatchInfo instanceof Function&&e.getWatchInfo(s.getWatchInfo()),i?o.render():r()}),e.hasOwnProperty("default")&&i?o.render():r()})||e.hasOwnProperty("default")&&(a.scope[e.key]=e.default,r())}}),this}else i=!0,this.render()},e.prototype.render=function(){var e=this.conf,t=this.vnode;e.render instanceof Function?t.innerVnode=e.render.call(this.$api,this.$api.vnode,this.$api.scope)||e.template:e.template&&(e.isReplace||void 0===e.isReplace)&&(e.isReplace=!0,t.innerVnode=e.template),t.isReplace=e.isReplace,this.isRender||this.watchs.create.forEach(function(e){e()}),this.watchs.render.forEach(function(e){e()}),this.isRender=!0},exports.get=function(e){return r[e]},exports.register=function(t,n){r[t]=function(t,r,i){return new e(n,t,r,i)}}},{"./syntaxHandle":17,"./syntaxStruct":18}],15:[function(require,module,exports){function e(e,t,n,r,i){this.vdomApi=i,t.isDirective=!0,this.name=r,this.expInfo=t.data.attrsMap[r],this.exp=t.data.attrsMap[r].value,this.conf=e,this.vnode=t,this.cloneVnode=t.clone(),this.extraParameter=n,this.priority=e.priority||0,this.watchs={create:[],render:[]},this.$api={scope:t.$scope,filter:{},vnode:t,expInfo:t.data.attrsMap[r],render:function(){},rootScope:t.rootScope,stroage:{},templateVnode:t.clone()}}var t=require("./syntaxStruct"),n=require("./syntaxHandle"),r={};e.prototype.watchCreate=function(e){e instanceof Function&&this.watchs.create.push(e)},e.prototype.watchRender=function(e){e instanceof Function&&this.watchs.render.push(e)},e.prototype.init=function(){function e(){l.length<=++i&&(r=!0,o.render())}var r,i=0,o=this,a=this.$api,s=this.conf,c=this.vnode,u=(c.data,s.props),l=[],f=this.exp,p=this.extraParameter;s.hook&&(c.data.hook=c.data.hook||{},Object.keys(s.hook).forEach(function(e){c.data.hook[e]=s.hook[e]})),s.template||(s.template=c.children),Object.keys(p.scope=p.scope||{}).forEach(function(e){a.scope[e]=p.scope[e]}),Object.keys(s.scope=s.scope||{}).forEach(function(e){a.scope[e]=s.scope[e]}),s.props?u instanceof Function?(u=u.call(a,f,this.expInfo),l=l.concat(u),l.length&&l.forEach(function(i){if(i.exp=i.exp||f,!i.exp)return e();var s,u=t(i.exp);if(u.errMsg)console.warn("表达式： "+i.exp+"有误！");else{var l=[c.rootScope].concat(c.middleScope);c.innerScope&&l.push(c.innerScope),s=n(u,l,p.filter,!0),s.read(function(t){a.scope[i.key]=t,i.watch instanceof Function&&(i.watch.apply(this,arguments),s.watch(i.watch)),i.getWatchInfo instanceof Function&&i.getWatchInfo(s.getWatchInfo()),i.autoRender&&s.watch(function(t){a.scope[i.key]=t,i.getWatchInfo instanceof Function&&i.getWatchInfo(s.getWatchInfo()),r?o.render():e()}),i.hasOwnProperty("default")&&r?o.render():e()})||i.hasOwnProperty("default")&&(a.scope[i.key]=i.default,e())}})):console.warn("指令配置中props只能为function"):o.render()},e.prototype.render=function(){var e,t=this.conf,n=this.vnode;if(t.render instanceof Function){switch(e=t.render.call(this.$api,this.$api.vnode,this.$api.scope),!0){case!e:return;case e===n:case e.elm&&e.elm===n.elm:return void(n.elm&&this.vdomApi.cbs.update.forEach(function(t){t(n,e)}))}n.innerVnode=e}n.isReplace=t.isReplace,this.isRender||this.watchs.create.forEach(function(e){e()}),this.watchs.render.forEach(function(e){e()}),this.isRender=!0},exports.directiveClass=e,exports.get=function(e){return r[e]},exports.register=function(t,n){r[t]=function(r,i,o){return new e(n,r,i,t,o)}}},{"./syntaxHandle":17,"./syntaxStruct":18}],16:[function(require,module,exports){"use strict";function e(e){for(var t={},n=e.split(","),r=0;r<n.length;r+=1)t[n[r]]=!0;return t}function t(e){var t,n=[],r=[];return s(o.HTMLDecode(e),{start:function(e,n,o){t=i.vnode(e,{attrsMap:n.reduce(function(e,t){var n,r,i,o=t.name;return-1!==(r=o.indexOf(":"))?(n=o.slice(r+1),o=o.slice(0,r)||"bind",-1!==(r=n.indexOf("."))&&(i=n.slice(r+1),n=n.slice(0,r),i=i.split("."))):-1!==(r=o.indexOf("."))&&(i=o.slice(r+1),o=o.slice(0,r),i=i.split(".")),e[o]={type:n,modifiers:i,value:t.value,attrName:t.name},e},{})},[]),r.push(t),o&&this.end()},end:function(){var e=r.pop();r.length?(e===t&&(e=r[r.length-1]),e.children.push(t),t=e):(e!==t&&e.children.push(t),n.push(e))},chars:function(e){if(!/^\s+$/.test(e)){var t,o=[],s=[];!function e(n){var r,i,c,u=n;return u.length&&(-1===(r=u.indexOf("{{"))||-1===(i=u.indexOf("}}",r))?(o.push(u),s.push(u)):(r&&(c=u.slice(0,r),o.push(c),s.push(c)),t=u.slice(r+"{{".length).slice(0,i-r-"{{".length),o.push(a(t)),e(u.slice(i+"}}".length)))),n}(e);var c=i.vnode(void 0,{exps:o,textExpString:t},void 0,s.join(""));r.length?r[r.length-1].children.push(c):n.push(c)}}}),r=void 0,1===n.length?n[0]:n}function n(e){var t;switch(e.nodeType){case 3:if(/^\s+$/.test(e.textContent))return;t=i.vnode(void 0,void 0,void 0,e.textContent,e);break;case 1:t=i.node2vnode(e);case 11:t=t||[],e.childNodes.forEach(function(e){var r=n(e);r&&t.children.push(r)});break;case 9:console.warn("暂不支持document")}return t}var r=r||this,i=(r.document,require("./vdom")),o=require("../../../inside/lib/string"),a=require("./syntaxStruct"),s=function(){var t=/^\s+([^\s\/>"'=]+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/,n=e("area,base,basefont,br,col,frame,hr,img,input,link,meta,param,embed,command,keygen,source,track,wbr"),r=e("address,article,applet,aside,audio,blockquote,button,canvas,center,dd,del,dir,div,dl,dt,fieldset,figcaption,figure,footer,form,frameset,h1,h2,h3,h4,h5,h6,header,hgroup,hr,iframe,ins,isindex,li,map,menu,noframes,noscript,object,ol,output,p,pre,section,script,table,tbody,td,tfoot,th,thead,tr,ul,video"),i=e("a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,span,strike,strong,sub,sup,textarea,tt,u,var"),o=e("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr"),a={script:/^([\s\S]*?)<\/script[^>]*>/i,style:/^([\s\S]*?)<\/style[^>]*>/i};return function(e,s){function c(e,a,c,l){var f=a;if(a=a.toLowerCase(),r[a])for(;h&&i[h];)u("",h);if(o[a]&&h===a&&u("",a),l=n[a]||!!l,l||(d.push(a),h=a),s.start){for(var p,m,v,y=[];p=c.match(t);)c=c.substr(p[0].length),m=p[1],v=p[2]||p[3]||p[4]||"",y.push({name:m,value:v,escaped:v.replace(/(^|[^\\])"/g,'$1\\"')});s.start&&s.start(f,y,l)}}function u(e,t){var n;if(t)for(n=d.length-1;n>=0&&d[n]!==t;n-=1);else n=0;if(n>=0){for(var r=d.length-1;r>=n;r-=1)s.end&&s.end(d[r]);d.length=n,h=d[n-1]}}e=e.trim();for(var l,f,p,h,d=[],m=e,v=function(e,t){return s.chars&&s.chars(t),""};e;){if(f=!0,a[h]?(e=e.replace(a[h],v),f=!1,u("",h)):"</"===e.substring(0,2)?(p=e.match(/^<\/([-\w:]+)[^>]*>/))&&(e=e.substring(p[0].length),u.apply(this,p),f=!1):"\x3c!--"===e.substring(0,4)?(l=e.indexOf("--\x3e"))>=0&&(s.comment&&s.comment(e.substring(4,l)),e=e.substring(l+3),f=!1):"<![CDATA["===e.substring(0,9).toUpperCase()?(p=e.match(/^<!\[CDATA\[([\s\S]*?)\]\]>/i))&&(s.cdata&&s.cdata(p[1]),e=e.substring(p[0].length),f=!1):"<!DOCTYPE"===e.substring(0,9).toUpperCase()?(l=e.indexOf(">"))>=0&&(s.doctype&&s.doctype(e.substring(0,l)),e=e.substring(l+1),f=!1):"<"===e[0]&&(p=e.match(/^<([-\w:]+)((?:\s+[^\s\/>"'=]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*>/),p?(e=e.substring(p[0].length),c.apply(this,p),f=!1):(e=e.substring(1),s.chars&&s.chars("<"),f=!1)),f){l=e.indexOf("<");var y=l<0?e:e.substring(0,l);e=l<0?"":e.substring(l),s.chars&&s.chars(y)}if(e===m)throw"Parse Error: "+e;m=e}u()}}();module.exports=i.html2vdom=function(e){return e.nodeName?n(e):t(e)}},{"../../../inside/lib/string":56,"./syntaxStruct":18,"./vdom":19}],17:[function(require,module,exports){"use strict";function e(e,t,n,i){switch(e){case"$!":return!t.value;case"$~":return~t.value;case"$-":return-t.value;case"$+":return+t.value;case"+":return(void 0===t.value?"":t.value)+(void 0===n.value?"":n.value);case"-":return t.value-n.value;case"*":return t.value*n.value;case"/":return t.value/n.value;case"%":return t.value%n.value;case"?":return t.value?n.value:i.value;case"Member":return t.value[n.value];case"Array":var o=[];return Object.keys(t).forEach(function(e){o.push(t[e].value)}),o;case"Object":var a={};return Object.keys(t).forEach(function(e){a[e]=t[e]}),a;case"Call":var s,c=[];return Object.keys(t).forEach(function(e){if("callee"===e)return s=t[e].value;c.push(t[e].value)}),s.apply(this,c);case"Filter":var u,l=[];return Object.keys(t).forEach(function(e){if("callee"===e)return u=t[e].value;l.push(t[e].value)}),"function"==typeof u?u.apply(this,l):r.error("过滤器 "+n+" 不存在!");case"+=":return t.value+=n.value}}function t(e,t,n,r){var i=this;this.reads=[],this.watchs=[],this.scope=t,this.filter=n,this.observers=[],this.multiple=r,this.lex(e,function(e){i.resData=e.value,delete i.watchInfo,e.keys instanceof Array&&(i.watchInfo={observer:e.observer,key:e.keys.join(".")}),i.watchs.forEach(function(t){t(e.value)}),i.reads.forEach(function(t){t(e.value)}),i.reads=[]})}function n(e,n,r,i){this.filter=r,this.scope=n||{},this.structRes=new t(e,this.scope,r,i)}var r=require("../../../inside/log/log"),i=require("../../../inside/lib/observer"),o=function(){this.count=0,this.watchCount=0,this.stroage={},this.receiveStroage=[]};o.prototype.watch=function(e){var t,n=this,r=this.stroage;return this.watchCount++,function(i){r[e]=i,t||(++n.count,t=!0),n.count===n.watchCount&&n.receiveStroage.length&&n.receiveStroage.forEach(function(e){e(r)})}},o.prototype.receive=function(e){var t=this.stroage;this.receiveStroage.push(e),this.watchCount===this.count&&this.receiveStroage.forEach(function(e){e(t)})},t.prototype.watch=function(e){this.watchs.push(e)},t.prototype.unWatch=function(e){e&&-1!==this.watchs.indexOf(e)?this.watchs.splice(this.watchs.indexOf(e),1):this.watchs=[]},t.prototype.read=function(e){return this.hasOwnProperty("resData")?e(this.resData):this.reads.push(e),this.resData},t.prototype.readWatch=function(e){return this.hasOwnProperty("resData")&&e(this.resData),this.watchs.push(e),this.resData},t.prototype.lex=function(t,n,r){var a,s,c,u=this,l=new o;switch(t.exp){case"UnaryExpression":this.lex(t.argment,l.watch("argment")),l.receive(function(r){n({value:e("$"+t.operator,r.argment)})});break;case"BinaryExpression":this.lex(t.left,l.watch("left")),this.lex(t.right,l.watch("right")),l.receive(function(r){n({value:e(t.operator,r.left,r.right)})});break;case"TernaryExpression":this.lex(t.condition,l.watch("condition")),this.lex(t.accord,l.watch("accord")),this.lex(t.mismatch,l.watch("mismatch")),l.receive(function(r){n({value:e(t.operator,r.condition,r.accord,r.mismatch)})});break;case"MemberExpression":this.lex(t.object,l.watch("object"),r),this.lex(t.property,l.watch("property"),t.computed||"noComputed"),l.receive(function(e){if("Object"===e.object.type&&e.object.value[e.property.value].observer)n({value:e.object.value[e.property.value].value,observer:e.object.value[e.property.value].observer,keys:e.object.value[e.property.value].keys});else if(e.object.observer)a=e.object.keys.concat(e.property.value).join("."),s!==a&&(s&&e.object.observer.unwatch(s),e.object.observer.readWatch(s=a,function(t){n({value:t,observer:e.object.observer,keys:e.object.keys.concat(e.property.value)})}));else if(e.object.atoms){var t=e.object.atoms[e.property.value];t.observer?(a=t.keys.join("."),s!==a&&(s&&t.observer.unwatch(s),t.observer.readWatch(s=a,function(e){n({value:e,observer:t.observer,keys:t.keys.concat()})}))):n(t)}else n({value:e.object.value[e.property.value]}),console.warn("语法对象错误!")});break;case"ArrayExpression":t.arguments.forEach(function(e,t){u.lex(e,l.watch(t))}),l.receive(function(t){n({value:e("Array",t),atoms:t})});break;case"ObjectExpression":t.property.forEach(function(e){u.lex(e.value,l.watch(e.key.value))}),l.receive(function(t){var r=e("Object",t);c=i(u.scope,u.multiple),u.observers.push(c),n({value:r,observer:c,keys:[],type:"Object"})});break;case"CallExpression":this.lex(t.callee,l.watch("callee")),t.arguments.forEach(function(e,t){u.lex(e,l.watch(t))}),l.receive(function(t){n({value:e("Call",t)})});break;case"FilterExpression":this.lex(t.callee,l.watch("callee"),!0),t.arguments.length?t.arguments.forEach(function(e,n){"$"===e.value?u.lex(t.lead,l.watch(n)):u.lex(e,l.watch(n))}):this.lex(t.lead,l.watch(0)),l.receive(function(r){n({value:e("Filter",r,t.callee.value)})});break;case"UpdateExpression":break;case"AssignmentExpression":this.lex(t.identifier,l.watch("identifier")),this.lex(t.value,l.watch("value")),l.receive(function(r){n({value:e(t.operator,r.identifier,r.value,t.identifier)})});break;default:switch(t.type){case"Null":n({value:null});break;case"String":n({value:t.value});break;case"Boolean":n({value:"false"!==t.value});break;case"Numeric":n({value:t.value});break;case"Keyword":case"identifier":switch(r){case!0:n({value:this.filter[t.value]});break;case"noComputed":n({value:t.value});break;default:c=i(this.scope,this.multiple),u.observers.push(c),c.readWatch(t.value,function(e){n({value:e,observer:c,keys:[t.value]})})}}}},t.prototype.destroy=function(){var e=this;this.observers.forEach(function(e){e.destroy()}),Object.keys(this).forEach(function(t){delete e[t]})},n.prototype.assign=function(e,t){this.scope[e]=t},n.prototype.watch=function(e){this.structRes.watch(e)},n.prototype.unWatch=function(e){this.structRes.unWatch(e)},n.prototype.getWatchInfo=function(){return this.structRes.watchInfo},n.prototype.read=function(e){return this.structRes.read(e)},n.prototype.readWatch=function(e){return this.structRes.readWatch(e)},n.prototype.destroy=function(){var e=this;this.structRes.destroy(),Object.keys(this.scope).forEach(function(t){delete e.scope[t]}),Object.keys(this).forEach(function(t){delete e[t]})},module.exports=function(e,t,r,i){return new n(e,t,r,i)}},{"../../../inside/lib/observer":53,"../../../inside/log/log":59}],18:[function(require,module,exports){"use strict";function e(e){this.source=e,this.length=e.length,this.index=0,this.atoms=[],this.expBlockEnd=[],this.arguments=[],this.levelArgs=[this.arguments],this.expStruct=null,this.expTemp={valueType:null,valueExp:null},this.errMsg=null,this.expressionLex(),this.expBlockEnd.length&&!this.errMsg&&this.throwErr("表达式不完整缺少"+this.expBlockEnd.length+"个闭合符号 "+this.expBlockEnd.join(" , "))}var t={isWhiteSpace:function(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0},isLineTerminator:function(e){return 10===e||13===e||8232===e||8233===e},isidentifierStart:function(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||92===e||e>=128},isidentifierPart:function(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||92===e||e>=128},isDecimalDigit:function(e){return e>=48&&e<=57},isKeyword:function(e){switch(e.length){case 2:return"if"===e||"in"===e||"do"===e;case 3:return"var"===e||"for"===e||"new"===e||"try"===e||"let"===e;case 4:return"this"===e||"else"===e||"case"===e||"void"===e||"with"===e||"enum"===e;case 5:return"while"===e||"break"===e||"catch"===e||"throw"===e||"const"===e||"yield"===e||"class"===e||"super"===e;case 6:return"return"===e||"typeof"===e||"delete"===e||"switch"===e||"export"===e||"import"===e;case 7:return"default"===e||"finally"===e||"extends"===e;case 8:return"function"===e||"continue"===e||"debugger"===e;case 10:return"instanceof"===e;default:return!1}},codePointAt:function(e){if(e>=55296&&e<=56319){var t=this.source.charCodeAt(i+1);t>=56320&&t<=57343&&(e=1024*(e-55296)+t-56320+65536)}return e}},n={Null:"Null",String:"String",Keyword:"Keyword",Boolean:"Boolean",Numeric:"Numeric",Punctuator:"Punctuator",identifier:"identifier"};e.prototype.getSoonAtom=function(){var e=this.soonAtom;return delete this.soonAtom,e},e.prototype.nextExpressionLex=function(e,t){return this.expStruct=null,this.expTemp.valueType=null,this.expressionLex(e,t)},e.prototype.addBlockEnd=function(e){this.expBlockEnd.push(e),this.levelArgs.push(this.arguments=[])},e.prototype.getExpAttr=function(e,t){switch(t=void 0===t||t,e.exp){case"UpdateExpression":case"UnaryExpression":return"argment";case"BinaryExpression":return t?"left":"right";case"TernaryExpression":return t?"condition":"mismatch";case"MemberExpression":return t?"object":"property";case"ArrayExpression":case"ObjectExpression":return"self";case"CallExpression":return"callee";case"AssignmentExpression":break;case"FilterExpression":return"lead"}},e.prototype.expConcat=function(e,t){if(!e)return t;if(void 0===t&&this.expStruct&&(t=e,e=this.expStruct),t){var n;if(t.exp){if(!(e.exp&&t.priority<e.priority))return n=this.getExpAttr(t),t[n]=this.expConcat(e,t[n]),t}else if(!e.exp)return e;n=this.getExpAttr(e,!1),e[n]=this.expConcat(e[n],t)}return e},e.prototype.expressionLex=function(e,t){if(!this.errMsg&&(e||(e=this.soonAtom?this.getSoonAtom():this.atomLex()),e)){t=void 0===t||t;var r,i,o,a=this.arguments,s=this.expTemp;switch(s.valueType){case"memory":case"literal":case"identifier":if("."===e.value||"["===e.value){r=this.expMember(e,s),i=this.getSoonAtom();break}if("literal"!==s.valueType&&"assignment"===e.identity){r=this.expAssignment(e,s);break}case n.Null:case n.String:case n.Numeric:case n.Boolean:switch(e.type){case n.Punctuator:switch(e.identity){case"single":case"complex":case"logical":case"bitwise":r=this.expBinary(e,s);break;case"interrogation":r=this.expTernary(e,s);break;case"update":r=this.expUpdateAfter(e,s);break;case"filter":r=this.expFilter(e,s);break;case"comma":if("Object"===this.expMode){(r=a[a.length-1])&&(r.value=this.expStruct,s.valueType=null,this.expStruct=null);break}a.push(this.expStruct),this.nextExpressionLex(),a[a.length-1]!==this.expStruct&&a.push(this.expStruct);break;case"semicolon":break;case"colon":if("Object"===this.expMode){if(s.brackets){if(2!==s.brackets)return this.throwErr("语法错误，对象表达式key有误!");if(1!==this.expStruct.arguments.length)return this.throwErr("语法错误，对象表达式key有误!");a.push({computed:!0,key:this.expStruct.arguments[0]})}else a.push({computed:!1,key:this.expStruct});return void this.nextExpressionLex()}case"bracketsLeft":case"bracketsRight":if(this.expBlockEnd.length&&this.expBlockEnd.pop()===e.value){this.arguments=this.levelArgs.pop();break}default:this.throwErr('语法错误,多出符号"'+e.value+'"')}break;default:this.throwErr("语法表达式错误 ")}break;default:switch(e.type){case n.Punctuator:switch(e.identity){case"unitary":case"single":r=this.expUnary(e,s),i=this.getSoonAtom();break;case"semicolon":break;case"update":r=this.expUpdate(e,s),i=this.getSoonAtom()
;break;case"bracketsLeft":switch(e.value){case"(":var c=this.expMode;if(this.expMode="brackets",this.addBlockEnd(")"),this.expressionLex(),this.expMode=c,this.arguments=this.levelArgs[this.levelArgs.length-1],this.expStruct.exp&&(this.expStruct.priority=1),o=1,r=this.expStruct,(i=this.atomLex())&&"("===i.value){r=this.expCall(i,s),i=this.getSoonAtom();break}case"[":r||(o=2,r=this.expArray(e,s));case"{":r||(o=3,r=this.expObject(e,s)),i=i||this.atomLex(),!i||"["!==i.value&&"."!==i.value||(this.expressionLex(i,!1),i=this.getSoonAtom())}break;case"bracketsRight":if(this.expBlockEnd.length&&this.expBlockEnd.pop()===e.value){this.arguments=this.levelArgs.pop(),o=e.value;break}default:this.throwErr("语法表达式错误,未知表达式")}break;case n.Null:case n.String:case n.Numeric:case n.Boolean:r=this.expStruct=e,s.valueType=e.type;break;case n.Keyword:case n.identifier:if(r=this.expStruct=e,s.valueType="identifier",i=this.atomLex())switch(i.value){case"[":case".":this.expressionLex(i,!1),i=this.getSoonAtom();break;case"(":r=this.expCall(i,s),i=this.getSoonAtom()}break;default:this.throwErr("未知表达式!")}}return o?s.brackets=o:delete s.brackets,t&&r?r=this.expressionLex(i):this.soonAtom=i,r}},function(e){e.expUnary=function(e,t){var n={argment:null,operator:e.value,priority:3,exp:"UnaryExpression"},r=this.atomLex(),i=this.expConcat(n);return this.nextExpressionLex(r,!1),this.expStruct?(this.expStruct=this.expConcat(i),t.valueType="literal",n):this.throwErr("一元运算表达式不完整！")},e.expBinary=function(e,t){var n=this.expStruct,r=this.atomLex();this.nextExpressionLex(r,!1);var i={left:null,right:null,operator:e.value,priority:e.priority,exp:"BinaryExpression"};if(!r)return this.throwErr("二元运算语法错误，右侧表达式不存在！");var o=this.expConcat(n,i);return t.valueType?(this.expStruct=this.expConcat(o,this.expStruct),t.valueType="literal",i):this.throwErr("二元表达式，右侧语法错误！",e)},e.expTernary=function(e,t){var n={accord:null,mismatch:null,condition:this.expStruct,operator:e.value,priority:e.priority,exp:"TernaryExpression"};return this.addBlockEnd(":"),this.nextExpressionLex(),n.accord=this.expStruct,this.nextExpressionLex(),n.mismatch=this.expStruct,t.valueType="literal",this.expStruct=n},e.expUpdate=function(e,t){var n={argment:null,prefix:!0,operator:e.value,priority:e.priority,exp:"UpdateExpression"},r=this.atomLex();return this.expressionLex(r,!1),"identifier"===t.valueType?(n.argment=this.expStruct,t.valueType="literal",this.expStruct=n):this.throwErr("自运算后面应该是标识量!",e)},e.expUpdateAfter=function(e,t){function r(e){switch(e.exp){case"BinaryExpression":return r(e.right);case"MemberExpression":return e;case"UnaryExpression":return r(e.argment);default:switch(e.type){case n.Keyword:case n.identifier:return e.right;default:return"identifier"===t.valueType}}return!1}if(!r(this.expStruct))return this.throwErr("后自运算表达式有误!",e);var i={argment:null,prefix:!1,operator:e.value,priority:e.priority,exp:"UpdateExpression"};return this.expStruct=this.expConcat(i),i},e.expMember=function(e,t){var r={object:null,property:null,priority:1,computed:!1,exp:"MemberExpression"},i=this.atomLex(),o=this.expStruct;switch(e.value){case".":switch(i.type){case n.Keyword:case n.identifier:r.property=i;break;default:return this.throwErr("成员表达式语法错误")}break;case"[":r.computed=!0,this.addBlockEnd("]"),this.nextExpressionLex(i),this.arguments=this.levelArgs[this.levelArgs.length-1],r.property=this.expStruct}return t.valueType="identifier",this.expStruct=this.expConcat(o,r),(i=this.atomLex())&&("."===i.value||"["===i.value?r=this.expMember(i,t):"("===i.value?r=this.expCall(i,t):this.soonAtom=i),r},e.expArray=function(e,t){var n={arguments:null,exp:"ArrayExpression",priority:1},r=this.expMode,i=this.expConcat(this.expStruct,n);if(this.expMode="Array",this.addBlockEnd("]"),this.nextExpressionLex(),this.arguments.length){n.arguments=this.arguments;var o=n.arguments.pop();o&&n.arguments.push(o)}else n.arguments=this.expStruct?[this.expStruct]:[];return this.arguments=this.levelArgs[this.levelArgs.length-1],t.valueType="memory",this.expStruct=i,this.expMode=r,n},e.expObject=function(e,t){var n={property:[],exp:"ObjectExpression",priority:1},r=this.expConcat(this.expStruct,n),i=this.expMode;if(t.valueType=null,this.expStruct=null,this.addBlockEnd("}"),this.expMode="Object",this.nextExpressionLex(),this.arguments&&(n.property=this.arguments,this.expStruct)){var o=this.arguments.length;0!==o&&(this.arguments[o-1].value=this.expStruct)}return t.valueType="memory",this.expStruct=r,this.expMode=i,n},e.expCall=function(e,t){if("identifier"!==t.valueType&&"CallExpression"!==this.expStruct.exp)return this.throwErr("表达式不是一个方法！");var r,i=t.brackets,o=this.atoms[this.atoms.length-3];switch(t.valueType){case"memory":r=this.expStruct.exp+" ";case n.Null:r=r||"空: "+o.value;case n.String:r=r||"字符串: "+o.value;case n.Numeric:r=r||"数字: "+o.value;case n.Boolean:return r=r||"布尔值: "+o.value,this.throwErr("语法错误，"+r+" 不是一个方法!",o)}t.brackets=4;var a={exp:"CallExpression",arguments:[],priority:1,callee:null},s=this.expMode,c=this.expConcat(a);if(this.expMode="Call",this.addBlockEnd(")"),this.nextExpressionLex(),this.arguments.length){a.arguments=this.arguments;var u=a.arguments.pop();u&&a.arguments.push(u)}else a.arguments=this.expStruct?[this.expStruct]:[];this.arguments=this.levelArgs[this.levelArgs.length-1],t.valueType="literal",this.expStruct=c,this.expMode=s,t.brackets=i;var l=this.atomLex();return l&&("."===l.value||"["===l.value?a=this.expMember(l,t):this.soonAtom=l),a},e.expAssignment=function(e,t){var n={exp:"AssignmentExpression",value:null,identifier:this.expStruct,operator:e.value,priority:e.priority};return this.nextExpressionLex(),n.value=this.expStruct,this.expStruct=n},e.expFilter=function(e,t){var r={exp:"FilterExpression",arguments:[],operator:e.value,priority:e.priority,callee:null,lead:null},i=this.expConcat(r);if(this.nextExpressionLex(this.atomLex(),!1),this.expStruct.exp)switch(this.expStruct.exp){case"MemberExpression":r.callee=this.expStruct;break;case"CallExpression":r.callee=this.expStruct.callee,r.arguments=this.expStruct.arguments;break;default:return this.throwErr("过滤器表达式错误!")}else switch(this.expStruct.type){case n.Keyword:case n.identifier:r.callee=this.expStruct;break;default:return this.throwErr("过滤器数据类型错误!")}return this.expStruct=i,i.valueType="literal",r}}(e.prototype),e.prototype.atomLex=function(){if(!this.eof()){var e,n=this.source.charCodeAt(this.index);if(t.isidentifierStart(n))e=this.identifierLex();else if(40===n||41===n||59===n)e=this.PunctuatorLex();else if(39===n||34===n)e=this.StringLiteralLex();else if(46===n)e=t.isDecimalDigit(this.source.charCodeAt(this.index+1))?this.NumericLiteralLex():this.PunctuatorLex();else if(t.isDecimalDigit(n))e=this.NumericLiteralLex();else if(n>=55296&&n<57343&&t.isidentifierStart(t.codePointAt(n)))e=this.identifierLex();else{if(t.isWhiteSpace(n))return this.index++,this.atomLex();e=this.PunctuatorLex()}if(this.preAtom=this.nowAtom,this.nowAtom=e,e)return this.atoms.push(e),e}},function(e){e.identifierLex=function(){for(var e,r=this.index++;!this.eof()&&t.isidentifierPart(this.source.charCodeAt(this.index));)++this.index;var i=this.source.slice(r,this.index);return e=1===i.length?n.identifier:t.isKeyword(i)?n.Keyword:"null"===i?n.Null:"true"===i||"false"===i?n.Boolean:n.identifier,{type:e,value:i,start:r,end:this.index}},e.PunctuatorLex=function(){var e,t,r=this.index,i=this.source[this.index++];switch(i){case"{":case"[":case"(":t=2,e="bracketsLeft";break;case"}":case"]":case")":t=2,e="bracketsRight";break;case".":t=1,e="dot","."===this.source[this.index]&&"."===this.source[this.index+1]&&(this.index+=2,i="...",t=9,e="keySymbol");break;case";":t=1,e="semicolon";break;case",":t=1,e="comma";break;case":":t=8,e="colon";break;case"?":t=8,e="interrogation";break;case"~":t=3,e="unitary";break;default:if(">>>="===(i=this.source.substr(--this.index,4)))this.index+=4,t=9,e="assignment";else switch(i=i.substr(0,3),this.index+=3,i){case"===":case"!==":t=7,e="logical";break;case">>>":t=6,e="bitwise";break;case"<<=":case">>=":case"**=":t=9,e="assignment";break;default:switch(i=i.substr(0,2),this.index--,i){case"||":case"&&":case"==":case"!=":case"<=":case">=":t=7,e="logical";break;case"++":case"--":t=2,e="update";break;case"<<":case">>":t=6,e="bitwise";break;case"/=":case"+=":case"-=":case"*=":case"&=":case"|=":case"^=":case"%=":t=9,e="assignment";break;case"**":t=4,e="complex";break;case"=>":t=9,e="keySymbol";break;case"|:":t=3,e="filter";break;default:switch(this.index-=2,i=this.source[this.index++]){case"<":case">":t=7,e="logical";break;case"=":t=9,e="assignment";break;case"+":case"-":t=5,e="single";break;case"*":case"/":case"%":t=4,e="complex";break;case"&":case"|":case"^":t=6,e="bitwise";break;case"!":t=3,e="unitary";break;default:this.index--}}}}return this.index===r?this.throwErr("标点错误"):{type:n.Punctuator,value:i,start:r,end:this.index,identity:e,priority:t}},e.StringLiteralLex=function(){var e=this.index,r=this.source[e];if("'"!==r&&'"'!==r)return this.throwErr("String literal must starts with a quote");++this.index;for(var i="";!this.eof();){var o=this.source[this.index++];if(o===r){r="";break}if(t.isLineTerminator(o.charCodeAt(0)))break;i+=o}return""!==r?(this.index=e,this.throwErr("字符语法错误，没有找到关闭的引号！")):{type:n.String,value:i,start:e,end:this.index}},e.NumericLiteralLex=function(){var e=this.index,r=this.source[e];if(!t.isDecimalDigit(r.charCodeAt(0))&&"."!==r)return this.throwErr("数字文字必须以十进制数字或小数点开始");var i="";if("."===r)for(i+=this.source[this.index++];t.isDecimalDigit(this.source.charCodeAt(this.index));)i+=this.source[this.index++];else for(i=this.source[this.index++];t.isDecimalDigit(this.source.charCodeAt(this.index));)i+=this.source[this.index++];return t.isidentifierStart(this.source.charCodeAt(this.index))&&this.throwErr("Number类型语法错误!"),{type:n.Numeric,value:parseFloat(i),start:e,end:this.index}}}(e.prototype),e.prototype.eof=function(){return this.index>=this.length},e.prototype.throwErr=function(e,t){this.errMsg=e,t=t||this.preAtom,console.warn(e+" [ 第"+(t.start+1)+"个字符 ]")};var r={};module.exports=function(t){var n=r[t];return n||(n=new e(t),r[t]=n.expStruct,Object.keys(n).forEach(function(e){delete n[e]}),n=r[t]),n}},{}],19:[function(require,module,exports){"use strict";function e(e){var t=this;Object.keys(e).forEach(function(n){t[n]=e[n]})}function t(t,n,r,i,o){var a=void 0===n?void 0:n.key;return new e({sel:t,data:n||{},$scope:{},middleScope:[],rootScope:{},children:r,text:i,elm:o,isShow:!0,isComponent:!1,isDirective:!1,key:a})}function n(e){return void 0===e}function r(e){return void 0!==e}function i(e){return"string"==typeof e||"number"==typeof e}function o(e){return Array.isArray(e)}function a(e,t){return e.key===t.key&&e.sel===t.sel}function s(e){return e.hasOwnProperty("sel")}function c(e,t,n){var r,i,o,a={};for(r=t;r<=n;++r)(o=e[r])instanceof Object&&void 0!==(i=o.key)&&(a[i]=r);return a}function u(e){var n=e.id?"#"+e.id:"",r=e.className?"."+e.className.split(" ").join("."):"";return t(b.tagName(e).toLowerCase()+n+r,{},[],void 0,e)}function l(e,t,n){b.insertBefore(n,e.elm,t.elm),t.destroy()}function f(e){var t,n,r=document.createDocumentFragment();return e.forEach(function(e){e.isShow?t?(b.insertBefore(t,e.elm,n.nextSibling),n=e.elm):(t=e.elm.parentNode)?b.insertBefore(t,r,n=e.elm):r.appendChild(e.elm):e.destroy()}),r.childNodes}function p(e){var t=[];return e.forEach(function(e,n){e instanceof Object?void 0!==e.structRes.resData&&t.push(e.structRes.resData):t.push(e)}),t.join("")}var h={},d=require("./syntaxHandle"),m=require("../../../inside/lib/observer"),v=["init","create","update","remove","destroy","pre","post"],y=t("",{},[],void 0,void 0),b={createElement:function(e){return document.createElement(e)},createElementNS:function(e,t){return document.createElementNS(e,t)},createTextNode:function(e){return document.createTextNode(e)},createComment:function(e){return document.createComment(e)},insertBefore:function(e,t,n){n=n instanceof Array?n[0]:n,t instanceof Array?t.forEach(function(t,r){e.insertBefore(t,n)}):e.insertBefore(t,n)},removeChild:function(e,t){e&&(t instanceof Array?t.forEach(function(t){e.removeChild(t)}):e.removeChild(t))},appendChild:function(e,t){t instanceof Array?t.forEach(function(t){e.appendChild(t)}):e.appendChild(t)},parentNode:function(e){return(e instanceof Array?e[0]:e).parentNode},replaceChild:function(e,t,n){var r;if(t instanceof Array){var i=document.createDocumentFragment();t.forEach(function(e){i.appendChild(e)}),t=i}n instanceof Array&&(r=n,n=r.shift(),r.forEach(function(t){e.removeChild(t)})),e.replaceChild(t,n)},nextSibling:function(e){return e&&e.nextSibling},tagName:function(e){return e.tagName},setTextContent:function(e,t){e.textContent=t},getTextContent:function(e){return e.textContent},isElement:function(e){return 1===e.nodeType},isText:function(e){return 3===e.nodeType},isComment:function(e){return 8===e.nodeType}},g=function(e){function m(e,t,n){return function(){0==--t&&(e.destroy(),n&&(n.elm=[],n.innerVnode.forEach(function(e){n.elm=n.elm.concat(e.elm)})))}}function x(e,t,a,s,c){function u(){if(!k||!--k){if(e.isReplace)switch(!0){case e.innerVnode instanceof Element:e.elm=e.innerVnode,e.innerVnode=[];break;case"string"==typeof e.innerVnode:e.innerVnode=module.exports.html2vdom(e.innerVnode);case e.innerVnode instanceof Array:case e.innerVnode instanceof Object:if(e.innerVnode instanceof Array||(e.innerVnode=[e.innerVnode]),e.elm&&e.elm.length)return g(b,e,w,s.filter,c),b.destroy("elm"),void(b=e.clone());e.elm=[],e.innerVnode.forEach(function(n){n.innerScope||e.innerScope||!e.isComponent||(n.innerScope=n.$scope),x(n,t,function(t,n){if(n){var r=f(e.innerVnode);r.length&&(e.elm=[].slice.call(r),a(e,n))}else e.elm=e.elm.concat(t.elm)},s,e)})}else if("!"===j)n(e.text)&&(e.text=""),e.elm=O.createComment(e.text);else if(r(j)){if(b&&e.elm===b.elm)return;var u=e.elm=r(E)&&r(m=E.ns)?O.createElementNS(m,e.tag):O.createElement(e.tag);e.id&&(u.id=e.id),e.className&&(u.className=e.className),h.create.forEach(function(t){t(y,e)}),o(C)?C.forEach(function(n){if(n instanceof Object){e.middleScope.length&&(n.middleScope=n.middleScope.concat(e.middleScope)),Object.keys(e.$scope).length&&n.middleScope.push(e.$scope);var r;x(n,t,function(t,n){n?l(t,r,e.elm):O.appendChild(u,t.elm),r=t.clone()},s,e)}else O.appendChild(u,O.createTextNode(n))}):i(e.text)&&O.appendChild(u,O.createTextNode(e.text))}else{if(e.data&&e.data.exps){var S,A=e.data.exps;A.forEach(function(t,n){if(t instanceof Object){var r=[e.rootScope].concat(e.middleScope);r.push(e.$scope),(A[n]=d(t,r,s.filter,!0)).readWatch(function(t){S&&(S=p(A),e.text!==S&&O.setTextContent(e.elm,e.text=S))})}}),S=e.text=p(A)}e.elm=O.createTextNode(e.text)}m=E.hook,r(m)&&(m.create&&m.create(y,e),m.insert&&t.push(e)),a(e,v),b&&b.destroy(),b=e.clone(),v=!0}}var m,v,b,w,S,E=e.data||{},k=h.init.length,C=e.children,j=e.sel;if((S=e.innerFilter)?(Object.keys(s.filter).forEach(function(e){S[e]=s.filter[e]}),s.filter=S):S=s.filter,c?((S=c.innerFilter)?Object.keys(s.filter).forEach(function(e){S[e]=s.filter[e]}):S=s.filter,c.innerScope?(w=c.innerScope,s={scope:w,filter:S}):(w=c.rootScope,c instanceof Object&&Object.keys(c.$scope||{}).length&&e.middleScope.push(c.$scope))):w=s.scope,e.rootScope=w,r(j)){var A=j.indexOf("#"),D=j.indexOf(".",A),P=A>0?A:j.length,R=D>0?D:j.length;e.tag=-1!==A||-1!==D?j.slice(0,Math.min(P,R)):j,P<R&&(e.id=j.slice(P+1,R)),D>0&&(e.className=j.slice(R+1).replace(/\./g," "))}r(E)&&r(m=E.hook)&&r(m=m.init)?(k++,m(e,u,s)):k||u(),h.init.forEach(function(t){t(e,u,s,c)})}function w(e,n,r,i,o,a,s,c){var u=e.elm;r.slice(i,o+1).forEach(function(r){if(r instanceof Object){var i;x(r,a,function(e,t){t?l(e,i,u):O.appendChild(u,e.elm,n),i=e.clone(),c&&(c.elm=[],c.innerVnode.forEach(function(e){e.elm&&(c.elm=c.elm.concat(e.elm))}))},s,e)}else O.appendChild(u,O.createTextNode(t.text),n)}),c&&(c.elm=[],c.innerVnode.forEach(function(e){c.elm=c.elm.concat(e.elm)}))}function S(e){var t,n=e.data;r(n)&&(r(t=n.hook)&&r(t=t.destroy)&&t(e),h.destroy.forEach(function(t){t(e)}),r(e.children)&&e.children.forEach(function(e){e instanceof Object&&S(e)}))}function E(e,t,n,i,o){for(;n<=i;++n){var a=void 0,s=void 0,c=void 0,u=t[n];u instanceof Object&&r(u.sel)?(S(u),s=h.remove.length+1,c=m(u,s,o),h.remove.forEach(function(e){e(u,c)}),r(a=u.data)&&r(a=a.hook)&&r(a=a.remove)?a(u,c):c()):u.destroy()}o&&(o.elm=[],o.innerVnode.forEach(function(e){o.elm=o.elm.concat(e.elm)}))}function k(e,t,r,i,o){if(t.isReplace){var s=r;r=r.innerVnode,t=t.innerVnode}for(var u,f,p,h,d=e.elm,m=0,v=0,y=t.length-1,b=t[0],g=t[y],S=r.length-1,k=r[0],j=r[S];m<=y&&v<=S;)b?g?k?j?a(b,k)?(C(b,k,i,o,e),b=t[++m],k=r[++v]):a(g,j)?(C(g,j,i,o,e),g=t[--y],j=r[--S]):a(b,j)?(C(b,j,i,o,e),O.insertBefore(d,b.elm,O.nextSibling(g.elm)),b=t[++m],j=r[--S]):a(g,k)?(C(g,k,i,o,e),O.insertBefore(d,g.elm,b.elm),g=t[--y],k=r[++v]):(void 0===u&&(u=c(t,m,y)),f=u[k.key],n(f)?(!function(t){var n;x(t,i,function(e,t){t?l(e,n,d):O.insertBefore(d,e.elm,b.elm),n=e.clone()},o,e)}(k),k=r[++v]):(p=t[f],p.sel!==k.sel?function(t){var n;x(t,i,function(e,t){t?l(e,n,d):O.insertBefore(d,e.elm,b.elm),n=e.clone()},o,e)}(k):(C(p,k,i,o,e),t[f]=void 0,O.insertBefore(d,p.elm,b.elm)),k=r[++v])):j=r[--S]:k=r[++v]:g=t[--y]:b=t[++m];y!==S&&(m>y?(h=null==r[S+1]?null:r[S+1].elm,w(e,h,r,v,S,i,o,s)):v>S&&E(d,t,m,y,s))}function C(e,t,i,o,a){var s,c;r(s=t.data)&&r(c=s.hook)&&r(s=c.prepatch)&&s(e,t);var u=t.elm=e.elm,l=e.children,f=t.children;if(e!==t){if(r(t.data)&&(h.update.forEach(function(n){n(e,t)}),s=t.data.hook,r(s)&&r(s=s.update)&&s(e,t)),n(t.text))t.isComponent&&t.isClone?(t.elm=void 0,x(t,i,function(t,n){O.replaceChild(O.parentNode(e.elm),t.elm,e.elm),e.destroy()},o)):r(l)&&r(f)?l!==f&&k(t,l,f,i,o):r(f)?(r(e.text)&&O.setTextContent(u,""),w(t,null,f,0,f.length-1,i,o)):r(l)?E(u,l,0,l.length-1):r(e.text)&&O.setTextContent(u,"");else{if(t.data&&t.data.exps){var m,v=t.data.exps;t.rootScope=e.rootScope,a&&Object.keys(a.$scope||{}).length&&t.middleScope.push(a.$scope),v.forEach(function(e,n){if(e instanceof Object){var r=[t.rootScope].concat(t.middleScope);r.push(t.$scope),(v[n]=d(e,r,o.filter,!0)).readWatch(function(e){m&&(m=p(v),u.textContent!==m&&O.setTextContent(t.elm,t.text=m))})}}),m=p(v),u.textContent!==m&&O.setTextContent(t.elm,t.text=m)}else e.text!==t.text&&O.setTextContent(u,t.text);e.destroy("elm")}r(c)&&r(s=c.postpatch)&&s(e,t)}}var O=b;return v.forEach(function(t){h[t]=[],e.forEach(function(module){var e=module[t];r(e)&&h[t].push(e)})}),function(e,n,r,i,o){r=r||{};var c,f,p,d=[],m={scope:r.scope||{},filter:r.filter||{},layoutInfo:r.layoutInfo,nowLayoutInfo:r.nowLayoutInfo};if(e?(s(e)||(e=u(e)),f=e.elm,p=O.parentNode(f),O.nextSibling(f)):(null,p=document.createDocumentFragment()),"string"==typeof n&&(n=t(void 0,{},void 0,n)),n.isReplace)f=e.innerVnode&&e.innerVnode.length?e.innerVnode[0].elm:e.elm,f&&(p=f instanceof Array?O.parentNode(f[0]):O.parentNode(f)),i||p?(i&&(i.elm||(i.elm=p)),i=i||{elm:p},k(i,e,n,d,m)):(n.elm=[],n.innerVnode.forEach(function(e){x(e,d,function(e,t){n.elm=n.elm.concat(e.elm)},m,n)}));else if(n instanceof Array){var v,y=n,b=p;n.forEach(function(e){var t,n;x(e,d,function(e,r){if(r)l(e,t,t.elm.parentNode);else{var i=y.indexOf(e);b=v?v instanceof Array?v[0].parentNode:v.parentNode:p,O.insertBefore(n=b,e.elm,y[i+1]?y[i+1].elm:null)}t=e.clone(),v=e.elm},m)}),e&&null!==p&&E(p,[e],0,0)}else{if(!(n instanceof Object))return e;for(s(n)||(n=u(n)),c=0;c<h.pre.length;++c)h.pre[c]();e&&a(e,n)?(Object.keys(n.rootScope).length?Object.keys(scope).forEach(function(e){n.$scope[e]=scope[e]}):n.rootScope=scope,C(e,n,d,m)):x(n,d,function(t,r){var i;null!==p&&(r?l(t,i,p):(O.insertBefore(p,n.elm,O.nextSibling(f)),e&&E(p,[e],0,0)),i=t.clone())},m)}return h.post.forEach(function(e){e()}),d.forEach(function(e){e.data.hook.insert(e)}),o instanceof Function&&o(p,function(e){p=e}),n}}([function(){function e(e,t,n,r){function i(){var e=p.pop();e&&(e instanceof w.directiveClass&&(delete l[e.name],delete e.$api.templateVnode.data.attrsMap[e.name]),e.conf.stopRender?(a=!0,e.init(),p=void 0):e.conf.loadRender?(e.watchCreate(function(){i()}),e.init()):(e.init(),p.length||e.conf.isReplace?i():t()))}var o,a,s,c,u=e.data,l=u.attrsMap||{},f=u.attrs=u.attrs||{},p=[],h=x.get(e.tag);if(n.layoutInfo){switch(c=n.layoutInfo,e.tag){case"layout-block":s=!0;var d=l.loaction?l.loaction.value:e.data.attrsMap.location.value;c.blockMap[d]={vnode:e,parentNode:r};break;case"layout-main":s=!0,c.main={vnode:e,parentNode:r}}s&&(e.isReplace=!0,e.innerVnode=e.children)}h?(o=h(e,n,module.exports),p.push(o),o.watchRender(function(){t(),a=!0})):a=!0,Object.keys(l).forEach(function(r){var i,o=w.get(r);o?(i=o(e,n,module.exports),p.push(i),i.watchRender(function(){a&&t()})):r.match(/^\w+$/)&&(f[r]=l[r].value)}),p.length?(p=p.sort(function(e,t){return e.priority-t.priority}),i()):t()}return{init:e}}(),function(){function e(e,n){var i,o,a,s=n.elm,c=e.data.attrs,u=n.data.attrs;if((c||u)&&c!==u){c=c||{},u=u||{};for(i in u)o=u[i],c[i]!==o&&(!o&&r[i]?s.removeAttribute(i):(a=i.split(":"),a.length>1&&t.hasOwnProperty(a[0])?s.setAttributeNS(t[a[0]],i,o):s.setAttribute(i,o)));for(i in c)i in u||s.removeAttribute(i)}}for(var t={xlink:"http://www.w3.org/1999/xlink"},n=["allowfullscreen","async","autofocus","autoplay","checked","compact","controls","declare","default","defaultchecked","defaultmuted","defaultselected","defer","disabled","draggable","enabled","formnovalidate","hidden","indeterminate","inert","ismap","itemscope","loop","multiple","muted","nohref","noresize","noshade","novalidate","nowrap","open","pauseonexit","readonly","required","reversed","scoped","seamless","selected","sortable","spellcheck","translate","truespeed","typemustmatch","visible"],r=Object.create(null),i=0,o=n.length;i<o;i++)r[n[i]]=!0;return{create:e,update:e}}(),function(){function e(e,t){var n,r,i=t.elm,o=e.data.class,a=t.data.class;if((o||a)&&o!==a){o=o||{},a=a||{};for(r in o)a[r]||i.classList.remove(r);for(r in a)(n=a[r])!==o[r]&&i.classList[n?"add":"remove"](r)}}return{create:e,update:e}}(),function(){function e(e,t){var n,r,i=t.elm,o=e.data.props,a=t.data.props;if((o||a)&&o!==a){o=o||{},a=a||{};for(n in o)a[n]||delete i[n];for(n in a)r=a[n],o[n]===r||"value"===n&&i[n]===r||(i[n]=r)}}return{create:e,update:e}}(),function(){function e(e,t,n){o(function(){e[t]=n})}function t(t,n){var r,i,o=n.elm,a=t.data.style,s=n.data.style;if((a||s)&&a!==s){a=a||{},s=s||{};var c="delayed"in a;for(i in a)s[i]||("-"===i[0]&&"-"===i[1]?o.style.removeProperty(i):o.style[i]="");for(i in s)if(r=s[i],"delayed"===i)for(i in s.delayed)r=s.delayed[i],c&&r===a.delayed[i]||e(o.style,i,r);else"remove"!==i&&r!==a[i]&&("-"===i[0]&&"-"===i[1]?o.style.setProperty(i,r):o.style[i]=r)}}function n(e){var t,n,r=e.elm,i=e.data.style;if(i&&(t=i.destroy))for(n in t)r.style[n]=t[n]}function r(e,t){var n=e.data.style;if(!n||!n.remove)return void t();var r,i,o=e.elm,a=0,s=n.remove,c=0,u=[];for(r in s)u.push(r),o.style[r]=s[r];i=getComputedStyle(o);for(var l=i["transition-property"].split(", ");a<l.length;++a)-1!==u.indexOf(l[a])&&c++;o.addEventListener("transitionend",function(e){e.target===o&&--c,0===c&&t()})}var i="undefined"!=typeof window&&window.requestAnimationFrame||setTimeout,o=function(e){i(function(){i(e)})};return{create:t,update:t,destroy:n,remove:r}}(),function(){function e(e,t){var n=e.data.on,r={},i=e.listener,o=e.elm,a=t&&t.data.on,s=t&&t.elm;e.listener===t.listener&&n===a&&!a==!e.listener||(i=i||{},n?Object.keys(a).forEach(function(e){if(i[e]){var t=[].concat(i[e]);(r[e]=[].concat(a[e])).forEach(function(n){var r=t.indexOf(n);-1===r?s.addEventListener(e,n,!1):t.splice(r,1)}),t.forEach(function(t){o.removeEventListener(e,t,!1)})}else(r[e]=[].concat(a[e])).forEach(function(t){s.addEventListener(e,t,!1)})}):Object.keys(a).forEach(function(e){(r[e]=[].concat(a[e])).forEach(function(t){s.addEventListener(e,t,!1)})}),t.newListener=r)}return{create:e,update:e,destroy:e}}()]);e.prototype.clone=function(){var t={},r={},i=[],o=[],a=this;return["$scope","children","elm","isShow","key","sel","tag","text","rootScope","isReplace","isComponent","isDirective","cid"].forEach(function(e){a.hasOwnProperty(e)&&(t[e]=a[e])}),this.innerVnode instanceof Array&&this.innerVnode.length?(this.innerVnode.forEach(function(e){o.push(e.clone())}),t.innerVnode=o):t.elm instanceof Array&&(t.elm=void 0),t.data=function(e){var t={},n={};return Object.keys(e).forEach(function(r){switch(r){case"attrsMap":e[r]instanceof Object&&Object.keys(e[r]).forEach(function(t){n[t]=e[r][t]}),t[r]=n;break;default:t[r]=e[r]}}),t}(a.data),n(this.sel)&&this.data&&this.data.exps&&(t.data.exps=[],Object.keys(this.data.exps).forEach(function(e){t.data.exps[e]=a.data.exps[e]})),Object.keys(a.$scope||{}).forEach(function(e){r[e]=a.$scope[e]}),t.$scope=r,t.middleScope=this.middleScope.concat(),this.children&&this.children.forEach(function(e){i.push(e.clone())}),t.children=i,t.isClone=!0,new e(t)},e.prototype.scope=function(e){var t=this;e instanceof Object&&Object.keys(e).forEach(function(n){t.$scope[n]=e[n]})},e.prototype.observerToScope=function(e,t,n){var r=this,i=m(e);return i.readWatch(t,function(e){r.$scope[n]=e}),i},e.prototype.destroy=function(e){var t=this;if(n(this.sel)&&this.data&&this.data.exps)switch(e){case"elm":case!1:break;default:Object.keys(this.data.exps).forEach(function(e){t.data.exps[e]instanceof Object&&t.data.exps[e].destroy(),delete t.data.exps[e]}),(this.data.exps||[]).forEach(function(e,n){e.structRes&&e.destroy(),delete t.data.exps[n]})}if(this.elm){if(this.elm instanceof Array)switch(e){case!1:break;case"elm":default:(this.innerVnode||[]).forEach(function(n,r){"elm"!==e&&delete t.elm[r],delete t.innerVnode[r],n.destroy(e)})}else if(this.elm.parentNode)switch(e){case!1:break;case"elm":default:this.children&&this.children.forEach(function(n,r){delete t.children[r],n.destroy(e)})}"elm"!==e&&b.removeChild(this.elm.parentNode,this.elm)}Object.keys(this.$scope||{}).forEach(function(e){delete t.$scope[e]}),Object.keys(this.data||{}).forEach(function(e){delete t.data[e]}),Object.keys(this).forEach(function(e){delete t[e]})};var x=require("./componentManage"),w=require("./directiveManage");module.exports={patch:g,vnode:t,cbs:h,isVnode:s,domApi:b,node2vnode:u}},{"../../../inside/lib/observer":53,"./componentManage":14,"./directiveManage":15,"./syntaxHandle":17}],20:[function(require,module,exports){function e(e,r,i){var o=n(e.view,r,"view");t(o,{mode:"view",suffix:e.tplSuffix,isAjax:"ajax"===e.requireType},function(e){if(!1===e)return void log.error("视图文件 ["+this.responseURL+"]缺失！");i(e)})}var t=require("../../../inside/source/getSource"),n=require("../../../inside/source/sourcePathNormal");module.exports=e},{"../../../inside/source/getSource":60,"../../../inside/source/sourcePathNormal":61}],21:[function(require,module,exports){"use strict";function e(){var e;if(t.watch(),"html5"!==s.route.mode&&window.location.hash.match(/^#!\/[^\s]+/))n(c(s.route.mode),function(e){if(e||refresh){var t=e.url;if("html5"===s.route.mode){var n=o.resolve(t,insideConf.rootPath);window.history.pushState({target:t},null,n)}else i.hash("!/"+t)}});else{if(!s.route.defaultUrl)return;e=n(s.route.defaultUrl);var a=e.url;if("html5"===s.route.mode){var u=o.resolve(a);window.history.pushState({target:a},null,u)}else r.hashListener=!1,i.hash("!/"+a)}}var t=require("./route/index"),n=require("./route/exec"),r=require("./route/routeData"),i=require("../../inside/lib/url"),o=require("../../inside/lib/path"),a=require("./route/pathConvert"),s=require("../../inside/config/lib/commData").appConf,c=a.getNowPath;a.getRoutePathInfo;module.exports={start:e}},{"../../inside/config/lib/commData":31,"../../inside/lib/path":54,"../../inside/lib/url":58,"./route/exec":22,"./route/index":24,"./route/pathConvert":25,"./route/routeData":27}],22:[function(require,module,exports){"use strict";function e(e,s,h){var d=r(e),m=d.parameter,v=d.parameterUrl,y=u.url,b=d.path,g=!1,x=!1;if(c.emit("route:start",{url:b,requestUrl:e,parameter:m,parameterUrl:v,nowUrl:y,stop:function(){x=!0}}),!x){u.url=e,u.path=b,u.realPath=e,u.parameter=m,u.parameterUrl=v;var w,S=n(u);if(S||(g=!0,c.emit("route:error",{requestUrl:e}),t.routeState="error",b="error/msg:"+p.notPage,u.path=b,u.url=b,u.suffix=f.route.suffix,(S=n(u))?o.warn(p.notOption):(o.error(p.errTmpl),S={path:u.path,suffix:u.suffix,routeConfig:{}})),S.isAutoRoute){var E,k,C;w=S.data,"string"==typeof w?(/^(\w+:)?\/\/(\w[\w\.]*)/.test(w)||-1===w.indexOf("@")&&(w+="@"),k=C=a.normalize(w+"/"+S.path)):(C=w.presenter,/^(\w+:)?\/\/(\w[\w\.]*)/.test(C)||-1===C.indexOf("@")&&(C+="@"),w.view?(k=w.view,/^(\w+:)?\/\/(\w[\w\.]*)/.test(C)||-1===k.indexOf("@")&&(k+="@")):k=C,E=w.suffix),S.path=S.path.replace(RegExp(".?"+(E||S.suffix)+"$"),"").replace(/\/([\w-]+)$/,":$1"),S={presenter:a.normalize(C+"/"+S.path),view:a.normalize(k+"/"+S.path),suffix:E||S.suffix}}if(S.presenter||o.error("路由必须指定presenter!"),u.path=u.path.replace(RegExp(".?"+S.suffix+"$"),""),b=u.path+"."+S.suffix.replace(/^\./,"")+v,u.url=b,u.suffix=S.suffix,y===b&&!h)return!1;if(c.emit("route:change",{url:b,requestUrl:e,parameter:m,nowUrl:y,stop:function(){x=!0}}),!x)return t.history.isBack=t.history.isBack?b===l.url:t.history.isBack,u.url=b,l.url=y,"function"==typeof s&&s(u),g||(c.emit("route:success",{requestUrl:e,routeInfo:u}),t.routeState="success",window.$_GET=m),i.exec(S,u),u}}var t=require("./routeData"),n=require("./getRouteInfo"),r=require("./pathConvert").getRoutePathInfo,i=require("../../../engine/index"),o=require("../../../inside/log/log"),a=require("../../../inside/lib/path"),s=require("../../../inside/config/index"),c=require("../../../inside/event/insideEvent"),u=t.nowInfo,l=t.prevInfo,f=s.appConf,p={notPage:"404 Not Found【找不到对应的页面】",errTmpl:"错误页面错误【缺失对应的视图或presenter】",notOption:"没有找到对应的[错误]视图或presenter"};module.exports=e},{"../../../engine/index":1,"../../../inside/config/index":30,"../../../inside/event/insideEvent":37,"../../../inside/lib/path":54,"../../../inside/log/log":59,"./getRouteInfo":23,"./pathConvert":25,"./routeData":27}],23:[function(require,module,exports){"use strict";function e(e){return t(e.path,n.insideConf.routeMaps)}function t(e,n){for(var r,i,o,a,s,c=-1,u=n.paths.length;++c<u;)if(a=n.paths[c],(o=e.match(a.rule))&&0===o.index){if(i=e.slice(a.rule.length),(/^\/?$/.test(i)||a.conf.suffix===i)&&a.conf)return a.conf;if(r=t(i,a.childrenRoute)){if(!r.isAutoRoute)return r;s||(s=r)}else!s&&a.autoRoute&&(s={isAutoRoute:!0,suffix:a.suffix,path:i.replace(/^[\/\\]*/,""),data:a.autoRoute})}return s}var n=require("../../../inside/config/index");module.exports=e},{"../../../inside/config/index":30}],24:[function(require,module,exports){"use strict";var e=require("./watch");require("./redirect");module.exports={watch:e}},{"./redirect":26,"./watch":28}],25:[function(require,module,exports){function e(e){var t=n.toObject(e),r="";return{url:e,path:e.replace(/\?[\w\W]*/,function(e){return r=e,""}).replace(/[\/\\]*$/,""),realPath:e,parameter:t,parameterUrl:r}}function t(e){var t;switch(e){case"html5":t=decodeURI(window.location.href.replace(routeData.rootPath,""));break;case"hash":t=decodeURI(window.location.hash.replace(/\#\!\/*/,""))}return t}var n=require("../../../inside/lib/url");module.exports={getRoutePathInfo:e,getNowPath:t}},{"../../../inside/lib/url":58}],26:[function(require,module,exports){"use strict";function e(e,o,c,u){e=e.replace(/^\//,"");for(var l,f=0,p=arguments.length;++f<p&&f<3;)switch(typeof(l=arguments[f])){case"object":l;break;default:c=!!l}i.history.isBack=c,t(e,function(t){if(t||u)if(e=t.url,"html5"===a.route.mode){var o=r.resolve(e,s.rootPath);window.history.pushState({target:e},null,o)}else i.hashListener=!1,n.hash("!/"+e)},u)}var t=require("./exec"),n=require("../../../inside/lib/url"),r=require("../../../inside/lib/path"),i=require("./routeData"),o=require("../../../inside/config/index"),a=o.appConf,s=o.insideConf;module.exports=e},{"../../../inside/config/index":30,"../../../inside/lib/path":54,"../../../inside/lib/url":58,"./exec":22,"./routeData":27}],
27:[function(require,module,exports){var e=require("../../../inside/lib/path");module.exports={history:{},nowInfo:{},prevInfo:{},hashListener:!0,rootPath:e.cwd}},{"../../../inside/lib/path":54}],28:[function(require,module,exports){"use strict";function e(){switch(s){case"html5":window.addEventListener("popstate",function(e){t(o(s).replace(n.rootIntervalPath,""))},!1);break;default:s=a.route.mode="hash",window.addEventListener("hashchange",function(e){n.hashListener?t(o(s)):n.hashListener=!0},!1)}}var t=require("./exec"),n=require("./routeData"),r=require("./redirect"),i=require("../../../inside/lib/path"),o=require("./pathConvert").getNowPath,a=require("../../../inside/config/index").appConf,s=a.route.mode;window.document.addEventListener("click",function(e){for(var t=e.target;"A"!==t.nodeName;)if(t===this||!(t=t.parentNode)||!t)return;if(null===t.getAttribute("target")){var o=t.getAttribute("href");if(o){if(null!==t.getAttribute("isBack"))return window.history.back(),void(n.history.isBack=!0);n.history.isBack=!1,/^(\w+:)?\/\/(\w[\w\.]*)/.test(o)||(e.preventDefault(),o=decodeURI(i.normalize(o.replace(/^\.?[\/\\]/,""))),r(o,{},n.history.isBack))}}},!1),module.exports=e},{"../../../inside/config/index":30,"../../../inside/lib/path":54,"./exec":22,"./pathConvert":25,"./redirect":26,"./routeData":27}],29:[function(require,module,exports){"use strict";var e=require("../inside/event/insideEvent"),t=require("../inside/config/index"),n=require("./boot/index");module.exports={exec:function(){e.emit("config:init",this),t.loadUrlConf(function(e){e&&n.start()})}}},{"../inside/config/index":30,"../inside/event/insideEvent":37,"./boot/index":21}],30:[function(require,module,exports){var e=require("./lib/loadUrlConf"),t=require("./lib/commData"),n=require("../../inside/lib/object");module.exports={loadUrlConf:e,appConf:t.appConf,insideConf:t.insideConf,getCoustomConf:function(e){return n.get(t.customUseConf,e)}}},{"../../inside/lib/object":52,"./lib/commData":31,"./lib/loadUrlConf":34}],31:[function(require,module,exports){function e(t,n){if(1===arguments.length){if(!(t instanceof Object))return e[key];Object.keys(t).forEach(function(n){e[n]=t[n]})}else 2===arguments.length&&"string"==typeof t&&(e[t]=n)}var t={isConf:!1,nowUrl:"",fileLength:0},n={routeList:[]},r={comm:{}},i={},o={system:{fileCallback:{model:"model",view:"view",presenter:"presenter"},moduleDirName:{view:"view",presenter:"presenter",model:"model"},fileSuffix:{view:".view",presenter:".presenter",model:".model"},moduleDefault:{view:"index",model:"index",presenter:"index",viewSlice:"index",modelSlice:"index",presenterSlice:"index"}},route:{mode:"hash",suffix:"",defaultUrl:null},pathList:[],tplSuffix:".html",viewRequire:"ajax",loadConfMode:[]};module.exports={appConf:o,stateData:t,insideConf:n,innerConf:e,customConf:r,customUseConf:i}},{}],32:[function(require,module,exports){"use strict";function e(){var e={paths:[],regExpPaths:[],parameterPaths:[]},i=n.appConf.route.suffix;r.routeList.forEach(function(n){t(n,{childrenRoute:e,suffix:"."===i.charAt(0)?i:"."+i})}),delete r.routeList,r.routeMaps=e;var o=n.customConf,a=n.customUseConf,s=o.comm;Object.keys(s).forEach(function(e){a[e]=s[e]}),n.appConf.loadConfMode.forEach(function(e){o[e]instanceof Object&&Object.keys(o[e]).forEach(function(t){a[t]=o[e][t]})})}function t(e,n){var r,i,o=e.routeInfo;if(n&&!o.routeType?r=n:(i=o.conf.suffix=o.conf.suffix||n.suffix,r={paths:[],regExpPaths:[],parameterPaths:[],childrenRoute:{paths:[],regExpPaths:[],parameterPaths:[]},routeType:o.routeType,suffix:o.conf.suffix="."===i.charAt(0)?i:"."+i}),o.routeType&&(r.paths=r.paths.concat(o.paths).sort(function(e,t){return e.length-t.length}).reduce(function(e,t){return e.push({rule:t,conf:o.conf,autoRoute:o.autoRoute,childrenRoute:r.childrenRoute}),e},[]),r.parameterPaths=r.parameterPaths.concat(o.parameterPaths).reduce(function(e,t){for(var n,i,a,s,c=t[0],u=t[1],l="",f={};s=c.match(/\{\s*([\w$-]+)\s*\}/);)n=c,c=c.slice(s.index+s[0].length),i=s[1],(a=u[i])&&("string"==typeof a?l+=n.slice(0,s.index)+a:a instanceof RegExp&&(l+=n.slice(0,s.index)+a.source),f[i]={index:s.index,rule:a});return e.push({rule:new RegExp("^"+l+c+"$"),parameter:f,conf:o.conf,autoRoute:o.autoRoute,childrenRoute:r.childrenRoute}),e},[]),r.regExpPaths=r.regExpPaths.concat(o.regExpPaths).reduce(function(e,t){return e.push({rule:new RegExp("^"+t.source.replace(/^\^/,"").replace(/\$$/,"")+"$"),conf:o.conf,autoRoute:o.autoRoute,childrenRoute:r.childrenRoute}),e},[])),o.childrenRoute.forEach(function(e){t(e,r)}),n&&o.routeType){var a=n.childrenRoute;a.paths=a.paths.concat(r.paths),a.regExpPaths=a.regExpPaths.concat(r.regExpPaths),a.parameterPaths=a.parameterPaths.concat(r.parameterPaths)}r.forEach(function(e){delete r[e]}),o.forEach(function(e){delete o[e]})}var n=(require("../../../inside/lib/string"),require("../../../inside/config/lib/commData")),r=n.insideConf;module.exports=e},{"../../../inside/config/lib/commData":31,"../../../inside/lib/string":56}],33:[function(require,module,exports){"use strict";function e(){}function t(t,n,i,o){var s,c=p.fileLength,u=p.callback;switch(p.nowUrl=i,o||(o=new e,p.interface=o),t.length){case 1:s=t[0];break;case 2:t[0],s=t[1]}try{s(o,a.innerConf)}catch(e){return n(),r.warn(e)}c!==p.fileLength?p.callback=function(){p.callback=u,n()}:n()}function n(e,n,a,s){p.fileLength++,e=i.resolve(e,p.nowUrl),o({url:e,jsonpCallback:a,complete:function(i){if(this.state){var o=0;(this.many?[].slice.call(arguments):[[].slice.call(arguments)]).forEach(function(r){o++,t(r,function(){0==--o&&(p.fileLength--,s(!0))},e,n)})}else r.warn("应用引导配置出错，请检查！ ("+this.option.url+")")}})}var r=require("../../log/log"),i=require("../../lib/path"),o=require("../../lib/net/jsonp"),a=require("./commData"),s=require("./routeConf"),c=require("./../../../engine/view/lib/componentManage"),u=require("./../../../engine/view/lib/directiveManage"),l=require("./../../../engine/server/index"),f=a.appConf,p=a.stateData;e.prototype.system=function(e){var t,n=f.system,i=n.fileCallback,o=n.fileSuffix,a=n.moduleDirName,s=n.moduleDefault;"object"==typeof e?("object"==typeof(t=e.fileCallback)&&("string"==typeof t.model&&(i.model=t.model),"string"==typeof t.view&&(i.view=t.view),"string"==typeof t.presenter&&(i.presenter=t.presenter)),"object"==typeof(t=e.fileSuffix)&&("string"==typeof t.model&&(o.model="."+t.model.replace(/^\./,"")),"string"==typeof t.view&&(o.view="."+t.view.replace(/^\./,"")),"string"==typeof t.presenter&&(o.presenter="."+t.presenter.replace(/^\./,""))),"object"==typeof(t=e.moduleDirName)&&("string"==typeof t.model&&(a.model=t.model),"string"==typeof t.view&&(a.view=t.view),"string"==typeof t.presenter&&(a.presenter=t.presenter)),"object"==typeof(t=e.moduleDefault)&&("string"==typeof t.model&&(s.model=t.model),"string"==typeof t.view&&(s.view=t.view),"string"==typeof t.presenter&&(s.presenter=t.presenter),"string"==typeof t.modelSlice&&(s.modelSlice=t.modelSlice),"string"==typeof t.viewSlice&&(s.viewSlice=t.viewSlice),"string"==typeof t.presenterSlice&&(s.presenterSlice=t.presenterSlice))):r.warn("系统配置参类型应该是Object!")},e.prototype.routeMode=function(e){f.route.mode=e},e.prototype.defaultUrl=function(e){f.route.defaultUrl=e},e.prototype.routeSuffix=function(e){f.route.suffix="."+e.replace(/^\./,"")},e.prototype.tplSuffix=function(e){f.tplSuffix=e.replace(/^\.+/,"")},e.prototype.viewRequire=function(e){f.viewRequire=e},e.prototype.route=s,e.prototype.module=function(e){},e.prototype.custom=function(e,t){var n=a.customConf;"string"!=typeof t&&(t="comm"),n[t]=a.customConf[t]||{},Object.keys(e).forEach(function(r){n[t][r]=e[r]})},e.prototype.loadConfMode=function(e){[].slice.call(arguments).forEach(function(e){a.appConf.loadConfMode.push(e)})},e.prototype.path=function(e){Object.keys(e).forEach(function(t){f.pathList.push({regExp:RegExp("^"+t+"([/@:]([\\S]*))?$"),path:e[t],len:t.length})}),f.pathList=f.pathList.sort(function(e,t){return t.len-e.len})},e.prototype.component=c.register,e.prototype.directive=u.register,e.prototype.server=l.serverRegister,e.prototype.include=function(e){function t(){0==--i&&(p.nowUrl=o,p.callback())}var r=this,i=0,o=p.nowUrl;e instanceof Array?e.forEach(function(e){i++,n(e,r,"config",t)}):e instanceof Object&&Object.keys(e).forEach(function(o){i++,n(e[o],r,o,t)})},module.exports={configRead:t,configIniterface:e}},{"../../lib/net/jsonp":51,"../../lib/path":54,"../../log/log":59,"./../../../engine/server/index":8,"./../../../engine/view/lib/componentManage":14,"./../../../engine/view/lib/directiveManage":15,"./commData":31,"./routeConf":35}],34:[function(require,module,exports){"use strict";function e(e){var o,a=document.querySelector("script[app-config]");a?(o=a.getAttribute("app-config"),n({url:o,jsonpCallback:"config",complete:function(n){if(this.state){var a=this.many?[].slice.call(arguments):[[].slice.call(arguments)],s=a.length;a.forEach(function(t){r.configRead(t,function(){0==--s&&"function"==typeof e&&(i(),e(!0))},o)})}else t.warn("应用引导配置出错，请检查！ ("+this.option.url+")")}})):e instanceof Function&&e(!1)}var t=require("../../log/log"),n=require("../../lib/net/jsonp"),r=require("./initerface"),i=(require("./commData"),require("./configEndHandle"));module.exports=e},{"../../lib/net/jsonp":51,"../../log/log":59,"./commData":31,"./configEndHandle":32,"./initerface":33}],35:[function(require,module,exports){"use strict";function e(){var e,r,i=[],o=[],a=[],s=[],c=this,u=new t;return[].slice.call(arguments).forEach(function(t){t instanceof Array?(a.push(t),-1===s.indexOf("p")&&s.push("p")):t instanceof Function?r=t:t instanceof RegExp?(o.push(t),-1===s.indexOf("r")&&s.push("r")):"string"==typeof t?(i.push(t),-1===s.indexOf("n")&&s.push("n")):t instanceof Object&&(e=t)}),u.routeInfo={paths:i,conf:e,regExpPaths:o,parameterPaths:a,routeType:s.join(""),childrenRoute:[]},c instanceof t?c.routeInfo.childrenRoute.push(u):n.insideConf.routeList.push(u),r&&r(u),c instanceof t?c:u}function t(){this.routeInfo={}}var n=require("./commData");t.prototype.when=e,t.prototype.other=function(){return this},t.prototype.autoRoute=function(e){return this.routeInfo.autoRoute=e,this},t.prototype.interceptor=function(){return this},t.prototype.suffix=function(e){return"string"==typeof e&&(this.routeInfo.suffix=e),this},module.exports=e},{"./commData":31}],36:[function(require,module,exports){"use strict";var e=function(){this.eventStroage={}};e.prototype.watch=function(e,t){if("function"!=typeof t)return!1;var n=this.eventStroage[e];this.eventStroage[e]=n?n.push(t)&&n:[t]},e.prototype.emit=function(e,t){(this.eventStroage[e]||[]).forEach(function(n){n(t,e)})},e.prototype.destroy=function(e,t){var n=this.eventStroage[e]||[];if(t){var r=n.indexOf(t);-1!==r&&n.splice(r,1)}else delete this.eventStroage[e]},module.exports=e},{}],37:[function(require,module,exports){"use strict";var e=require("./eventInterface"),t=new e;t.watch("config:init",function(){}),t.watch("config:load",function(e){}),t.watch("config:end",function(e){}),t.watch("boot:start",function(e){}),t.watch("route:start",function(e){}),t.watch("page:render",function(e){}),module.exports=t},{"./eventInterface":36}],38:[function(require,module,exports){"use strict";function e(e){for(var t="",n=e.byteLength,r=0;r<n;r++)t+=String.fromCharCode(e[r]);return window.btoa(t)}function t(t){return e(new Uint8Array(t))}function n(t,n){return"data:image/"+(n||"png").match(/[^\.\s\\\/]+$/)+";base64,"+e(t)}function r(e,t){return n(new Uint8Array(e),t)}module.exports={uint8ArrayToBase64:e,arrayBufferToBase64:t,uint8ArrayToImage:n,arrayBufferToImage:r}},{}],39:[function(require,module,exports){"use strict";function e(e,t){return"number"!=typeof e&&"string"!=typeof e||(e=new Date(Number(e))),e instanceof Date||(e=new Date),"string"==typeof t&&(e=c(e,t)),e}function t(t){return e(t).getTime()}function n(t){return e(t).getFullYear()}function r(t){return e(t).getMonth()+1}function i(t){return e(t).getDate()}function o(t){return e(t).getHours()}function a(t){return e(t).getMinutes()}function s(t){return e(t).getSeconds()}function c(t,n){var r=e(t),i=r.getFullYear(),o=r.getMonth()+1,a=r.getDate(),s=r.getHours(),c=(r.getMinutes(),r.getMinutes()),u=r.getSeconds();return"string"!=typeof n?n=i+"-"+o+"-"+a+" "+s+":"+c+":"+u:(n=n.replace(/yy/i,i),n=n.replace(/y/i,String(i).slice(-2)),n=n.replace(/mm/i,o>9?o:"0"+o),n=n.replace(/m/i,o),n=n.replace(/dd/i,a>9?a:"0"+a),n=n.replace(/d/i,a),n=n.replace(/hh/i,s>9?s:"0"+s),n=n.replace(/h/i,s),n=n.replace(/ii/i,c>9?c:"0"+c),n=n.replace(/i/i,c),n=n.replace(/ss/i,u>9?u:"0"+u),n=n.replace(/s/i,u)),n}function u(t,n){return t=e(t),t.setMinutes(t.getMinutes()+n),t}function l(t){return t=e(t),t=new Date(t.getTime()),t.setMonth(t.getMonth()+1),t.setDate(0),t.getDate()}function f(t){t=e(t);var n=new Date(t.getTime());n.setMonth(0),n.setDate(1),n.setHours(0,0,0,0);var r=(t.getTime()-n.getTime())/1e3/60/60/24+1,i=r-(8-n.getDay());return(i>0?Math.ceil(i/7):0)+1}module.exports={convert:e,timestamp:t,getFullYear:n,getMonth:r,getDate:i,getHours:o,getMinutes:a,getSeconds:s,format:c,addMinutes:u,getMonthCountDate:l,getNowWeek:f}},{}],40:[function(require,module,exports){"use strict";exports.encode=function(e){for(var t,n,r,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,a=e.length,s="";o<a;){if(t=255&e.charCodeAt(o++),o===a){s+=i.charAt(t>>2),s+=i.charAt((3&t)<<4),s+="==";break}if(n=e.charCodeAt(o++),o===a){s+=i.charAt(t>>2),s+=i.charAt((3&t)<<4|(240&n)>>4),s+=i.charAt((15&n)<<2),s+="=";break}r=e.charCodeAt(o++),s+=i.charAt(t>>2),s+=i.charAt((3&t)<<4|(240&n)>>4),s+=i.charAt((15&n)<<2|(192&r)>>6),s+=i.charAt(63&r)}return s},exports.decode=function(e){for(var t,n,r,i,o=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1),a=0,s=e.length,c="";a<s;){do{t=o[255&e.charCodeAt(a++)]}while(a<s&&-1===t);if(-1===t)break;do{n=o[255&e.charCodeAt(a++)]}while(a<s&&-1===n);if(-1===n)break;c+=String.fromCharCode(t<<2|(48&n)>>4);do{if(61===(r=255&e.charCodeAt(a++)))return c;r=o[r]}while(a<s&&-1===r);if(-1===r)break;c+=String.fromCharCode((15&n)<<4|(60&r)>>2);do{if(61===(i=255&e.charCodeAt(a++)))return c;i=o[i]}while(a<s&&-1===i);if(-1===i)break;c+=String.fromCharCode((3&r)<<6|i)}return c}},{}],41:[function(require,module,exports){"use strict";function e(e){for(var t,n=u?"0123456789ABCDEF":"0123456789abcdef",r="",i=0;i<e.length;i++)t=e.charCodeAt(i),r+=n.charAt(t>>>4&15)+n.charAt(15&t);return r}function t(e){for(var t="",n=0;n<32*e.length;n+=8)t+=String.fromCharCode(e[n>>5]>>>24-n%32&255);return t}function n(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function r(e,t){return e<<t|e>>>32-t}function i(e,t,n,r){return e<20?t&n|~t&r:e<40?t^n^r:e<60?t&n|t&r|n&r:t^n^r}function o(e){return e<20?1518500249:e<40?1859775393:e<60?-1894007588:-899497514}function a(e,t){e[t>>5]|=128<<24-t%32,e[15+(t+64>>9<<4)]=t;for(var a=Array(80),s=1732584193,c=-271733879,u=-1732584194,l=271733878,f=-1009589776,p=0;p<e.length;p+=16){for(var h=s,d=c,m=u,v=l,y=f,b=0;b<80;b++){a[b]=b<16?e[p+b]:r(a[b-3]^a[b-8]^a[b-14]^a[b-16],1);var g=n(n(r(s,5),i(b,c,u,l)),n(n(f,a[b]),o(b)));f=l,l=u,u=r(c,30),c=s,s=g}s=n(s,h),c=n(c,d),u=n(u,m),l=n(l,v),f=n(f,y)}return Array(s,c,u,l,f)}function s(e){for(var t=Array(e.length>>2),n=0;n<t.length;n++)t[n]=0;for(var n=0;n<8*e.length;n+=8)t[n>>5]|=(255&e.charCodeAt(n/8))<<24-n%32;return t}function c(e){return t(a(s(e),8*e.length))}var u=0;require("./base64");module.exports={safe_add:n,rstr2hex:e,rstr2binb:s,binb2rstr:t,rstrexports:c}},{"./base64":40}],42:[function(require,module,exports){"use strict";module.exports={uid:require("./uid"),base64:require("./base64"),md5:require("./md5"),utf8:require("./utf8"),sha256:require("./sha256")}},{"./base64":40,"./md5":43,"./sha256":44,"./uid":45,"./utf8":46}],43:[function(require,module,exports){"use strict";var e=require("./utf8"),t=require("./commLib"),n=e.encode;module.exports=function(e){return t.rstr2hex(t.rstrexports(n(e)))}},{"./commLib":41,"./utf8":46}],44:[function(require,module,exports){function e(e){return a.binb2rstr(r(a.rstr2binb(e),8*e.length))}function t(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n="",r=e.length,i=0;i<r;i+=3)for(var a=e.charCodeAt(i)<<16|(i+1<r?e.charCodeAt(i+1)<<8:0)|(i+2<r?e.charCodeAt(i+2):0),s=0;s<4;s++)8*i+6*s>8*e.length?n+=o:n+=t.charAt(a>>>6*(3-s)&63);return n}function n(e){for(var t,n,r="",i=-1;++i<e.length;)t=e.charCodeAt(i),n=i+1<e.length?e.charCodeAt(i+1):0,55296<=t&&t<=56319&&56320<=n&&n<=57343&&(t=65536+((1023&t)<<10)+(1023&n),i++),t<=127?r+=String.fromCharCode(t):t<=2047?r+=String.fromCharCode(192|t>>>6&31,128|63&t):t<=65535?r+=String.fromCharCode(224|t>>>12&15,128|t>>>6&63,128|63&t):t<=2097151&&(r+=String.fromCharCode(240|t>>>18&7,128|t>>>12&63,128|t>>>6&63,128|63&t));return r}function r(e,t){var n,r,i,o,a,c,u,y,b,g,x,w,S=new Array(1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225),E=new Array(64);for(e[t>>5]|=128<<24-t%32,e[15+(t+64>>9<<4)]=t,b=0;b<e.length;b+=16){for(n=S[0],r=S[1],i=S[2],o=S[3],a=S[4],c=S[5],u=S[6],y=S[7],g=0;g<64;g++)E[g]=g<16?e[g+b]:s(s(s(m(E[g-2]),E[g-7]),d(E[g-15])),E[g-16]),x=s(s(s(s(y,h(a)),l(a,c,u)),v[g]),E[g]),w=s(p(n),f(n,r,i)),y=u,u=c,c=a,a=s(o,x),o=i,i=r,r=n,n=s(x,w);S[0]=s(n,S[0]),S[1]=s(r,S[1]),S[2]=s(i,S[2]),S[3]=s(o,S[3]),S[4]=s(a,S[4]),S[5]=s(c,S[5]),S[6]=s(u,S[6]),S[7]=s(y,S[7])}return S}function i(t){return a.rstr2hex(e(n(t)))}var o="=",a=require("./commLib"),s=a.safe_add,c=function(e,t){return e>>>t|e<<32-t},u=function(e,t){return e>>>t},l=function(e,t,n){return e&t^~e&n},f=function(e,t,n){return e&t^e&n^t&n},p=function(e){return c(e,2)^c(e,13)^c(e,22)},h=function(e){return c(e,6)^c(e,11)^c(e,25)},d=function(e){return c(e,7)^c(e,18)^u(e,3)},m=function(e){return c(e,17)^c(e,19)^u(e,10)},v=new Array(1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998);i.base64=function(r){return t(e(n(r)))},module.exports=i},{"./commLib":41}],45:[function(require,module,exports){module.exports=function(){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return e()+e()+e()+e()+e()+e()+e()+e()}},{}],46:[function(require,module,exports){exports.encode=function(e){for(var t,n,r="",i=-1;++i<e.length;)t=e.charCodeAt(i),n=i+1<e.length?e.charCodeAt(i+1):0,55296<=t&&t<=56319&&56320<=n&&n<=57343&&(t=65536+((1023&t)<<10)+(1023&n),i++),t<=127?r+=String.fromCharCode(t):t<=2047?r+=String.fromCharCode(192|t>>>6&31,128|63&t):t<=65535?r+=String.fromCharCode(224|t>>>12&15,128|t>>>6&63,128|63&t):t<=2097151&&(r+=String.fromCharCode(240|t>>>18&7,128|t>>>12&63,128|t>>>6&63,128|63&t));return r}},{}],47:[function(require,module,exports){"use strict";module.exports={observer:require("./observer"),buffer:require("./buffer"),date:require("./date"),encrypt:require("./encrypt/exports"),json:require("./json"),path:require("./path"),url:require("./url"),object:require("./object"),string:require("./string"),type:require("./type"),net:require("./net/exports"),platform:require("./platform")}},{"./buffer":38,"./date":39,"./encrypt/exports":42,"./json":48,"./net/exports":50,"./object":52,"./observer":53,"./path":54,"./platform":55,"./string":56,"./type":57,"./url":58}],48:[function(require,module,exports){"use strict";exports.stringify=function(e){var t=[];for(var n in e)e[n]="string"==typeof e[n]?'"'+e[n].replace(/"/g,'\\"')+'"':"object"==typeof e[n]?stringify(e[n]):e[n],t.push(n+":"+e[n]);return"{"+t.join(",")+"}"},exports.parse=function(e){if("object"==typeof e)return e;try{var t=new Function("return "+e)()}catch(t){return e}return t}},{}],49:[function(require,module,exports){function e(e){e.async=void 0===e.async||!!e.async,e.type=new RegExp(e.type,"ig").exec("GET,DELETE,POST,PUT,HEAD,FORM").toString()||"GET";var r={responseType:"text"},i=e.url,o=e.data;if("file:"===t.protocol(e.url)&&window.cordova&&cordova.file)return"function"==typeof e.preset&&e.preset(r),window.resolveLocalFileSystemURL(cordova.file.applicationDirectory,function(e){},function(){}),void window.resolveLocalFileSystemURL(e.url,function(t){t.file(function(t){var n=new FileReader;r.status=200,n.onloadend=function(t){"function"==typeof e.success&&e.success.call(r,this.result),"function"==typeof e.complete&&e.complete.call(r,this.result,!0)},"arraybuffer"===r.responseType?n.readAsArrayBuffer(t):n.readAsText(t)})},function(){r.status=500,"function"==typeof e.error&&e.error.call(r,null),"function"==typeof e.complete&&e.complete.call(r,null)});switch(r=new XMLHttpRequest,r.onreadystatechange=function(){if("function"==typeof e.beforeSend&&e.beforeSend.call(r,e),4===r.readyState){var t;if(200===r.status){switch(e.dataType||"json"){case"html":t=r.responseText;break;case"xml":t=r.responseXML;break;case"json":t=n.parse(r.responseText);break;default:t=r.response||r.responseText}"function"==typeof e.success&&e.success.call(r,t)}else"function"==typeof e.error&&e.error.call(r,r);"function"==typeof e.complete&&e.complete.call(r,t||r,void 0!==t)}},e.type){case"POST":break;case"GET":i=t.computedUrl(i,e.data)}r.open(e.type,i,e.async);var a=e.uploadprogress||e.uploadProgress;switch("function"==typeof a&&(r.upload.onprogress=a),"function"==typeof e.progress&&(r.onprogress=e.progress),e.type){case"POST":break;case"FORM":r.setRequestHeader("Content-type","application/x-www-form-urlencoded;charset=utf-8")}"function"==typeof e.preset&&e.preset(r),void 0===e.cache||e.cache||(r.setRequestHeader("Cache-Control","no-cache"),r.setRequestHeader("If-Modified-Since","0")),Object.keys(e.header||{}).forEach(function(t){r.setRequestHeader(t,e.header[t])}),r.send(o)}var t=require("../url"),n=require("../json");module.exports=e},{"../json":48,"../url":58}],50:[function(require,module,exports){"use strict";module.exports={ajax:require("./ajax"),jsonp:require("./jsonp")}},{"./ajax":49,"./jsonp":51}],51:[function(require,module,exports){"use strict";function e(e){var t=e.jsonpCallback,n=!1,r=l.cloneNode(),i=function(){--a[t].sum,a[t].sum<1&&(void 0===a[t].windowCallback?delete window[t]:window[t]=a[t].windowCallback,delete a[t]),e.element||f.removeChild(r);var n={dom:this,option:e,many:s};n.state=!!c,e.complete.apply(n,c)};r.src=e.url,a[t]?++a[t].sum:a[t]={windowCallback:window[t],sum:1},window[t]=function(){c?(!s&&(c=[c],s=!0),c.push([].slice.call(arguments))):c=[].slice.call(arguments)},e.init.call(r,window[t]),r.onload=r.onreadystatechange=function(){n||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(i(),n=!0,this.onload=this.onreadystatechange=null,e.success.apply({dom:this,option:e,many:s},c),c=null,s=!1)},r.onerror=function(){i(),e.error.apply({dom:this,option:e})},f.appendChild(r)}function t(e,t){return Object.keys(t).forEach(function(n){void 0===e[n]&&(e[n]=t[n])}),e}function n(n){switch(t(n,p),n.url=r.computedUrl(i.resolve(n.url),n.data),n.type){case"js":var o={};n.jsonpParameter&&(o[n.callbackName]=n.jsonpCallback,n.url=r.computedUrl(n.url,o)),e(n)}}var r=require("../url"),i=require("../path"),o=function(){},a={},s=!1,c=null,u=window.document.createElement("link"),l=window.document.createElement("script"),f=window.document.getElementsByTagName("head")[0]||window.document.documentElement;u.rel="stylesheet",u.type="text/css",l.type="text/javascript",l.async="async",l.charset="utf-8";var p={data:{},url:"",type:"js",init:o,error:o,success:o,complete:o,callbackName:"callback",jsonpCallback:"callback",element:!0,jsonpParameter:!0};module.exports=n},{"../path":54,"../url":58}],52:[function(require,module,exports){"use strict";function e(e,t){Object.defineProperty(e,t,{writable:!0,enumerable:!1,configurable:!0})}function t(){var e=-1,t=arguments,n=t.length;if(n<2)return t[0];for(;++e<n;)0!==e&&arguments[e]&&Object.keys(t[e]).forEach(function(n){t[0][n]=t[e][n]});return t[0]}function n(e,t){var n,r=e,i={}.toString;if(t||(t={},n=1),!e||"object"!=typeof e)return e;if(e.nodeType&&"cloneNode"in e)return e.cloneNode(!0);if("[object Date]"===i.call(e))return new Date(e.getTime());if("[object RegExp]"===i.call(e)){var o=[];return e.global&&o.push("g"),e.multiline&&o.push("m"),e.ignoreCase&&o.push("i"),new RegExp(e.source,o.join(""))}if("object"==typeof e&&null!==e){r=e instanceof Array?[]:{};Object.keys(e).forEach(function(n){t[n]&&-1!==t[n].in(e[n])&&"object"==typeof e[n]&&null!==e[n]||((t[n]=t[n]||[]).push(e[n]),r[n]=_clone(e[n],t))})}return n&&(t=null),r}function r(){if(arguments.length<2)return!1;for(var e,t=-1,n=arguments,i=n.length;++t<i;)0!==t&&(0,e=n[t],Object.keys(e).forEach(function(t){if(e.hasOwnProperty(t)){var n=arguments[0][t],i=e[t];(n instanceof Array||n instanceof Object)&&(i instanceof Array||i instanceof Object)?r.call(this,arguments[0][t],e[t]):arguments[0][t]=e[t]}}));return arguments[0]}function i(){var e={};return[].slice.call(arguments).forEach(function(t){Object.keys(t).forEach(function(r){e[r]=n(t[r])})}),e}function o(e,t){return Object.keys(t).forEach(function(n){void 0===e[n]&&(e[n]=t[n])}),e}function a(e){return[].slice.call(e)}function s(e,t){return!e.hasOwnProperty(t)&&t in e}function c(e,t){if(arguments.length<2)return arguments[0];if(e=e.match(/^[\w+\.]+$/g)){e=e[0].replace(/\[([\S]+)\]/g,function(e,t){return"."+t});for(var n=e.split("."),r=-1,i=n.length;++r<i;)if(void 0===(t=t[n[r]]))return console.log(n[r]+"属性不存在！"),null;return t}return console.log("取值方法有误！"),!1}function u(e,t,n){if(arguments.length<2)return arguments[0];if(!(e=e.match(/^[\w+\.]+$/g)))return console.log("取值方法有误！"),!1;e=e[0].replace(/\[([\S]+)\]/g,function(e,t){return"."+t});for(var r=e.split("."),i=-1,o=r.length;++i<o;){if(i+1===o)return t[r[i]]=n,n;if(void 0===(t=t[r[i]]))return console.log(r[i]+"属性不存在！"),null}}function l(e,t,n){return function e(t,r,i){if(!i)return r?(t[r]=n,!0):n;var o;i=i.replace(/^\[([^.\]]+)\]|^\.?([^.\[\]]+)/,function(e,t,n){return o=(t||n).match(/^(['"]?)([\s\S]+)\1$/).pop(),""}),"object"==typeof t[r]&&null!==t[r]||r&&(t[r]={}),e(r?t[r]:t,o,i)}(e,"",t),e}function f(e,t){return function e(t,n){if(!n)return t;var r;return n=n.replace(/^\[([^.\]]+)\]|^\.?([^.\[\]]+)/,function(e,t,n){return r=(t||n).match(/^(['"]?)([\s\S]+)\1$/).pop(),""}),t||(t={}),e(t[r],n)}(e,t)}Object.prototype.forEach=function(e){var t=this;e="function"==typeof e?e:new Function,Object.keys(this).forEach(function(n){e(t[n],n)}),e=null},Object.prototype.deepClone=function(){return n(this)},Object.prototype.deepExtend=function(){return r(arguments)},Object.prototype.extend=function(){return t(arguments),this},Object.prototype.setAttr=function(e,t){return l(this,e,t)},Object.prototype.getAttr=function(e){return f(this,e)},e(Object.prototype,"forEach"),e(Object.prototype,"extend"),e(Object.prototype,"deepClone"),e(Object.prototype,"deepExtend"),e(Object.prototype,"setAttr"),e(Object.prototype,"getAttr"),module.exports={extend:t,deepClone:n,deepExtend:r,concatClone:i,merge:o,toArray:a,hasPrototypeProperty:s,parseStringData:c,setStringData:u,write:l,get:f}},{}],53:[function(require,module,exports){!function(e,exports){"object"==typeof module&&"object"==typeof module.exports?module.exports=e:"function"==typeof define&&define.amd?define(function(require,exports,module){module.exports=e}):exports.observer=e}(function(){"use strict";function e(){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return e()+e()+e()+e()+e()+e()+e()+e()}function t(e,n){var r;return e=(String(e)||"").replace(/^\[([^.\]]+)\]|^\.?([^.\[\]]+)/,function(e,t,n){return r=(t||n).match(/^(['"]?)([\s\S]+)\1$/).pop(),""}),n(r,e)&&(e||r)&&t(e,n)}function n(e,n){if("object"==typeof e&&null!==e){var r=arguments,i=3===arguments.length;return t(n,function(t,n){if(n)return e=e[t];r=i?e[t]=r[2]:t?e[t]:e}),r}}function r(e){return{}.toString.call(e).match(/object\s+(\w*)/)[1]}function i(e,t){for(t=t.__proto__,e=e.__proto__;;){if(null===e)return!1;if(t===e)return!0;e=e.__proto__}}function o(e,t){if(r(e)!==r(t))return!1;switch(r(e)){case"Object":if(!i(e,t))return!1;case"Array":return Object.keys(e).sort().toString()===Object.keys(t).sort().toString();case"Date":return String(e)===String(t);default:return e===t}}function a(e){return e.parent&&1!==!Object.keys(e.parent.child).length?a(e.parent):e}function s(e,t){this.count=1,this.child={},this.listens=[],this.listensRead=[],e instanceof s?(this.parent=e,t&&(this.nowKey=t,this.parentData=e.targetData,this.targetData=(this.parentData||{})[t],this.isData=void 0!==this.targetData)):(this.targetData=e,this.isData=void 0!==e),this.listen()}function c(e){this.listen=new s(e)}function u(t){if(t instanceof u)return t;f[this.sourceId=e()]=new c(t)}function l(t){if(t instanceof l||t instanceof u)return t;t=t.reverse(),f[this.sourceId=e()]={resource:t,ob:t.reduce(function(e,t){return e.push(new u(t)),e},[])}}s.prototype.diff=function(e){var t=this.targetData,n=this.parentData,r=e&&"object"==typeof e?e[this.nowKey]:void 0;if(!o(t,r)){if(!this.parent)return;this.parentData=this.parent.targetData,this.targetData=r,n!==this.parentData&&console.log("预留-----功能需优化!父数据变化更新子级数据重新绑定"),this.berforDefineProperty&&this.berforDefineProperty.hasOwnProperty("set")&&this.berforDefineProperty.set(r,this),this.isData=!0,this.topListen&&n!==this.parentData&&Object.getOwnPropertyDescriptor(n,this.nowKey)&&Object.getOwnPropertyDescriptor(n,this.nowKey).set!==this.prevDefineProperty.set?this.topListen.berforDefineProperty=this.prevDefineProperty:n!==this.parentData&&n&&this.prevDefineProperty&&Object.defineProperty(n,this.nowKey,this.prevDefineProperty),this.listens.forEach(function(e){e(r,t)}),this.listensRead.forEach(function(e){e(r,t)}),this.listensRead=[],this.listen(!(e&&e.hasOwnProperty(this.nowKey)))}Object.keys(this.child).forEach(function(e){this.child[e].diff(r)}.bind(this))},s.prototype.listen=function(e){var t=this;this.parentData&&"object"==typeof this.parentData&&(this.prevDefineProperty=Object.getOwnPropertyDescriptor(this.parentData,this.nowKey)||{configurable:!0,enumerable:!0,value:void 0,writable:!0},this.berforDefineProperty||(this.berforDefineProperty=this.prevDefineProperty),this.berforDefineProperty&&this.berforDefineProperty.hasOwnProperty("set")&&this.berforDefineProperty.get(this),Object.defineProperty(this.parentData,this.nowKey,this.nowDefineProperty={enumerable:!0,configurable:!0,set:function(e,n){var r={};r[t.nowKey]=e,t.diff(r),n&&(t.topListen=n)},get:function(e){switch(!0){case e instanceof s:e&&(t.topListen=e),e.count=t.count+1;break;case"this"===e:return t}return t.targetData}}),this.isDelete=!1,!0===e&&(this.isDelete=!0,delete this.parentData[this.nowKey]))},s.prototype.set=function(e){this.targetData=e},s.prototype.get=function(){return this.targetData},s.prototype.add=function(e){-1!==this.listens.indexOf(e)||this.listens.push(e)},s.prototype.addRead=function(e){-1!==this.listensRead.indexOf(e)||this.listensRead.push(e)},s.prototype.remove=function(e){if("function"==typeof e){return-1!==this.listens.indexOf(e)&&this.listens.splice(this.listens.indexOf(e),1)[0]}this.listens=[],this.listens.length||Object.keys(this.child).length||a(this).destroy()},s.prototype.removeRead=function(e){if("function"==typeof e){
return-1!==this.listensRead.indexOf(e)&&this.listensRead.splice(this.listens.indexOf(e),1)[0]}this.listensRead=[]},s.prototype.addChild=function(e,t){return this.child[e]=t},s.prototype.getChild=function(e){return e?this.child[e]:this.child},s.prototype.removeChild=function(e){var t=this.child[e];return delete this.child[e]&&t},s.prototype.destroy=function(){var e=this;this.parentData&&"object"==typeof this.parentData&&(this.berforDefineProperty.hasOwnProperty("value")&&(this.berforDefineProperty.value=this.targetData),this.topListen&&this.topListen.listens||this.isDelete||Object.defineProperty(this.parentData,this.nowKey,this.berforDefineProperty)),this.topListen&&(this.topListen.berforDefineProperty=this.berforDefineProperty),this.berforDefineProperty&&this.berforDefineProperty.hasOwnProperty("set")&&this.berforDefineProperty.get(this),!this.isData&&this.parentData&&delete this.parentData[this.nowKey],this.child&&Object.keys(this.child).forEach(function(t){e.child[t].destroy()}),Object.keys(this).forEach(function(t){delete e[t]})},c.prototype.set=function(e,t){return n(this.listen.targetData,e,t)},c.prototype.get=function(e){return n(this.listen.targetData,e)},c.prototype.read=function(e,n){var r,i=this.listen,o=i.targetData;return"function"!=typeof n&&(n=e,e=""),t(e,function(e,t){if(e){var a=(o||{})[e];i=i.getChild(e)||i.addChild(e,new s(i,e)),o=a}return e&&t||(r=i.targetData,i.isData?n(r):i.addRead(n)),t}),r},c.prototype.addListen=function(e,n){var r=this.listen,i=r.targetData;"function"!=typeof n&&(n=e,e=""),t(e,function(e,t){if(e){var o=(i||{})[e];r=r.getChild(e)||r.addChild(e,new s(r,e)),i=o}return e&&t||r.add(n),t})},c.prototype.readWatch=function(e,n){var r,i=this.listen,o=i.targetData;return"function"!=typeof n&&(n=e,e=""),t(e,function(e,t){if(e){var a=(o||{})[e];i=i.getChild(e)||i.addChild(e,new s(i,e)),o=a}return e&&t||(i.add(n),r=i.targetData,i.isData&&n(r)),t}),r},c.prototype.removeListen=function(e,n){var r=this.listen;t(e,function(e,t){return e&&(r=r.getChild(e)),e&&t||r&&r.remove(n),t})},c.prototype.removeRead=function(e,n){var r=this.listen;t(e,function(e,t){return e&&(r=r.getChild(e)),e&&t||r&&r.removeRead(n),t})},c.prototype.destroy=function(){this.listen.destroy(),Object.keys(this).forEach(function(e){delete this[e]}.bind(this))};var f={};return u.prototype.read=function(e,t){return f[this.sourceId].read(e,t)},u.prototype.watch=function(e,t){"function"!=typeof t&&(t=e,e=""),f[this.sourceId].addListen(e,t)},u.prototype.readWatch=function(e,t){return f[this.sourceId].readWatch(e,t)},u.prototype.unWatch=function(e,t){"function"!=typeof t&&"function"==typeof e&&(t=e,e=""),f[this.sourceId].removeListen(e,t)},u.prototype.unRead=function(e,t){f[this.sourceId].removeRead(e,t)},u.prototype.get=function(e){return e="string"==typeof e?e:"",f[this.sourceId].get(e)},u.prototype.write=function(e,t){return 1===arguments.length&&(t=e,e=""),f[this.sourceId].set(e,t)},u.prototype.destroy=function(){f[this.sourceId].destroy(),delete f[this.sourceId],Object.keys(this).forEach(function(e){delete this[e]}.bind(this))},u.prototype.isObserver=!0,Object.defineProperty(u.prototype,"isObserver",{writable:!1,configurable:!1,enumerable:!1}),l.prototype.read=function(e,t){function n(){i.ob.forEach(function(t){t.unRead(e)})}var r,i=f[this.sourceId];i.ob.forEach(function(i){i.read(e,function(e){r=e,n(),t.call(this,e)})})},l.prototype.watch=function(e,t){f[this.sourceId].ob.forEach(function(n){n.watch(e,t)})},l.prototype.readWatch=function(e,t){function n(t){for(var n;i.length>t;)n=i[t],i.pop(),n.unRead(e),n.unWatch(e)}var r,i=[];f[this.sourceId].ob.forEach(function(o,a){r||(i.push(o),o.readWatch(e,function(e){t.call(this,e),r||(n(a+1),r=!0)}))})},l.prototype.unWatch=function(e,t){f[this.sourceId].ob.forEach(function(n){n.unWatch(e,t)})},l.prototype.get=function(e){for(var t,n=-1,r=f[this.sourceId],i=r.ob.length;++n<i;)if(t=r.ob[n].get(e))return t},l.prototype.destroy=function(){var e=this;f[this.sourceId].ob.forEach(function(e){e.destroy()}),Object.keys(this).forEach(function(t){delete e[t]}),delete f[this.sourceId]},function(e,t){return!0===t&&e instanceof Array?new l(e):new u(e)}}(),this)},{}],54:[function(require,module,exports){"use strict";function e(e){return e.match(/[^?#]*\//)[0]}function t(e){for(e=e.replace(/\\/g,"/").replace(/\/\.\//g,"/"),e=e.replace(/([^:\/])\/+\//g,"$1/");e.match(c);)e=e.replace(c,"/");return e}function n(r,i){r=r.replace(/\\/g,"/");var o,a,c=r.match(/^(\w+:)?\/\/(\w[\w\.]*(:\d+)?)/);return c&&(a=c[1],o=c[2]),i?c?a||(r=s.protocol(i)+o):"/"===r.charAt(0)?r=s.domain(i)+r:(i=n(i),r=e(i)+r):c?a||(r=window.location.protocol+o):r="/"===r.charAt(0)?s.domain()+r:e(window.location.href)+r,t(r)}function r(e){var t=e.match(/^[\S]+\/([^\s\/]+)$/);return t?t[1]:""}function i(e){var t=e.match(/^[\S]+\/([^\s\.\/]+)[^\s\/]*$/);return t?t[1]:""}function o(e){var t=e.match(/\.[^\.\/]*$/);return t?t[0]:""}function a(e){var t=e.match(/[^?#]*\/[^\.\/]*/);return t?t[0]:""}var s=require("./url"),c=/\/[^\/]+\/\.\.\//,u=location.href&&0!==location.href.indexOf("about:")?e(location.href):"";module.exports={cwd:u,dirname:e,normalize:t,resolve:n,fileName:r,file:i,suffix:o,noSuffix:a}},{"./url":58}],55:[function(require,module,exports){(function(e){"use strict";function t(e){return e=String(e),e.charAt(0).toUpperCase()+e.slice(1)}function n(e,t,n){var r={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return t&&n&&/^Win/i.test(e)&&!/^Windows Phone /i.test(e)&&(r=r[/[\d.]+$/.exec(e)])&&(e="Windows "+r),e=String(e),t&&n&&(e=e.replace(RegExp(t,"i"),n)),e=i(e.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}function r(e,t){var n=-1,r=e?e.length:0;if("number"==typeof r&&r>-1&&r<=b)for(;++n<r;)t(e[n],n,e);else o(e,t)}function i(e){return e=l(e),/^(?:webOS|i(?:OS|P))/.test(e)?e:t(e)}function o(e,t){for(var n in e)S.call(e,n)&&t(e[n],n,e)}function a(e){return null==e?t(e):E.call(e).slice(8,-1)}function s(e,t){var n=null!=e?typeof e[t]:"number";return!(/^(?:boolean|number|string|undefined)$/.test(n)||"object"==n&&!e[t])}function c(e){return String(e).replace(/([ -])(?!$)/g,"$1?")}function u(e,t){var n=null;return r(e,function(r,i){n=t(n,r,i,e)}),n}function l(e){return String(e).replace(/^ +| +$/g,"")}function f(e){function t(t){return u(t,function(t,n){var r=n.pattern||c(n);return!t&&(t=RegExp("\\b"+r+" *\\d+[.\\w_]*","i").exec(e)||RegExp("\\b"+r+" *\\w+-[\\w]*","i").exec(e)||RegExp("\\b"+r+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(e))&&((t=String(n.label&&!RegExp(r,"i").test(n.label)?n.label:t).split("/"))[1]&&!/[\d.]+/.test(t[0])&&(t[0]+=" "+t[1]),n=n.label||n,t=i(t[0].replace(RegExp(r,"i"),n).replace(RegExp("; *(?:"+n+"[_-])?","i")," ").replace(RegExp("("+n+")[-_.]?(\\w)","i"),"$1 $2"))),t})}function r(){return this.description||""}var p=h,m=e&&"object"==typeof e&&"String"!=a(e);m&&(p=e,e=null);var v=p.navigator||{},y=v.userAgent||"";e||(e=y);var b,w=m||x==d,S=m?!!v.likeChrome:/\bChrome\b/.test(e)&&!/internal|\n/i.test(E.toString()),k=m?"Object":"ScriptBridgingProxyObject",C=m?"Object":"Environment",O=m&&p.java?"JavaPackage":a(p.java),j=m?"Object":"RuntimeObject",A=/\bJava/.test(O)&&p.java,D=A&&a(p.environment)==C,P=A?"a":"α",R=A?"b":"β",M=p.document||{},L=p.operamini||p.opera;b=g.test(b=m&&L?L["[[Class]]"]:a(L))?b:L=null;var _,T,I=e,N=[],B=null,F=e==y,W=F&&L&&"function"==typeof L.version&&L.version(),U=function(t){return u(t,function(t,n){return t||RegExp("\\b"+(n.pattern||c(n))+"\\b","i").exec(e)&&(n.label||n)})}([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"]),V=function(t){return u(t,function(t,n){return t||RegExp("\\b"+(n.pattern||c(n))+"\\b","i").exec(e)&&(n.label||n)})}(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"Edge"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Waterfox","WebPositive","Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),K=t([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),q=function(t){return u(t,function(t,n,r){return t||(n[K]||n[/^[a-z]+(?: +[a-z]+\b)*/i.exec(K)]||RegExp("\\b"+c(r)+"(?:\\b|\\w*\\d)","i").exec(e))&&r})}({Apple:{iPad:1,iPhone:1,iPod:1},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1}}),G=function(t){return u(t,function(t,r){var i=r.pattern||c(r);return!t&&(t=RegExp("\\b"+i+"(?:/[\\d.]+|[ \\w.]*)","i").exec(e))&&(t=n(t,i,r.label||r)),t})}(["Windows Phone","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);if(U&&(U=[U]),q&&!K&&(K=t([q])),(_=/\bGoogle TV\b/.exec(K))&&(K=_[0]),/\bSimulator\b/i.test(e)&&(K=(K?K+" ":"")+"Simulator"),"Opera Mini"==V&&/\bOPiOS\b/.test(e)&&N.push("running in Turbo/Uncompressed mode"),"IE"==V&&/\blike iPhone OS\b/.test(e)?(_=f(e.replace(/like iPhone OS/,"")),q=_.manufacturer,K=_.product):/^iP/.test(K)?(V||(V="Safari"),G="iOS"+((_=/ OS ([\d_]+)/i.exec(e))?" "+_[1].replace(/_/g,"."):"")):"Konqueror"!=V||/buntu/i.test(G)?q&&"Google"!=q&&(/Chrome/.test(V)&&!/\bMobile Safari\b/i.test(e)||/\bVita\b/.test(K))||/\bAndroid\b/.test(G)&&/^Chrome/.test(V)&&/\bVersion\//i.test(e)?(V="Android Browser",G=/\bAndroid\b/.test(G)?G:"Android"):"Silk"==V?(/\bMobi/i.test(e)||(G="Android",N.unshift("desktop mode")),/Accelerated *= *true/i.test(e)&&N.unshift("accelerated")):"PaleMoon"==V&&(_=/\bFirefox\/([\d.]+)\b/.exec(e))?N.push("identifying as Firefox "+_[1]):"Firefox"==V&&(_=/\b(Mobile|Tablet|TV)\b/i.exec(e))?(G||(G="Firefox OS"),K||(K=_[1])):!V||(_=!/\bMinefield\b/i.test(e)&&/\b(?:Firefox|Safari)\b/.exec(V))?(V&&!K&&/[\/,]|^[^(]+?\)/.test(e.slice(e.indexOf(_+"/")+8))&&(V=null),(_=K||q||G)&&(K||q||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(G))&&(V=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(G)?G:_)+" Browser")):"Electron"==V&&(_=(/\bChrome\/([\d.]+)\b/.exec(e)||0)[1])&&N.push("Chromium "+_):G="Kubuntu",W||(W=function(t){return u(t,function(t,n){return t||(RegExp(n+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(e)||0)[1]||null})}(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$))","Version",c(V),"(?:Firefox|Minefield|NetFront)"])),(_="iCab"==U&&parseFloat(W)>3&&"WebKit"||/\bOpera\b/.test(V)&&(/\bOPR\b/.test(e)?"Blink":"Presto")||/\b(?:Midori|Nook|Safari)\b/i.test(e)&&!/^(?:Trident|EdgeHTML)$/.test(U)&&"WebKit"||!U&&/\bMSIE\b/i.test(e)&&("Mac OS"==G?"Tasman":"Trident")||"WebKit"==U&&/\bPlayStation\b(?! Vita\b)/i.test(V)&&"NetFront")&&(U=[_]),"IE"==V&&(_=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(e)||0)[1])?(V+=" Mobile",G="Windows Phone "+(/\+$/.test(_)?_:_+".x"),N.unshift("desktop mode")):/\bWPDesktop\b/i.test(e)?(V="IE Mobile",G="Windows Phone 8.x",N.unshift("desktop mode"),W||(W=(/\brv:([\d.]+)/.exec(e)||0)[1])):"IE"!=V&&"Trident"==U&&(_=/\brv:([\d.]+)/.exec(e))&&(V&&N.push("identifying as "+V+(W?" "+W:"")),V="IE",W=_[1]),F){if(s(p,"global"))if(A&&(_=A.lang.System,I=_.getProperty("os.arch"),G=G||_.getProperty("os.name")+" "+_.getProperty("os.version")),w&&s(p,"system")&&(_=[p.system])[0]){G||(G=_[0].os||null);try{_[1]=p.require("ringo/engine").version,W=_[1].join("."),V="RingoJS"}catch(e){_[0].global.system==p.system&&(V="Narwhal")}}else"object"==typeof p.process&&!p.process.browser&&(_=p.process)?"object"==typeof _.versions?"string"==typeof _.versions.electron?(N.push("Node "+_.versions.node),V="Electron",W=_.versions.electron):"string"==typeof _.versions.nw&&(N.push("Chromium "+W,"Node "+_.versions.node),V="NW.js",W=_.versions.nw):(V="Node.js",I=_.arch,G=_.platform,W=/[\d.]+/.exec(_.version)[0]):D&&(V="Rhino");else a(_=p.runtime)==k?(V="Adobe AIR",G=_.flash.system.Capabilities.os):a(_=p.phantom)==j?(V="PhantomJS",W=(_=_.version||null)&&_.major+"."+_.minor+"."+_.patch):"number"==typeof M.documentMode&&(_=/\bTrident\/(\d+)/i.exec(e))?(W=[W,M.documentMode],(_=+_[1]+4)!=W[1]&&(N.push("IE "+W[1]+" mode"),U&&(U[1]=""),W[1]=_),W="IE"==V?String(W[1].toFixed(1)):W[0]):"number"==typeof M.documentMode&&/^(?:Chrome|Firefox)\b/.test(V)&&(N.push("masking as "+V+" "+W),V="IE",W="11.0",U=["Trident"],G="Windows");G=G&&i(G)}if(W&&(_=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(W)||/(?:alpha|beta)(?: ?\d)?/i.exec(e+";"+(F&&v.appMinorVersion))||/\bMinefield\b/i.test(e)&&"a")&&(B=/b/i.test(_)?"beta":"alpha",W=W.replace(RegExp(_+"\\+?$"),"")+("beta"==B?R:P)+(/\d+\+?/.exec(_)||"")),"Fennec"==V||"Firefox"==V&&/\b(?:Android|Firefox OS)\b/.test(G))V="Firefox Mobile";else if("Maxthon"==V&&W)W=W.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(K))"Xbox 360"==K&&(G=null),"Xbox 360"==K&&/\bIEMobile\b/.test(e)&&N.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(V)&&(!V||K||/Browser|Mobi/.test(V))||"Windows CE"!=G&&!/Mobi/i.test(e))if("IE"==V&&F)try{null===p.external&&N.unshift("platform preview")}catch(e){N.unshift("embedded")}else(/\bBlackBerry\b/.test(K)||/\bBB10\b/.test(e))&&(_=(RegExp(K.replace(/ +/g," *")+"/([.\\d]+)","i").exec(e)||0)[1]||W)?(_=[_,/BB10/.test(e)],G=(_[1]?(K=null,q="BlackBerry"):"Device Software")+" "+_[0],W=null):this!=o&&"Wii"!=K&&(F&&L||/Opera/.test(V)&&/\b(?:MSIE|Firefox)\b/i.test(e)||"Firefox"==V&&/\bOS X (?:\d+\.){2,}/.test(G)||"IE"==V&&(G&&!/^Win/.test(G)&&W>5.5||/\bWindows XP\b/.test(G)&&W>8||8==W&&!/\bTrident\b/.test(e)))&&!g.test(_=f.call(o,e.replace(g,"")+";"))&&_.name&&(_="ing as "+_.name+((_=_.version)?" "+_:""),g.test(V)?(/\bIE\b/.test(_)&&"Mac OS"==G&&(G=null),_="identify"+_):(_="mask"+_,V=b?i(b.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(_)&&(G=null),F||(W=null)),U=["Presto"],N.push(_));else V+=" Mobile";(_=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(e)||0)[1])&&(_=[parseFloat(_.replace(/\.(\d)$/,".0$1")),_],"Safari"==V&&"+"==_[1].slice(-1)?(V="WebKit Nightly",B="alpha",W=_[1].slice(0,-1)):W!=_[1]&&W!=(_[2]=(/\bSafari\/([\d.]+\+?)/i.exec(e)||0)[1])||(W=null),_[1]=(/\bChrome\/([\d.]+)/i.exec(e)||0)[1],537.36==_[0]&&537.36==_[2]&&parseFloat(_[1])>=28&&"WebKit"==U&&(U=["Blink"]),F&&(S||_[1])?(U&&(U[1]="like Chrome"),_=_[1]||(_=_[0],_<530?1:_<532?2:_<532.05?3:_<533?4:_<534.03?5:_<534.07?6:_<534.1?7:_<534.13?8:_<534.16?9:_<534.24?10:_<534.3?11:_<535.01?12:_<535.02?"13+":_<535.07?15:_<535.11?16:_<535.19?17:_<536.05?18:_<536.1?19:_<537.01?20:_<537.11?"21+":_<537.13?23:_<537.18?24:_<537.24?25:_<537.36?26:"Blink"!=U?"27":"28")):(U&&(U[1]="like Safari"),_=_[0],_=_<400?1:_<500?2:_<526?3:_<533?4:_<534?"4+":_<535?5:_<537?6:_<538?7:_<601?8:"8"),U&&(U[1]+=" "+(_+="number"==typeof _?".x":/[.+]/.test(_)?"":"+")),"Safari"==V&&(!W||parseInt(W)>45)&&(W=_)),"Opera"==V&&(_=/\bzbov|zvav$/.exec(G))?(V+=" ",N.unshift("desktop mode"),"zvav"==_?(V+="Mini",W=null):V+="Mobile",G=G.replace(RegExp(" *"+_+"$"),"")):"Safari"==V&&/\bChrome\b/.exec(U&&U[1])&&(N.unshift("desktop mode"),V="Chrome Mobile",W=null,/\bOS X\b/.test(G)?(q="Apple",G="iOS 4.3+"):G=null),W&&0==W.indexOf(_=/[\d.]+$/.exec(G))&&e.indexOf("/"+_+"-")>-1&&(G=l(G.replace(_,""))),U&&!/\b(?:Avant|Nook)\b/.test(V)&&(/Browser|Lunascape|Maxthon/.test(V)||"Safari"!=V&&/^iOS/.test(G)&&/\bSafari\b/.test(U[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|Web)/.test(V)&&U[1])&&(_=U[U.length-1])&&N.push(_),N.length&&(N=["("+N.join("; ")+")"]),q&&K&&K.indexOf(q)<0&&N.push("on "+q),K&&N.push((/^on /.test(N[N.length-1])?"":"on ")+K),G&&(_=/ ([\d.+]+)$/.exec(G),T=_&&"/"==G.charAt(G.length-_[0].length-1),G={architecture:32,family:_&&!T?G.replace(_[0],""):G,version:_?_[1]:null,toString:function(){var e=this.version;return this.family+(e&&!T?" "+e:"")+(64==this.architecture?" 64-bit":"")}}),(_=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(I))&&!/\bi686\b/i.test(I)?(G&&(G.architecture=64,G.family=G.family.replace(RegExp(" *"+_),"")),V&&(/\bWOW64\b/i.test(e)||F&&/\w(?:86|32)$/.test(v.cpuClass||v.platform)&&!/\bWin64; x64\b/i.test(e))&&N.unshift("32-bit")):G&&/^OS X/.test(G.family)&&"Chrome"==V&&parseFloat(W)>=39&&(G.architecture=64),e||(e=null);var H={};return H.description=e,H.layout=U&&U[0],H.manufacturer=q,H.name=V,H.prerelease=B,H.product=K,H.ua=e,H.version=V&&W,H.os=G||{architecture:null,family:null,version:null,toString:function(){return"null"}},H.parse=f,H.toString=r,H.version&&N.unshift(W),H.name&&N.unshift(V),G&&V&&(G!=String(G).split(" ")[0]||G!=V.split(" ")[0]&&!K)&&N.push(K?"("+G+")":"on "+G),N.length&&(H.description=N.join(" ")),H}var p={function:!0,object:!0},h=p[typeof window]&&window||this,d=h,m=p[typeof exports]&&exports,v=p[typeof module]&&module&&!module.nodeType&&module,y=m&&v&&"object"==typeof e&&e;!y||y.global!==y&&y.window!==y&&y.self!==y||(h=y);var b=Math.pow(2,53)-1,g=/\bOpera/,x=this,w=Object.prototype,S=w.hasOwnProperty,E=w.toString;module.exports=f()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],56:[function(require,module,exports){"use strict";function e(e){var t="";return 0==e.length?"":(t=e.replace(/&/g,"&amp;"),t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;"),t=t.replace(/ /g,"&nbsp;"),t=t.replace(/\'/g,"&#39;"),t=t.replace(/\"/g,"&quot;"))}function t(e){var t="";return 0==e.length?"":(t=e.replace(/&amp;/g,"&"),t=t.replace(/&lt;/g,"<"),t=t.replace(/&gt;/g,">"),t=t.replace(/&nbsp;/g," "),t=t.replace(/&#39;/g,"'"),t=t.replace(/&quot;/g,'"'))}function n(e){return isString(e)?e.replace(/[A-Z]/g,function(e){return String.fromCharCode(32|e.charCodeAt(0))}):e}function r(e){return isString(e)?e.replace(/[a-z]/g,function(e){return String.fromCharCode(-33&e.charCodeAt(0))}):e}function i(e){return isString(e)?e.toLowerCase():e}function o(e){return isString(e)?e.toUpperCase():e}function a(e){return e.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")}String.prototype.ltrim=function(e){return void 0===e?this.replace(/^\s*/,""):this.substr(0,e.length)===e&&this.substr(e.length)||this},String.prototype.rtrim=function(e){return void 0===e?this.replace(/\s*$/,""):this.substr(-e.length)===e&&this.substr(0,this.length-e.length)||this},String.prototype.trim=function(e){return this.ltrim(e).rtrim(e)},"i"!=="I".toLowerCase()&&(i=n,o=r),module.exports={HTMLEncode:e,HTMLDecode:t,manualLowercase:n,manualUppercase:r,lowercase:i,uppercase:o,escapeToRegexp:a}},{}],57:[function(require,module,exports){function e(e){if(r(e))return"element";var t=typeof e;return"object"==t&&(t={}.toString.call(e).match(/object\s+(\w*)/)[1].toLocaleLowerCase()),t}function t(e){return function(t){return{}.toString.call(t)=="[object "+e+"]"}}function n(e){return void 0!==e}function r(e){return!(!e||!(e.nodeName||e.prop&&e.attr&&e.find))}function i(e){switch(typeof e){case"object":for(var t in e)return!1;return!0;default:return!e}}function o(e){return e&&isNumber(e.length)&&s.test(toString.call(e))}function a(t,r){if(t===r)return!0;if(null===t||null===r)return!1;if(t!==t&&r!==r)return!0;var i,o,s,c=typeof t,u=typeof r;if(c===u&&"object"===c){if(!isArray(t)){if(isDate(t))return!!isDate(r)&&a(t.getTime(),r.getTime());if(isRegExp(t))return!!isRegExp(r)&&t.toString()===r.toString();if(isWindow(t)||isWindow(r)||isArray(r)||isDate(r)||isRegExp(r))return!1;s=Object.create(null);for(o in t)if("$"!==o.charAt(0)&&!isFunction(t[o])){if(!a(t[o],r[o]))return!1;s[o]=!0}for(o in r)if(!(o in s)&&"$"!==o.charAt(0)&&n(r[o])&&!isFunction(r[o]))return!1;return!0}if(!isArray(r))return!1;if((i=t.length)==r.length){for(o=0;o<i;o++)if(!a(t[o],r[o]))return!1;return!0}}if(e(t)===e(r))switch(e(t)){case"function":if(t.toString()!==r.toString())return!1;var o,l={};for(o in t)l[o]=o;for(o in r)l[o]=o;for(o in l)if(!t.propertyIsEnumerable(o)||!r.propertyIsEnumerable(o))return!1;l={};for(o in t.prototype)l[o]=o;for(o in r.prototype)l[o]=o;for(o in l)if(!t.prototype.propertyIsEnumerable(o)||!r.prototype.propertyIsEnumerable(o))return!1;return!0}return!1}var s=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array\]$/;module.exports={isType:t,isObject:function(e){return e instanceof Object},isArray:function(e){return e instanceof Array},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isFunction:function(e){return e instanceof Function},isDate:function(e){return e instanceof Date},isBoolean:function(e){return"boolean"==typeof e},isRegExp:function(e){return e instanceof RegExp},isFile:function(e){return e instanceof File},isFormData:function(e){return e instanceof FormData},isBlob:function(e){return e instanceof Blob},isWindow:function(e){return e instanceof Window},isHTMLDocument:function(e){return e instanceof HTMLDocument},isDefined:n,isElement:r,isEmpty:i,isTypedArray:o,equals:a}},{}],58:[function(require,module,exports){"use strict";function e(e){return"string"==typeof e&&(window.location.hash=encodeURI(e)),window.location.hash.replace(/^#/,"")}function t(e){return"string"==typeof e&&(window.location.href=e),window.location.href}function n(e){return"string"==typeof e&&(e=e.match(/^(\w+:)?\/\/(\w[\w\.]*(:\d+)?)/))?e[2]:window.location.host}function r(e){return"string"==typeof e&&(e=e.match(/^(\w+:)?\/\/(\w[\w\.]*)/))?e[2]:window.location.hostname}function i(e){return"string"==typeof e&&(e=e.match(/^(\w+:)?\/\/(\w[\w\.]*(:\d+)?)/))?(e[1]?e[1]:window.location.protocol)+"//"+e[2]+(e[3]||""):window.location.protocol+"//"+window.location.host}function o(e){return"string"==typeof e&&(e=e.match(/^(\w+:)?\/\/(\w[\w\.]*(:(\d+))?)/))?e[4]||80:window.location.port}function a(e){return"string"==typeof e&&(e=e.match(/^\w+:/))?e[0]:window.location.protocol}function s(e,t){var n,r,i=e.indexOf("#"),o=c(t);return i<0?(r=e,n=""):(r=e.slice(0,i),n=e.slice(i)),(r+=o?r.indexOf("?")<0?"?":"&":"")+o+n}function c(e){var t,n=[];return"object"==typeof e?Object.keys(e).forEach(function(r){t=e[r],"object"==typeof t?Object.keys(t).forEach(function(e){n.push(l(r)+"="+l(t[e]))}):n.push(l(r)+"="+l(t))}):n.push(e),n.join("&")}function u(e,t){var n=e,r={},i=e.indexOf("?")+1,o=e.indexOf("#");if(i){o>i?(e=e.substring(i,o),t&&(n=n.substring(o),(i=n.indexOf("?")+1)&&(e=e+"&"+n.substring(i)))):(t&&o<i||-1===o)&&(e=e.substring(i));for(var a=-1,s=e.split("&"),c=s.length;++a<c;){var u=s[a].split("="),l=decodeURIComponent(u[0]),f=decodeURIComponent(u[1]),p=r[l];switch(typeof p){case"object":r[l].push(f);break;case"string":r[l]=[p,f];break;default:r[l]=f}}}return r}var l=window?window.encodeURIComponent:encodeURIComponent;module.exports={hash:e,url:t,host:n,domain:i,hostName:r,port:o,protocol:a,computedUrl:s,objectToUrl:c,toObject:u}},{}],59:[function(require,module,exports){"use strict";function e(e){console.info(e)}function t(e){console.warn(e)}function n(e){console.error(e)}function r(e){console.dir(e)}function i(e){console.log(e)}function o(e){throw e}module.exports={info:e,warn:t,error:n,trace:r,debug:i,fatal:o}},{}],60:[function(require,module,exports){"use strict";function e(e,a,s){var c=o.system.moduleDefault[a.mode+"Slice"],u=o.system.moduleDirName[a.mode],l={module:"",slice:"",url:"",pathName:"",mode:u,origin:""};if("string"==typeof e){for(var module,f,p,h=-1,d=o.pathList.length;++h<d;)if(p=o.pathList[h],p.regExp.test(e)){e=e.replace(p.regExp,function(e,t){return p.path+"/"+(t||"")});break}f=e.indexOf("@"),-1!==f&&(module=l.module=i.normalize(e.slice(0,f)),e=e.slice(f+1)),e=e.replace(/:([^:]*)$/,function(e,t){return c=t,""}),l.pathName=e,l.slice=c,e=(module?module+"/"+u+"/":"")+e}else e instanceof Object&&(l=e,e=l.url,c=l.slice);a.isAjax?n({type:"get",url:e+"/"+c+(a.suffix||o.tplSuffix),success:function(e){s(e)},error:function(){s(!1)}}):t({url:e+o.system.fileSuffix[a.mode]+".js",jsonpCallback:o.system.fileCallback[a.mode],complete:function(e){if(l.url=this.option.url,this.state){var t=(this.many?[].slice.call(arguments):[[].slice.call(arguments)]).reduce(function(e,t){return e[t[0]]=t.slice(1),e},{});s(t[c],l)}else r.error(a.mode+"文件【"+this.option.url+"】不存在!")}})}var t=require("../lib/net/jsonp"),n=require("../lib/net/ajax"),r=require("../log/log"),i=require("../lib/path"),o=require("../config/lib/commData").appConf;module.exports=e},{"../config/lib/commData":31,"../lib/net/ajax":49,"../lib/net/jsonp":51,"../lib/path":54,"../log/log":59}],61:[function(require,module,exports){function e(e,i,o){for(var module,a,s,c=(e.charAt(0),n.hasPrototypeProperty(r.system.moduleDirName,o)?o:r.system.moduleDirName[o]||o),u=r.system.moduleDefault[o+"Slice"]||"",l={module:"",slice:"",url:"",pathName:"",mode:c,origin:i},f=-1,p=r.pathList.length;++f<p;)if(s=r.pathList[f],s.regExp.test(e)){e=e.replace(s.regExp,function(e,t){return s.path+"/"+(t||"")});break}return a=e.indexOf("@"),-1!==a?(module=0===a?i.module:t.normalize(e.slice(0,a)),e=e.slice(a+1)):module="/"===e.charAt(0)||"."===e.charAt(0)?"":i.module,e=e.replace(/:([^:]*)$/,function(e,t){return u=t,""}),l.module=module,l.pathName=e||i.pathName,l.slice=u,l.url=t.normalize((module?module+"/"+c+"/":"")+l.pathName),l}var t=require("../lib/path"),n=require("../lib/object"),r=require("../config/lib/commData").appConf;module.exports=e},{"../config/lib/commData":31,"../lib/object":52,"../lib/path":54}],62:[function(require,module,exports){"use strict";!function(e,exports){"function"==typeof define&&define.cmd?define(function(){return e}):exports.vf=e()}(function(){return require("./init/index").exec(),{lib:require("./inside/lib/exports"),engin:require("./engine/index"),getConf:require("./inside/config/index").getCoustomConf}},window)},{"./engine/index":1,"./init/index":29,"./inside/config/index":30,"./inside/lib/exports":47}]},{},[62]);