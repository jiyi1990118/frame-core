!function e(t,r,n){function i(o,a){if(!r[o]){if(!t[o]){var c="function"==typeof require&&require;if(!a&&c)return c(o,!0);if(s)return s(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var h=r[o]={exports:{}};t[o][0].call(h.exports,function(e){var r=t[o][1][e];return i(r||e)},h,h.exports,e,t,r,n)}return r[o].exports}for(var s="function"==typeof require&&require,o=0;o<n.length;o++)i(n[o]);return i}({1:[function(require,module,exports){"use strict";var e=require("./view/exports"),t=require("../inside/lib/observer");module.exports={observer:t,viewEngin:e}},{"../inside/lib/observer":9,"./view/exports":2}],2:[function(require,module,exports){"use strict";function e(e,t,r){return s(e)}function t(e){}var r=require("./lib/vdom"),n=require("./lib/syntaxStruct"),i=require("./lib/syntaxHandle"),s=require("./lib/html2vdom"),o=require("./lib/componentManage"),a=require("./lib/directiveManage");exports.vdom=r,exports.html2vdom=s,exports.syntaxStruct=n,exports.syntaxHandle=i,exports.componentMange=o,exports.directiveMange=a,exports.render=e,exports.destroy=t},{"./lib/componentManage":3,"./lib/directiveManage":4,"./lib/html2vdom":5,"./lib/syntaxHandle":6,"./lib/syntaxStruct":7,"./lib/vdom":8}],3:[function(require,module,exports){function e(e,t,r){t.isComponent=!0,this.conf=e,this.vnode=t,this.priority=e.priority||0,this.extraParameter=r,this.watchs={create:[],render:[]},this.$api={scope:{},filter:{},vnode:t,render:function(){},stroage:{}}}var t=require("./syntaxStruct"),r=require("./syntaxHandle"),n={};e.prototype.watchCreate=function(e){e instanceof Function&&this.watchs.create.push(e)},e.prototype.watchRender=function(e){e instanceof Function&&this.watchs.render.push(e)},e.prototype.init=function(){function e(e,t){if(!l[e])return console.warn("组件数据属性 "+e+" 未定义!");t instanceof Function?(t=t.call(this,l[e].value),t.key=t.key||e,f=f.concat(t)):t instanceof Object?(t.key=t.key||e,t.exp=t.exp||l[e].value,f.push(t)):f.push({key:e,exp:l[e].value})}function n(){f.length<=++h&&(i=!0,s.render())}var i,s=this,o=this.$api,a=this.conf,c=this.vnode,u=c.data,h=0,l=u.attrsMap,p=a.props,f=[],d=this.extraParameter;if(a.template||(a.template=c.children),p){if(p instanceof Array?p.forEach(function(t){e(t)}):p instanceof Object&&Object.keys(p).forEach(function(t){e(t,p[t])}),f.length)return f.forEach(function(e){var a,c=t(e.exp);c.errMsg?console.warn("表达式： "+e.exp+"有误！"):(a=r(c,d.assign,d.filter),a.read(function(t){o.scope[e.key]=t,e.autoRender&&a.watch(function(t){o.scope[e.key]=t,i&&s.render()}),e.hasOwnProperty("default")?i&&s.render():n()})||e.hasOwnProperty("default")&&(o.scope[e.key]=e.default,n()))}),this}else i=!0,this.render()},e.prototype.render=function(){var e=this.conf,t=this.vnode;e.render instanceof Function?t.innerVnode=e.render.call(this.$api,this.$api.vnode,this.$api.scope):e.template&&(e.isReplace||void 0===e.isReplace)&&(e.isReplace=!0,t.innerVnode=e.template),t.isReplace=e.isReplace,this.isRender||this.watchs.create.forEach(function(e){e()}),this.watchs.render.forEach(function(e){e()}),this.isRender=!0},exports.get=function(e){return n[e]},exports.register=function(t,r){n[t]=function(t,n){return new e(r,t,n)}}},{"./syntaxHandle":6,"./syntaxStruct":7}],4:[function(require,module,exports){function e(e,t,r,n){t.isDirective=!0,this.name=n,this.exp=t.data.attrsMap[n].value,this.conf=e,this.vnode=t,this.extraParameter=r,this.priority=e.priority||0,this.watchs={create:[],render:[]},this.$api={scope:e.scope=e.scope||{},filter:{},vnode:t,render:function(){},rootScope:t.rootScope,stroage:{},templateVnode:t.clone()}}var t=require("./syntaxStruct"),r=require("./syntaxHandle"),n={};e.prototype.watchCreate=function(e){e instanceof Function&&this.watchs.create.push(e)},e.prototype.watchRender=function(e){e instanceof Function&&this.watchs.render.push(e)},e.prototype.init=function(){function e(){h.length<=++i&&(n=!0,s.render())}var n,i=0,s=this,o=this.$api,a=this.conf,c=this.vnode,u=(c.data,a.props),h=[],l=this.extraParameter;a.template||(a.template=c.children),Object.keys(l.scope=l.scope||{}).forEach(function(e){o.scope[e]=l.scope[e]}),Object.keys(a.scope=a.scope||{}).forEach(function(e){o.scope[e]=a.scope[e]}),a.props&&(u instanceof Function?(u=u.call(o,this.exp),h=h.concat(u),h.length&&h.forEach(function(i){var a,c=t(i.exp);c.errMsg?console.warn("表达式： "+i.exp+"有误！"):(a=r(c,l.scope,l.filter),a.read(function(t){o.scope[i.key]=t,i.getWatchInfo instanceof Function&&i.getWatchInfo(a.getWatchInfo()),i.autoRender&&a.watch(function(e){o.scope[i.key]=e,i.getWatchInfo instanceof Function&&i.getWatchInfo(a.getWatchInfo()),n&&s.render()}),i.hasOwnProperty("default")?n&&s.render():e()})||i.hasOwnProperty("default")&&(o.scope[i.key]=i.default,e()))})):console.warn("指令配置中props只能为function"))},e.prototype.render=function(){var e=this.conf,t=this.vnode;e.render instanceof Function&&(t.innerVnode=e.render.call(this.$api,this.$api.vnode,this.$api.scope)),t.isReplace=e.isReplace,this.isRender||this.watchs.create.forEach(function(e){e()}),this.watchs.render.forEach(function(e){e()}),this.isRender=!0},exports.directiveClass=e,exports.get=function(e){return n[e]},exports.register=function(t,r){n[t]=function(n,i){return new e(r,n,i,t)}}},{"./syntaxHandle":6,"./syntaxStruct":7}],5:[function(require,module,exports){"use strict";function e(e){for(var t={},r=e.split(","),n=0;n<r.length;n+=1)t[r[n]]=!0;return t}function t(e){var t,r=[],n=[];return o(e,{start:function(e,r,s){t=i.vnode(e,{attrsMap:r.reduce(function(e,t){var r,n,i,s=t.name;return-1!==(n=s.indexOf(":"))?(r=s.slice(n+1),s=s.slice(0,n)||"bind",-1!==(n=r.indexOf("."))&&(i=r.slice(n+1),r=r.slice(0,n),i=i.split("."))):-1!==(n=s.indexOf("."))&&(i=s.slice(n+1),s=s.slice(0,n),i=i.split(".")),e[s]={type:r,modifiers:i,value:t.value,attrName:t.name},e},{})},[]),n.push(t),s&&this.end()},end:function(){var e=n.pop();n.length?(e===t&&(e=n[n.length-1]),e.children.push(t),t=e):(e!==t&&e.children.push(t),r.push(e))},chars:function(e){if(!/^\s+$/.test(e)){var t,o=[],a=[];!function e(r){var n,i,c,u=r;return u.length&&(-1===(n=u.indexOf("{{"))||-1===(i=u.indexOf("}}",n))?(o.push(u),a.push(u)):(n&&(c=u.slice(0,n),o.push(c),a.push(c)),t=u.slice(n+"{{".length).slice(0,i-n-"{{".length),o.push(s(t)),e(u.slice(i+"}}".length)))),r}(e);var c=i.vnode(void 0,{exps:o,textExpString:t},void 0,a.join(""));n.length?n[n.length-1].children.push(c):r.push(c)}}}),n=void 0,1===r.length?r[0]:r}function r(e){var t;switch(e.nodeType){case 3:if(/^\s+$/.test(e.textContent))return;t=i.vnode(void 0,void 0,void 0,e.textContent,e);break;case 1:t=i.node2vnode(e);case 11:t=t||[],e.childNodes.forEach(function(e){var n=r(e);n&&t.children.push(n)});break;case 9:console.warn("暂不支持document")}return t}var n=n||this,i=(n.document,require("./vdom")),s=require("./syntaxStruct"),o=function(){var t=/^\s+([^\s\/>"'=]+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/,r=e("area,base,basefont,br,col,frame,hr,img,input,link,meta,param,embed,command,keygen,source,track,wbr"),n=e("address,article,applet,aside,audio,blockquote,button,canvas,center,dd,del,dir,div,dl,dt,fieldset,figcaption,figure,footer,form,frameset,h1,h2,h3,h4,h5,h6,header,hgroup,hr,iframe,ins,isindex,li,map,menu,noframes,noscript,object,ol,output,p,pre,section,script,table,tbody,td,tfoot,th,thead,tr,ul,video"),i=e("a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,span,strike,strong,sub,sup,textarea,tt,u,var"),s=e("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr"),o={script:/^([\s\S]*?)<\/script[^>]*>/i,style:/^([\s\S]*?)<\/style[^>]*>/i};return function(e,a){function c(e,o,c,h){var l=o;if(o=o.toLowerCase(),n[o])for(;f&&i[f];)u("",f);if(s[o]&&f===o&&u("",o),h=r[o]||!!h,h||(d.push(o),f=o),a.start){for(var p,v,x,y=[];p=c.match(t);)c=c.substr(p[0].length),v=p[1],x=p[2]||p[3]||p[4]||"",y.push({name:v,value:x,escaped:x.replace(/(^|[^\\])"/g,'$1\\"')});a.start&&a.start(l,y,h)}}function u(e,t){var r;if(t)for(r=d.length-1;r>=0&&d[r]!==t;r-=1);else r=0;if(r>=0){for(var n=d.length-1;n>=r;n-=1)a.end&&a.end(d[n]);d.length=r,f=d[r-1]}}e=e.trim();for(var h,l,p,f,d=[],v=e,x=function(e,t){return a.chars&&a.chars(t),""};e;){if(l=!0,o[f]?(e=e.replace(o[f],x),l=!1,u("",f)):"</"===e.substring(0,2)?(p=e.match(/^<\/([-\w:]+)[^>]*>/))&&(e=e.substring(p[0].length),u.apply(this,p),l=!1):"\x3c!--"===e.substring(0,4)?(h=e.indexOf("--\x3e"))>=0&&(a.comment&&a.comment(e.substring(4,h)),e=e.substring(h+3),l=!1):"<![CDATA["===e.substring(0,9).toUpperCase()?(p=e.match(/^<!\[CDATA\[([\s\S]*?)\]\]>/i))&&(a.cdata&&a.cdata(p[1]),e=e.substring(p[0].length),l=!1):"<!DOCTYPE"===e.substring(0,9).toUpperCase()?(h=e.indexOf(">"))>=0&&(a.doctype&&a.doctype(e.substring(0,h)),e=e.substring(h+1),l=!1):"<"===e[0]&&(p=e.match(/^<([-\w:]+)((?:\s+[^\s\/>"'=]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*>/),p?(e=e.substring(p[0].length),c.apply(this,p),l=!1):(e=e.substring(1),a.chars&&a.chars("<"),l=!1)),l){h=e.indexOf("<");var y=h<0?e:e.substring(0,h);e=h<0?"":e.substring(h),a.chars&&a.chars(y)}if(e===v)throw"Parse Error: "+e;v=e}u()}}();module.exports=i.html2vdom=function(e){return e.nodeName?r(e):t(e)}},{"./syntaxStruct":7,"./vdom":8}],6:[function(require,module,exports){"use strict";function e(e,t,r,n){switch(e){case"$!":return!t.value;case"$~":return~t.value;case"$-":return-t.value;case"$+":return+t.value;case"+":return(void 0===t.value?"":t.value)+(void 0===r.value?"":r.value);case"-":return t.value-r.value;case"*":return t.value*r.value;case"/":return t.value/r.value;case"%":return t.value%r.value;case"?":return t.value?r.value:n.value;case"Member":return t.value[r.value];case"Array":var i=[];return Object.keys(t).forEach(function(e){i.push(t[e].value)}),i;case"Object":var s={};return Object.keys(t).forEach(function(e){s[e]=t[e]}),s;case"Call":var o,a=[];return Object.keys(t).forEach(function(e){if("callee"===e)return o=t[e].value;a.push(t[e].value)}),o.apply(this,a);case"Filter":var c,u=[];return Object.keys(t.value).forEach(function(e){if("callee"===e)return c=t.value[e];u.push(t.value[e])}),c.apply(this,u);case"+=":return t.value+=r.value}}function t(e,t,r,n){var i=this;this.reads=[],this.watchs=[],this.scope=t,this.filter=r,this.observers=[],this.multiple=n,this.lex(e,function(e){i.resData=e.value,delete i.watchInfo,e.keys instanceof Array&&(i.watchInfo={observer:e.observer,key:e.keys.join(".")}),i.watchs.forEach(function(t){t(e.value)}),i.reads.forEach(function(t){t(e.value)}),i.reads=[]})}function r(e,r,n,i){this.filter=n,this.scope=r||{},this.structRes=new t(e,this.scope,n,i)}var n=require("../../../inside/lib/observer"),i=function(){this.count=0,this.watchCount=0,this.stroage={},this.receiveStroage=[]};i.prototype.watch=function(e){var t=this,r=this.stroage;return this.watchCount++,function(n){r[e]=n,++t.count===t.watchCount&&t.receiveStroage.length&&(t.count--,t.receiveStroage.forEach(function(e){e(r)}))}},i.prototype.receive=function(e){var t=this.stroage;this.receiveStroage.push(e),this.watchCount===this.count&&(this.count--,this.receiveStroage.forEach(function(e){e(t)}))},t.prototype.watch=function(e){this.watchs.push(e)},t.prototype.unWatch=function(e){e&&-1!==this.watchs.indexOf(e)?this.watchs.splice(this.watchs.indexOf(e),1):this.watchs=[]},t.prototype.read=function(e){return this.hasOwnProperty("resData")?e(this.resData):this.reads.push(e),this.resData},t.prototype.readWatch=function(e){return this.hasOwnProperty("resData")&&e(this.resData),this.watchs.push(e),this.resData},t.prototype.lex=function(t,r,s){var o,a,c,u=this,h=new i;switch(t.exp){case"UnaryExpression":this.lex(t.argment,h.watch("argment")),h.receive(function(n){r({value:e("$"+t.operator,n.argment)})});break;case"BinaryExpression":this.lex(t.left,h.watch("left")),this.lex(t.right,h.watch("right")),h.receive(function(n){r({value:e(t.operator,n.left,n.right)})});break;case"TernaryExpression":this.lex(t.condition,h.watch("condition")),this.lex(t.accord,h.watch("accord")),this.lex(t.mismatch,h.watch("mismatch")),h.receive(function(n){r({value:e(t.operator,n.condition,n.accord,n.mismatch)})});break;case"MemberExpression":this.lex(t.object,h.watch("object"),s),this.lex(t.property,h.watch("property"),t.computed||"noComputed"),h.receive(function(e){"Object"===e.object.type&&e.object.value[e.property.value].observer?r({value:e.object.value[e.property.value].value,observer:e.object.value[e.property.value].observer,keys:e.object.value[e.property.value].keys}):e.object.observer?(o=e.object.keys.concat(e.property.value).join("."),a!==o&&(a&&e.object.observer.unwatch(a),e.object.observer.readWatch(a=o,function(t){r({value:t,observer:e.object.observer,keys:e.object.keys.concat(e.property.value)})}))):console.warn("语法对象错误!")});break;case"ArrayExpression":t.arguments.forEach(function(e,t){u.lex(e,h.watch(t))}),h.receive(function(t){r({value:e("Array",t)})});break;case"ObjectExpression":t.property.forEach(function(e){u.lex(e.value,h.watch(e.key.value))}),h.receive(function(t){var i=e("Object",t);c=n(u.scope,u.multiple),u.observers.push(c),r({value:i,observer:c,keys:[],type:"Object"})});break;case"CallExpression":this.lex(t.callee,h.watch("callee")),t.arguments.forEach(function(e,t){u.lex(e,h.watch(t))}),h.receive(function(t){r({value:e("Call",t)})});break;case"FilterExpression":this.lex(t.callee,h.watch("callee"),!0),t.arguments.length?t.arguments.forEach(function(e,t){u.lex(e,h.watch(t))}):this.lex(t.lead,h.watch(0)),h.receive(function(t){r({value:e("Filter",t)})});break;case"UpdateExpression":break;case"AssignmentExpression":this.lex(t.identifier,h.watch("identifier")),this.lex(t.value,h.watch("value")),h.receive(function(n){r({value:e(t.operator,n.identifier,n.value,t.identifier)})});break;default:switch(t.type){case"Null":r({value:null});break;case"String":r({value:t.value});break;case"Boolean":r({value:"false"!==t.value});break;case"Numeric":r({value:t.value});break;case"Keyword":case"identifier":switch(s){case!0:r({value:this.filter[t.value]});break;case"noComputed":r({value:t.value});break;default:c=n(this.scope,this.multiple),u.observers.push(c),c.readWatch(t.value,function(e){r({value:e,observer:c,keys:[t.value]})})}}}},t.prototype.destroy=function(){var e=this;this.observers.forEach(function(e){e.destroy()}),Object.keys(this).forEach(function(t){delete e[t]})},r.prototype.assign=function(e,t){this.scope[e]=t},r.prototype.watch=function(e){this.structRes.watch(e)},r.prototype.unWatch=function(e){this.structRes.unWatch(e)},r.prototype.getWatchInfo=function(){return this.structRes.watchInfo},r.prototype.read=function(e){return this.structRes.read(e)},r.prototype.readWatch=function(e){return this.structRes.readWatch(e)},r.prototype.destroy=function(){var e=this;this.structRes.destroy(),Object.keys(this.scope).forEach(function(t){delete e.scope[t]}),Object.keys(this).forEach(function(t){delete e[t]})},module.exports=function(e,t,n,i){return new r(e,t,n,i)}},{"../../../inside/lib/observer":9}],7:[function(require,module,exports){"use strict";function e(e){this.source=e,this.length=e.length,this.index=0,this.atoms=[],this.expBlockEnd=[],this.arguments=[],this.levelArgs=[this.arguments],this.expStruct=null,this.expTemp={valueType:null,valueExp:null},this.errMsg=null,this.expressionLex(),this.expBlockEnd.length&&!this.errMsg&&this.throwErr("表达式不完整缺少"+this.expBlockEnd.length+"个闭合符号 "+this.expBlockEnd.join(" , "))}var t={isWhiteSpace:function(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0},isLineTerminator:function(e){return 10===e||13===e||8232===e||8233===e},isidentifierStart:function(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||92===e||e>=128},isidentifierPart:function(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||92===e||e>=128},isDecimalDigit:function(e){return e>=48&&e<=57},isKeyword:function(e){switch(e.length){case 2:return"if"===e||"in"===e||"do"===e;case 3:return"var"===e||"for"===e||"new"===e||"try"===e||"let"===e;case 4:return"this"===e||"else"===e||"case"===e||"void"===e||"with"===e||"enum"===e;case 5:return"while"===e||"break"===e||"catch"===e||"throw"===e||"const"===e||"yield"===e||"class"===e||"super"===e;case 6:return"return"===e||"typeof"===e||"delete"===e||"switch"===e||"export"===e||"import"===e;case 7:return"default"===e||"finally"===e||"extends"===e;case 8:return"function"===e||"continue"===e||"debugger"===e;case 10:return"instanceof"===e;default:return!1}},codePointAt:function(e){if(e>=55296&&e<=56319){var t=this.source.charCodeAt(i+1);t>=56320&&t<=57343&&(e=1024*(e-55296)+t-56320+65536)}return e}},r={Null:"Null",String:"String",Keyword:"Keyword",Boolean:"Boolean",Numeric:"Numeric",Punctuator:"Punctuator",identifier:"identifier"};e.prototype.getSoonAtom=function(){var e=this.soonAtom;return delete this.soonAtom,e},e.prototype.nextExpressionLex=function(e,t){return this.expStruct=null,this.expTemp.valueType=null,this.expressionLex(e,t)},e.prototype.addBlockEnd=function(e){this.expBlockEnd.push(e),this.levelArgs.push(this.arguments=[])},e.prototype.getExpAttr=function(e,t){switch(t=void 0===t||t,e.exp){case"UpdateExpression":case"UnaryExpression":return"argment";case"BinaryExpression":return t?"left":"right";case"TernaryExpression":return t?"condition":"mismatch";case"MemberExpression":return t?"object":"property";case"ArrayExpression":case"ObjectExpression":return"self";case"CallExpression":return"callee";case"AssignmentExpression":break;case"FilterExpression":return"lead"}},e.prototype.expConcat=function(e,t){if(!e)return t;if(void 0===t&&this.expStruct&&(t=e,e=this.expStruct),t){var r;if(t.exp){if(!(e.exp&&t.priority<e.priority))return r=this.getExpAttr(t),t[r]=this.expConcat(e,t[r]),t}else if(!e.exp)return e;r=this.getExpAttr(e,!1),e[r]=this.expConcat(e[r],t)}return e},e.prototype.expressionLex=function(e,t){if(!this.errMsg&&(e||(e=this.soonAtom?this.getSoonAtom():this.atomLex()),e)){t=void 0===t||t;var n,i,s,o=this.arguments,a=this.expTemp;switch(a.valueType){case"memory":case"literal":case"identifier":if("."===e.value||"["===e.value){n=this.expMember(e,a),i=this.getSoonAtom();break}if("literal"!==a.valueType&&"assignment"===e.identity){n=this.expAssignment(e,a);break}case r.Null:case r.String:case r.Numeric:case r.Boolean:switch(e.type){case r.Punctuator:switch(e.identity){case"single":case"complex":case"logical":case"bitwise":n=this.expBinary(e,a);break;case"interrogation":n=this.expTernary(e,a);break;case"update":n=this.expUpdateAfter(e,a);break;case"filter":n=this.expFilter(e,a);break;case"comma":if("Object"===this.expMode){(n=o[o.length-1])&&(n.value=this.expStruct,a.valueType=null,this.expStruct=null);break}o.push(this.expStruct),this.nextExpressionLex(),o[o.length-1]!==this.expStruct&&o.push(this.expStruct);break;case"semicolon":break;case"colon":if("Object"===this.expMode){if(a.brackets){if(2!==a.brackets)return this.throwErr("语法错误，对象表达式key有误!");if(1!==this.expStruct.arguments.length)return this.throwErr("语法错误，对象表达式key有误!");o.push({computed:!0,key:this.expStruct.arguments[0]})}else o.push({computed:!1,key:this.expStruct});return void this.nextExpressionLex()}case"bracketsLeft":case"bracketsRight":if(this.expBlockEnd.length&&this.expBlockEnd.pop()===e.value){this.arguments=this.levelArgs.pop();break}default:this.throwErr('语法错误,多出符号"'+e.value+'"')}break;default:this.throwErr("语法表达式错误 ")}break;default:switch(e.type){case r.Punctuator:switch(e.identity){case"unitary":case"single":n=this.expUnary(e,a),i=this.getSoonAtom();break;case"semicolon":break;case"update":n=this.expUpdate(e,a),i=this.getSoonAtom();break;case"bracketsLeft":switch(e.value){case"(":var c=this.expMode;if(this.expMode="brackets",this.addBlockEnd(")"),this.expressionLex(),this.expMode=c,this.arguments=this.levelArgs[this.levelArgs.length-1],this.expStruct.exp&&(this.expStruct.priority=1),s=1,n=this.expStruct,(i=this.atomLex())&&"("===i.value){n=this.expCall(i,a),i=this.getSoonAtom();break}case"[":n||(s=2,n=this.expArray(e,a));case"{":n||(s=3,n=this.expObject(e,a)),i=i||this.atomLex(),!i||"["!==i.value&&"."!==i.value||(this.expressionLex(i,!1),i=this.getSoonAtom())}break;case"bracketsRight":if(this.expBlockEnd.length&&this.expBlockEnd.pop()===e.value){this.arguments=this.levelArgs.pop(),s=e.value;break}default:this.throwErr("语法表达式错误,未知表达式")}break;case r.Null:case r.String:case r.Numeric:case r.Boolean:n=this.expStruct=e,a.valueType=e.type;break;case r.Keyword:case r.identifier:if(n=this.expStruct=e,a.valueType="identifier",i=this.atomLex())switch(i.value){case"[":case".":this.expressionLex(i,!1),i=this.getSoonAtom();break;case"(":n=this.expCall(i,a),i=this.getSoonAtom()}break;default:this.throwErr("未知表达式!")}}return s?a.brackets=s:delete a.brackets,t&&n?n=this.expressionLex(i):this.soonAtom=i,n}},function(e){e.expUnary=function(e,t){var r={argment:null,operator:e.value,priority:3,exp:"UnaryExpression"},n=this.atomLex(),i=this.expConcat(r);return this.nextExpressionLex(n,!1),this.expStruct?(this.expStruct=this.expConcat(i),t.valueType="literal",r):this.throwErr("一元运算表达式不完整！")},e.expBinary=function(e,t){var r=this.expStruct,n=this.atomLex();this.nextExpressionLex(n,!1);var i={left:null,right:null,operator:e.value,priority:e.priority,exp:"BinaryExpression"};if(!n)return this.throwErr("二元运算语法错误，右侧表达式不存在！");var s=this.expConcat(r,i);return t.valueType?(this.expStruct=this.expConcat(s,this.expStruct),t.valueType="literal",i):this.throwErr("二元表达式，右侧语法错误！",e)},e.expTernary=function(e,t){var r={accord:null,mismatch:null,condition:this.expStruct,operator:e.value,priority:e.priority,exp:"TernaryExpression"};return this.addBlockEnd(":"),this.nextExpressionLex(),r.accord=this.expStruct,this.nextExpressionLex(),r.mismatch=this.expStruct,t.valueType="literal",this.expStruct=r},e.expUpdate=function(e,t){var r={argment:null,prefix:!0,operator:e.value,priority:e.priority,exp:"UpdateExpression"},n=this.atomLex();return this.expressionLex(n,!1),"identifier"===t.valueType?(r.argment=this.expStruct,t.valueType="literal",this.expStruct=r):this.throwErr("自运算后面应该是标识量!",e)},e.expUpdateAfter=function(e,t){function n(e){switch(e.exp){case"BinaryExpression":return n(e.right);case"MemberExpression":return e;case"UnaryExpression":return n(e.argment);default:switch(e.type){case r.Keyword:case r.identifier:return e.right;default:return"identifier"===t.valueType}}return!1}if(!n(this.expStruct))return this.throwErr("后自运算表达式有误!",e);var i={argment:null,prefix:!1,operator:e.value,priority:e.priority,exp:"UpdateExpression"};return this.expStruct=this.expConcat(i),i},e.expMember=function(e,t){var n={object:null,property:null,priority:1,computed:!1,exp:"MemberExpression"},i=this.atomLex(),s=this.expStruct;switch(e.value){case".":switch(i.type){case r.Keyword:case r.identifier:n.property=i;break;default:return this.throwErr("成员表达式语法错误")}break;case"[":n.computed=!0,this.addBlockEnd("]"),this.nextExpressionLex(i),this.arguments=this.levelArgs[this.levelArgs.length-1],n.property=this.expStruct}return t.valueType="identifier",this.expStruct=this.expConcat(s,n),(i=this.atomLex())&&("."===i.value||"["===i.value?n=this.expMember(i,t):"("===i.value?n=this.expCall(i,t):this.soonAtom=i),n},e.expArray=function(e,t){var r={arguments:null,exp:"ArrayExpression",priority:1},n=this.expMode,i=this.expConcat(this.expStruct,r);if(this.expMode="Array",this.addBlockEnd("]"),this.nextExpressionLex(),this.arguments.length){r.arguments=this.arguments;var s=r.arguments.pop();s&&r.arguments.push(s)}else r.arguments=this.expStruct?[this.expStruct]:[];return this.arguments=this.levelArgs[this.levelArgs.length-1],t.valueType="memory",this.expStruct=i,this.expMode=n,r},e.expObject=function(e,t){var r={property:[],exp:"ObjectExpression",priority:1},n=this.expConcat(this.expStruct,r),i=this.expMode;if(t.valueType=null,this.expStruct=null,this.addBlockEnd("}"),this.expMode="Object",this.nextExpressionLex(),this.arguments&&(r.property=this.arguments,this.expStruct)){var s=this.arguments.length;0!==s&&(this.arguments[s-1].value=this.expStruct)}return t.valueType="memory",this.expStruct=n,this.expMode=i,r},e.expCall=function(e,t){if("identifier"!==t.valueType&&"CallExpression"!==this.expStruct.exp)return this.throwErr("表达式不是一个方法！");var n,i=t.brackets,s=this.atoms[this.atoms.length-3];switch(t.valueType){case"memory":n=this.expStruct.exp+" ";case r.Null:n=n||"空: "+s.value;case r.String:n=n||"字符串: "+s.value;case r.Numeric:n=n||"数字: "+s.value;case r.Boolean:return n=n||"布尔值: "+s.value,this.throwErr("语法错误，"+n+" 不是一个方法!",s)}t.brackets=4;var o={exp:"CallExpression",arguments:[],priority:1,callee:null},a=this.expMode,c=this.expConcat(o);if(this.expMode="Call",this.addBlockEnd(")"),this.nextExpressionLex(),this.arguments.length){o.arguments=this.arguments;var u=o.arguments.pop();u&&o.arguments.push(u)}else o.arguments=this.expStruct?[this.expStruct]:[];this.arguments=this.levelArgs[this.levelArgs.length-1],t.valueType="literal",this.expStruct=c,this.expMode=a,t.brackets=i;var h=this.atomLex();return h&&("."===h.value||"["===h.value?o=this.expMember(h,t):this.soonAtom=h),o},e.expAssignment=function(e,t){var r={exp:"AssignmentExpression",value:null,identifier:this.expStruct,operator:e.value,priority:e.priority};return this.nextExpressionLex(),r.value=this.expStruct,this.expStruct=r},e.expFilter=function(e,t){var n={exp:"FilterExpression",arguments:[],operator:e.value,priority:e.priority,callee:null,lead:null},i=this.expConcat(n);if(this.nextExpressionLex(this.atomLex(),!1),this.expStruct.exp)switch(this.expStruct.exp){case"MemberExpression":n.callee=this.expStruct;break;case"CallExpression":n.callee=this.expStruct.callee,n.arguments=this.expStruct.arguments;break;default:return this.throwErr("过滤器表达式错误!")}else switch(this.expStruct.type){case r.Keyword:case r.identifier:n.callee=this.expStruct;break;default:return this.throwErr("过滤器数据类型错误!")}return this.expStruct=i,i.valueType="literal",n}}(e.prototype),e.prototype.atomLex=function(){if(!this.eof()){var e,r=this.source.charCodeAt(this.index);if(t.isidentifierStart(r))e=this.identifierLex();else if(40===r||41===r||59===r)e=this.PunctuatorLex();else if(39===r||34===r)e=this.StringLiteralLex();else if(46===r)e=t.isDecimalDigit(this.source.charCodeAt(this.index+1))?this.NumericLiteralLex():this.PunctuatorLex();else if(t.isDecimalDigit(r))e=this.NumericLiteralLex();else if(r>=55296&&r<57343&&t.isidentifierStart(t.codePointAt(r)))e=this.identifierLex();else{if(t.isWhiteSpace(r))return this.index++,this.atomLex();e=this.PunctuatorLex()}if(this.preAtom=this.nowAtom,this.nowAtom=e,e)return this.atoms.push(e),e}},function(e){e.identifierLex=function(){for(var e,n=this.index++;!this.eof()&&t.isidentifierPart(this.source.charCodeAt(this.index));)++this.index;var i=this.source.slice(n,this.index);return e=1===i.length?r.identifier:t.isKeyword(i)?r.Keyword:"null"===i?r.Null:"true"===i||"false"===i?r.Boolean:r.identifier,{type:e,value:i,start:n,end:this.index}},e.PunctuatorLex=function(){var e,t,n=this.index,i=this.source[this.index++];switch(i){case"{":case"[":case"(":t=2,e="bracketsLeft";break;case"}":case"]":case")":t=2,e="bracketsRight";break;case".":t=1,e="dot","."===this.source[this.index]&&"."===this.source[this.index+1]&&(this.index+=2,i="...",t=9,e="keySymbol");break;case";":t=1,e="semicolon";break;case",":t=1,e="comma";break;case":":t=8,e="colon";break;case"?":t=8,e="interrogation";break;case"~":t=3,e="unitary";break;default:if(">>>="===(i=this.source.substr(--this.index,4)))this.index+=4,t=9,e="assignment";else switch(i=i.substr(0,3),this.index+=3,i){case"===":case"!==":t=7,e="logical";break;case">>>":t=6,e="bitwise";break;case"<<=":case">>=":case"**=":t=9,e="assignment";break;default:switch(i=i.substr(0,2),this.index--,i){case"||":case"&&":case"==":case"!=":case"<=":case">=":t=7,e="logical";break;case"++":case"--":t=2,e="update";break;case"<<":case">>":t=6,e="bitwise";break;case"/=":case"+=":case"-=":case"*=":case"&=":case"|=":case"^=":case"%=":t=9,e="assignment";break;case"**":t=4,e="complex";break;case"=>":t=9,e="keySymbol";break;case"|:":t=3,e="filter";break;default:switch(this.index-=2,i=this.source[this.index++]){case"<":case">":t=7,e="logical";break;case"=":t=9,e="assignment";break;case"+":case"-":t=5,e="single";break;case"*":case"/":case"%":t=4,e="complex";break;case"&":case"|":case"^":t=6,e="bitwise";break;case"!":t=3,e="unitary";break;default:this.index--}}}}return this.index===n?this.throwErr("标点错误"):{type:r.Punctuator,value:i,start:n,end:this.index,identity:e,priority:t}},e.StringLiteralLex=function(){var e=this.index,n=this.source[e];if("'"!==n&&'"'!==n)return this.throwErr("String literal must starts with a quote");++this.index;for(var i="";!this.eof();){var s=this.source[this.index++];if(s===n){n="";break}if(t.isLineTerminator(s.charCodeAt(0)))break;i+=s}return""!==n?(this.index=e,this.throwErr("字符语法错误，没有找到关闭的引号！")):{type:r.String,value:i,start:e,end:this.index}},e.NumericLiteralLex=function(){var e=this.index,n=this.source[e];if(!t.isDecimalDigit(n.charCodeAt(0))&&"."!==n)return this.throwErr("数字文字必须以十进制数字或小数点开始");var i="";if("."===n)for(i+=this.source[this.index++];t.isDecimalDigit(this.source.charCodeAt(this.index));)i+=this.source[this.index++];else for(i=this.source[this.index++];t.isDecimalDigit(this.source.charCodeAt(this.index));)i+=this.source[this.index++];return t.isidentifierStart(this.source.charCodeAt(this.index))&&this.throwErr("Number类型语法错误!"),{type:r.Numeric,value:parseFloat(i),start:e,end:this.index}}}(e.prototype),e.prototype.eof=function(){return this.index>=this.length},e.prototype.throwErr=function(e,t){this.errMsg=e,t=t||this.preAtom,console.warn(e+" [ 第"+(t.start+1)+"个字符 ]")};var n={};module.exports=function(t){var r=n[t];return r||(r=new e(t),n[t]=r.expStruct,Object.keys(r).forEach(function(e){delete r[e]}),r=n[t]),r}},{}],8:[function(require,module,exports){function e(e){var t=this;Object.keys(e).forEach(function(r){t[r]=e[r]})}function t(t,r,n,i,s){var o=void 0===r?void 0:r.key;return new e({sel:t,data:r||{},$scope:{},middleScope:[],rootScope:{},children:n,text:i,elm:s,isShow:!0,isComponent:!1,isDirective:!1,key:o})}function r(e){return void 0===e}function n(e){return void 0!==e}function i(e){return"string"==typeof e||"number"==typeof e}function s(e){return Array.isArray(e)}function o(e,t){return e.key===t.key&&e.sel===t.sel}function a(e){return void 0!==e.sel}function c(e,t,r){var n,i,s,o={};for(n=t;n<=r;++n)(s=e[n])instanceof Object&&void 0!==(i=s.key)&&(o[i]=n);return o}function u(e){var r=e.id?"#"+e.id:"",n=e.className?"."+e.className.split(" ").join("."):"";return t(x.tagName(e).toLowerCase()+r+n,{},[],void 0,e)}function h(e,t,r){x.insertBefore(r,e.elm,t.elm),t.destroy()}function l(e){var t,r,n=document.createDocumentFragment();return e.forEach(function(e){e.isShow?t?(x.insertBefore(t,e.elm,r.nextSibling),r=e.elm):(t=e.elm.parentNode)?x.insertBefore(t,n,r=e.elm):n.appendChild(e.elm):e.destroy()}),n.childNodes}var p=require("./syntaxHandle"),f=require("../../../inside/lib/observer"),d=["init","create","update","remove","destroy","pre","post"],v=t("",{},[],void 0,void 0),x={createElement:function(e){return document.createElement(e)},createElementNS:function(e,t){return document.createElementNS(e,t)},createTextNode:function(e){return document.createTextNode(e)},createComment:function(e){return document.createComment(e)},insertBefore:function(e,t,r){r=r instanceof Array?r[0]:r,t instanceof Array?t.forEach(function(t,n){e.insertBefore(t,r)}):e.insertBefore(t,r)},removeChild:function(e,t){t instanceof Array?t.forEach(function(t){e.removeChild(t)}):e.removeChild(t)},appendChild:function(e,t){t instanceof Array?t.forEach(function(t){e.appendChild(t)}):e.appendChild(t)},parentNode:function(e){return(e instanceof Array?e[0]:e).parentNode},replaceChild:function(e,t,r){var n;if(t instanceof Array){var i=document.createDocumentFragment();t.forEach(function(e){i.appendChild(e)}),t=i}r instanceof Array&&(n=r,r=n.shift(),n.forEach(function(t){e.removeChild(t)
})),e.replaceChild(t,r)},nextSibling:function(e){return e.nextSibling},tagName:function(e){return e.tagName},setTextContent:function(e,t){e.textContent=t},getTextContent:function(e){return e.textContent},isElement:function(e){return 1===e.nodeType},isText:function(e){return 3===e.nodeType},isComment:function(e){return 8===e.nodeType}},y=function(e){function f(e,t,r){return function(){0==--t&&(e.destroy(),r&&(r.elm=[],r.innerVnode.forEach(function(e){r.elm=r.elm.concat(e.elm)})))}}function m(e,t,o,a,c){function u(){function u(e){var t=[];return e.forEach(function(e,r){e instanceof Object?void 0!==e.structRes.resData&&t.push(e.structRes.resData):t.push(e)}),t.join("")}if(!g||!--g){if(e.isReplace)switch(!0){case"string"==typeof e.innerVnode:e.innerVnode=module.exports.html2vdom(e.innerVnode);case e.innerVnode instanceof Array:case e.innerVnode instanceof Object:if(e.innerVnode instanceof Array||(e.innerVnode=[e.innerVnode]),e.elm&&e.elm.length)return y(x,e,e.rootScope,a.filter,c),x.destroy("elm"),void(x=e.clone());e.elm=[],e.innerVnode.forEach(function(r){r.middleScope=e.middleScope.concat([e.$scope]),m(r,t,function(t,r){if(r){var n=l(e.innerVnode);n.length&&(e.elm=[].slice.call(n),o(e,r))}else e.elm=e.elm.concat(t.elm)},a)})}else if("!"===E)r(e.text)&&(e.text=""),e.elm=O.createComment(e.text);else if(n(E)){var k=e.elm=n(b)&&n(f=b.ns)?O.createElementNS(f,e.tag):O.createElement(e.tag);e.id&&(k.id=e.id),e.className&&(k.className=e.className),S.create.forEach(function(t){t(v,e)}),s(w)?w.forEach(function(r){if(r instanceof Object){var n;m(r,t,function(t,r){r?h(t,n,e.elm):O.appendChild(k,t.elm),n=t.clone()},a,e)}else O.appendChild(k,O.createTextNode(r))}):i(e.text)&&O.appendChild(k,O.createTextNode(e.text))}else{if(e.data&&e.data.exps){var j,C=e.data.exps;C.forEach(function(t,r){if(t instanceof Object){var n=[e.rootScope].concat(e.middleScope);n.push(e.$scope),(C[r]=p(t,n,{},!0)).readWatch(function(t){j&&(j=u(C),e.text!==j&&O.setTextContent(e.elm,e.text=j))})}}),j=e.text=u(C)}e.elm=O.createTextNode(e.text)}f=b.hook,n(f)&&(f.create&&f.create(v,e),f.insert&&t.push(e)),x&&x.destroy(),x=e.clone(),o(e,d),d=!0}}var f,d,x,b=e.data||{},g=S.init.length,w=e.children,E=e.sel;if(Object.keys(e.rootScope).length&&a.scope!==e.rootScope?Object.keys(a.scope).forEach(function(t){e.$scope[t]=a.scope[t]}):e.rootScope=a.scope,c instanceof Object&&(e.middleScope.concat(c.middleScope),Object.keys(c.$scope||{}).length&&e.middleScope.push(c.$scope)),n(E)){var k=E.indexOf("#"),j=E.indexOf(".",k),C=k>0?k:E.length,D=j>0?j:E.length;e.tag=-1!==k||-1!==j?E.slice(0,Math.min(C,D)):E,C<D&&(e.id=E.slice(C+1,D)),j>0&&(e.className=E.slice(D+1).replace(/\./g," "))}n(b)&&n(f=b.hook)&&n(f=f.init)?(g++,f(e,u,a)):g||u(),S.init.forEach(function(t){t(e,u,a)})}function b(e,r,n,i,s,o,a,c){var u=e.elm;n.slice(i,s+1).forEach(function(n){if(n instanceof Object){var i;m(n,o,function(e,t){t?h(e,i,u):O.appendChild(u,e.elm,r),i=e.clone(),c&&(c.elm=[],c.innerVnode.forEach(function(e){e.elm&&(c.elm=c.elm.concat(e.elm))}))},a,e)}else O.appendChild(u,O.createTextNode(t.text),r)}),c&&(c.elm=[],c.innerVnode.forEach(function(e){c.elm=c.elm.concat(e.elm)}))}function g(e){var t,r=e.data;n(r)&&(n(t=r.hook)&&n(t=t.destroy)&&t(e),S.destroy.forEach(function(t){t(e)}),n(e.children)&&e.children.forEach(function(e){e instanceof Object&&g(e)}))}function w(e,t,r,i,s){for(;r<=i;++r){var o=void 0,a=void 0,c=void 0,u=t[r];u instanceof Object&&n(u.sel)?(g(u),a=S.remove.length+1,c=f(u,a,s),S.remove.forEach(function(e){e(u,c)}),n(o=u.data)&&n(o=o.hook)&&n(o=o.remove)?o(u,c):c()):u.destroy()}s&&(s.elm=[],s.innerVnode.forEach(function(e){s.elm=s.elm.concat(e.elm)}))}function E(e,t,n,i,s){if(t.isReplace){var a=n;n=n.innerVnode,t=t.innerVnode}for(var u,l,p,f,d=e.elm,v=0,x=0,y=t.length-1,g=t[0],E=t[y],S=n.length-1,j=n[0],C=n[S];v<=y&&x<=S;)g?E?j?C?o(g,j)?(k(g,j,i,s,e),g=t[++v],j=n[++x]):o(E,C)?(k(E,C,i,s,e),E=t[--y],C=n[--S]):o(g,C)?(k(g,C,i,s,e),O.insertBefore(d,g.elm,O.nextSibling(E.elm)),g=t[++v],C=n[--S]):o(E,j)?(k(E,j,i,s,e),O.insertBefore(d,E.elm,g.elm),E=t[--y],j=n[++x]):(void 0===u&&(u=c(t,v,y)),l=u[j.key],r(l)?(!function(t){var r;m(t,i,function(e,t){t?h(e,r,d):O.insertBefore(d,e.elm,g.elm),r=e.clone()},s,e)}(j),j=n[++x]):(p=t[l],p.sel!==j.sel?function(t){var r;m(t,i,function(e,t){t?h(e,r,d):O.insertBefore(d,e.elm,g.elm),r=e.clone()},s,e)}(j):(k(p,j,i,s,e),t[l]=void 0,O.insertBefore(d,p.elm,g.elm)),j=n[++x])):C=n[--S]:j=n[++x]:E=t[--y]:g=t[++v];y!==S&&(v>y?(f=null==n[S+1]?null:n[S+1].elm,b(e,f,n,x,S,i,s,a)):x>S&&w(d,t,v,y,a))}function k(e,t,i,s,o){function a(e){var t=[];return e.forEach(function(e,r){e instanceof Object?void 0!==e.structRes.resData&&t.push(e.structRes.resData):t.push(e)}),t.join("")}var c,u;n(c=t.data)&&n(u=c.hook)&&n(c=u.prepatch)&&c(e,t);var h=t.elm=e.elm,l=e.children,f=t.children;if(e!==t){if(n(t.data)&&(S.update.forEach(function(r){r(e,t)}),c=t.data.hook,n(c)&&n(c=c.update)&&c(e,t)),r(t.text))t.isComponent&&t.isClone?(t.elm=void 0,console.log(e,">>>>>>>>>>>>>>>>>",t,o),m(t,i,function(t,r){O.replaceChild(O.parentNode(e.elm),t.elm,e.elm)},s)):n(l)&&n(f)?l!==f&&E(t,l,f,i,s):n(f)?(n(e.text)&&O.setTextContent(h,""),b(t,null,f,0,f.length-1,i,s)):n(l)?w(h,l,0,l.length-1):n(e.text)&&O.setTextContent(h,"");else{if(t.data&&t.data.exps){var d,v=t.data.exps;t.rootScope=s.scope,o&&Object.keys(o.$scope||{}).length&&t.middleScope.push(o.$scope),v.forEach(function(e,r){if(e instanceof Object){var n=[t.rootScope].concat(t.middleScope);n.push(t.$scope),(v[r]=p(e,n,{},!0)).readWatch(function(e){d&&(d=a(v),t.text!==d&&O.setTextContent(t.elm,t.text=d))})}}),d=t.text=a(v),O.setTextContent(h,t.text)}else e.text!==t.text&&O.setTextContent(h,t.text);e.destroy("elm")}n(u)&&n(c=u.postpatch)&&c(e,t)}}var S={},O=x;return d.forEach(function(t){S[t]=[],e.forEach(function(module){var e=module[t];n(e)&&S[t].push(e)})}),function(e,t,r,n,i){r=r||{};var s,c,l,p=[],f={scope:r,filter:n||{}};if(a(e)||(e=u(e)),t.isReplace)c=e.innerVnode&&e.innerVnode.length?e.innerVnode[0].elm:e.elm,c&&(c instanceof Array?(l=O.parentNode(c[0]),console.log(e,t,"????-----",i)):l=O.parentNode(c)),i||l?(i&&(i.elm||(i.elm=l)),i=i||{elm:l},E(i,e,t,p,f)):(t.elm=[],t.innerVnode.forEach(function(e){m(e,p,function(e,r){t.elm=t.elm.concat(e.elm)},f,t)}));else if(t instanceof Array)c=e.elm,l=O.parentNode(c),t.forEach(function(e){var t;m(e,p,function(r,n){n?h(r,t,l):O.insertBefore(l,e.elm,O.nextSibling(c)),t=r.clone()},f)}),null!==l&&w(l,[e],0,0);else{if(!(t instanceof Object))return e;for(a(t)||(t=u(t)),s=0;s<S.pre.length;++s)S.pre[s]();o(e,t)?(Object.keys(t.rootScope).length?Object.keys(r).forEach(function(e){t.$scope[e]=r[e]}):t.rootScope=r,k(e,t,p,f)):(c=e.elm,l=O.parentNode(c),m(t,p,function(r,n){var i;null!==l&&(n?h(r,i,l):(O.insertBefore(l,t.elm,O.nextSibling(c)),w(l,[e],0,0)),i=r.clone())},f))}return p.forEach(function(e){e.data.hook.insert(e)}),S.post.forEach(function(e){e()}),t}}([function(){function e(e,t,r){function n(){var e=u.pop();e&&(e instanceof b.directiveClass&&(delete a[e.name],delete e.$api.templateVnode.data.attrsMap[e.name]),e.conf.stopRender?(s=!0,e.init(),u=void 0):e.conf.loadRender?(e.watchCreate(function(){n()}),e.init()):(e.init(),n()))}var i,s,o=e.data,a=o.attrsMap||{},c=o.attrs=o.attrs||{},u=[],h=m.get(e.tag);h?(i=h(e,r),u.push(i),i.watchRender(function(){t(),s=!0})):s=!0,Object.keys(a).forEach(function(n){var i,o=b.get(n);o?(i=o(e,r),u.push(i),i.watchRender(function(){s&&t()})):c[n]=a[n].value}),u.length?(u=u.sort(function(e,t){return e.priority-t.priority}),n()):t()}return{init:e}}(),function(){function e(e,r){var i,s,o,a=r.elm,c=e.data.attrs,u=r.data.attrs;if((c||u)&&c!==u){c=c||{},u=u||{};for(i in u)s=u[i],c[i]!==s&&(!s&&n[i]?a.removeAttribute(i):(o=i.split(":"),o.length>1&&t.hasOwnProperty(o[0])?a.setAttributeNS(t[o[0]],i,s):a.setAttribute(i,s)));for(i in c)i in u||a.removeAttribute(i)}}for(var t={xlink:"http://www.w3.org/1999/xlink"},r=["allowfullscreen","async","autofocus","autoplay","checked","compact","controls","declare","default","defaultchecked","defaultmuted","defaultselected","defer","disabled","draggable","enabled","formnovalidate","hidden","indeterminate","inert","ismap","itemscope","loop","multiple","muted","nohref","noresize","noshade","novalidate","nowrap","open","pauseonexit","readonly","required","reversed","scoped","seamless","selected","sortable","spellcheck","translate","truespeed","typemustmatch","visible"],n=Object.create(null),i=0,s=r.length;i<s;i++)n[r[i]]=!0;return{create:e,update:e}}(),function(){function e(e,t){var r,n,i=t.elm,s=e.data.class,o=t.data.class;if((s||o)&&s!==o){s=s||{},o=o||{};for(n in s)o[n]||i.classList.remove(n);for(n in o)(r=o[n])!==s[n]&&i.classList[r?"add":"remove"](n)}}return{create:e,update:e}}(),function(){function e(e,t){var r,n,i=t.elm,s=e.data.props,o=t.data.props;if((s||o)&&s!==o){s=s||{},o=o||{};for(r in s)o[r]||delete i[r];for(r in o)n=o[r],s[r]===n||"value"===r&&i[r]===n||(i[r]=n)}}return{create:e,update:e}}(),function(){function e(e,t,r){s(function(){e[t]=r})}function t(t,r){var n,i,s=r.elm,o=t.data.style,a=r.data.style;if((o||a)&&o!==a){o=o||{},a=a||{};var c="delayed"in o;for(i in o)a[i]||("-"===i[0]&&"-"===i[1]?s.style.removeProperty(i):s.style[i]="");for(i in a)if(n=a[i],"delayed"===i)for(i in a.delayed)n=a.delayed[i],c&&n===o.delayed[i]||e(s.style,i,n);else"remove"!==i&&n!==o[i]&&("-"===i[0]&&"-"===i[1]?s.style.setProperty(i,n):s.style[i]=n)}}function r(e){var t,r,n=e.elm,i=e.data.style;if(i&&(t=i.destroy))for(r in t)n.style[r]=t[r]}function n(e,t){var r=e.data.style;if(!r||!r.remove)return void t();var n,i,s=e.elm,o=0,a=r.remove,c=0,u=[];for(n in a)u.push(n),s.style[n]=a[n];i=getComputedStyle(s);for(var h=i["transition-property"].split(", ");o<h.length;++o)-1!==u.indexOf(h[o])&&c++;s.addEventListener("transitionend",function(e){e.target===s&&--c,0===c&&t()})}var i="undefined"!=typeof window&&window.requestAnimationFrame||setTimeout,s=function(e){i(function(){i(e)})};return{create:t,update:t,destroy:r,remove:n}}(),function(){function e(t,r,n){if("function"==typeof t)t.call(r,n,r);else if("object"==typeof t)if("function"==typeof t[0])if(2===t.length)t[0].call(r,t[1],n,r);else{var i=t.slice(1);i.push(n),i.push(r),t[0].apply(r,i)}else for(var s=0;s<t.length;s++)e(t[s])}function t(t,r){var n=t.type,i=r.data.on;i&&i[n]&&e(i[n],r,t)}function r(){return function e(r){t(r,e.vnode)}}function n(e,t){var n,i=e.data.on,s=e.listener,o=e.elm,a=t&&t.data.on,c=t&&t.elm;if(i!==a){if(i&&s)if(a)for(n in i)a[n]||o.removeEventListener(n,s,!1);else for(n in i)o.removeEventListener(n,s,!1);if(a){var u=t.listener=e.listener||r();if(u.vnode=t,i)for(n in a)i[n]||c.addEventListener(n,u,!1);else for(n in a)c.addEventListener(n,u,!1)}}}return{create:n,update:n,destroy:n}}()]);e.prototype.clone=function(){var t={},n={},i=[],s=[],o=this;return["$scope","children","elm","isShow","key","sel","tag","text","rootScope","isReplace","isComponent","isDirective","cid"].forEach(function(e){o.hasOwnProperty(e)&&(t[e]=o[e])}),this.innerVnode instanceof Array&&this.innerVnode.length?(this.innerVnode.forEach(function(e){s.push(e.clone())}),t.innerVnode=s):t.elm instanceof Array&&(t.elm=void 0),t.data=function(e){var t={};return Object.keys(e).forEach(function(r){t[r]=e[r]}),t}(o.data),r(this.sel)&&this.data&&this.data.exps&&(t.data.exps=[],Object.keys(this.data.exps).forEach(function(e){t.data.exps[e]=o.data.exps[e]})),Object.keys(o.$scope||{}).forEach(function(e){n[e]=o.$scope[e]}),t.$scope=n,t.middleScope=this.middleScope.concat(),this.children&&this.children.forEach(function(e){i.push(e.clone())}),t.children=i,t.isClone=!0,new e(t)},e.prototype.scope=function(e){var t=this;e instanceof Object&&Object.keys(e).forEach(function(r){t.$scope[r]=e[r]})},e.prototype.observerToScope=function(e,t,r){var n=this,i=f(e);return i.readWatch(t,function(e){n.$scope[r]=e}),i},e.prototype.destroy=function(e){var t=this;if(r(this.sel)&&this.data&&this.data.exps){switch(e){case"elm":case!1:break;default:Object.keys(this.data.exps).forEach(function(e){t.data.exps[e]instanceof Object&&t.data.exps[e].destroy(),delete t.data.exps[e]})}(this.data.exps||[]).forEach(function(e,r){e.structRes&&e.destroy(),delete t.data.exps[r]})}if(this.elm)if(this.elm instanceof Array)switch(e){case!1:break;case"elm":default:(this.innerVnode||[]).forEach(function(r,n){delete t.elm[n],delete t.innerVnode[n],r.destroy(e)})}else if(this.elm.parentNode)switch(e){case!1:break;case"elm":default:this.children&&this.children.forEach(function(r,n){delete t.children[n],r.destroy(e)}),"elm"!==e&&x.removeChild(this.elm.parentNode,this.elm)}switch(e){case"elm":case!1:break;default:Object.keys(this.$scope||{}).forEach(function(e){delete t.$scope[e]})}Object.keys(this.data||{}).forEach(function(e){delete t.data[e]}),Object.keys(this).forEach(function(e){delete t[e]})};var m=require("./componentManage"),b=require("./directiveManage");module.exports={patch:y,vnode:t,isVnode:a,domApi:x,node2vnode:u}},{"../../../inside/lib/observer":9,"./componentManage":3,"./directiveManage":4,"./syntaxHandle":6}],9:[function(require,module,exports){!function(e,exports){"object"==typeof module&&"object"==typeof module.exports?module.exports=e:"function"==typeof define&&define.amd?define(function(require,exports,module){module.exports=e}):exports.observer=e}(function(){"use strict";function e(){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return e()+e()+e()+e()+e()+e()+e()+e()}function t(e,r){var n;return e=(String(e)||"").replace(/^\[([^.\]]+)\]|^\.?([^.\[\]]+)/,function(e,t,r){return n=(t||r).match(/^(['"]?)([\s\S]+)\1$/).pop(),""}),r(n,e)&&(e||n)&&t(e,r)}function r(e,r){if("object"==typeof e&&null!==e){var n=arguments,i=3===arguments.length;return t(r,function(t,r){if(r)return e=e[t];n=i?e[t]=n[2]:t?e[t]:e}),n}}function n(e){return{}.toString.call(e).match(/object\s+(\w*)/)[1]}function i(e,t){for(t=t.__proto__,e=e.__proto__;;){if(null===e)return!1;if(t===e)return!0;e=e.__proto__}}function s(e,t){if(n(e)!==n(t))return!1;switch(n(e)){case"Object":if(!i(e,t))return!1;case"Array":return Object.keys(e).sort().toString()===Object.keys(t).sort().toString();case"Date":return String(e)===String(t);default:return e===t}}function o(e){return e.parent&&1!==!Object.keys(e.parent.child).length?o(e.parent):e}function a(e,t){this.child={},this.listens=[],this.listensRead=[],e instanceof a?(this.parent=e,t&&(this.nowKey=t,this.parentData=e.targetData,this.targetData=(this.parentData||{})[t],this.isData=void 0!==this.targetData)):(this.targetData=e,this.isData=void 0!==e),this.listen()}function c(e){this.listen=new a(e)}function u(t){if(t instanceof u)return t;l[this.sourceId=e()]=new c(t)}function h(t){if(t instanceof h||t instanceof u)return t;t=t.reverse(),l[this.sourceId=e()]={resource:t,ob:t.reduce(function(e,t){return e.push(new u(t)),e},[])}}a.prototype.diff=function(e){var t=this.targetData,r=this.parentData,n=e&&"object"==typeof e?e[this.nowKey]:void 0,i=s(t,n);this.berforDefineProperty&&this.berforDefineProperty.hasOwnProperty("set")&&this.berforDefineProperty.set(n,this),this.parentData=this.parent.targetData,this.targetData=n,i||(this.isData=!0,this.topListen&&r!==this.parentData&&Object.getOwnPropertyDescriptor(r,this.nowKey)&&Object.getOwnPropertyDescriptor(r,this.nowKey).set!==this.prevDefineProperty.set?this.topListen.berforDefineProperty=this.prevDefineProperty:r&&this.prevDefineProperty&&Object.defineProperty(r,this.nowKey,this.prevDefineProperty),this.listens.forEach(function(e){e(n,t)}),this.listensRead.forEach(function(e){e(n,t)}),this.listensRead=[],this.topListen=void 0,this.listen(!(e&&e.hasOwnProperty(this.nowKey)))),Object.keys(this.child).forEach(function(e){this.child[e].diff(n)}.bind(this))},a.prototype.listen=function(e){var t=this;this.parentData&&"object"==typeof this.parentData&&(this.prevDefineProperty=Object.getOwnPropertyDescriptor(this.parentData,this.nowKey)||{configurable:!0,enumerable:!0,value:void 0,writable:!0},this.berforDefineProperty||(this.berforDefineProperty=this.prevDefineProperty),this.berforDefineProperty&&this.berforDefineProperty.hasOwnProperty("set")&&this.berforDefineProperty.get(this),Object.defineProperty(this.parentData,this.nowKey,{enumerable:!0,configurable:!0,set:function(e,r){var n={};n[t.nowKey]=e,t.diff(n),r&&(t.topListen=r)},get:function(e){switch(!0){case e instanceof a:e&&(t.topListen=e);break;case"this"===e:return t}return t.targetData}}),this.isDelete=!1,!0===e&&(this.isDelete=!0,delete this.parentData[this.nowKey]))},a.prototype.set=function(e){this.targetData=e},a.prototype.get=function(){return this.targetData},a.prototype.add=function(e){-1!==this.listens.indexOf(e)||this.listens.push(e)},a.prototype.addRead=function(e){-1!==this.listensRead.indexOf(e)||this.listensRead.push(e)},a.prototype.remove=function(e){if("function"==typeof e){return-1!==this.listens.indexOf(e)&&this.listens.splice(this.listens.indexOf(e),1)[0]}this.listens=[],this.listens.length||Object.keys(this.child).length||o(this).destroy()},a.prototype.removeRead=function(e){if("function"==typeof e){return-1!==this.listensRead.indexOf(e)&&this.listensRead.splice(this.listens.indexOf(e),1)[0]}this.listensRead=[]},a.prototype.addChild=function(e,t){return this.child[e]=t},a.prototype.getChild=function(e){return e?this.child[e]:this.child},a.prototype.removeChild=function(e){var t=this.child[e];return delete this.child[e]&&t},a.prototype.destroy=function(){var e=this;this.parentData&&"object"==typeof this.parentData&&(this.berforDefineProperty.hasOwnProperty("value")&&(this.berforDefineProperty.value=this.targetData),this.topListen&&this.topListen.listens||this.isDelete||Object.defineProperty(this.parentData,this.nowKey,this.berforDefineProperty)),this.topListen&&(this.topListen.berforDefineProperty=this.berforDefineProperty),this.berforDefineProperty&&this.berforDefineProperty.hasOwnProperty("set")&&this.berforDefineProperty.get(this),this.isData||delete this.parentData[this.nowKey],this.child&&Object.keys(this.child).forEach(function(t){e.child[t].destroy()}),Object.keys(this).forEach(function(t){delete e[t]})},c.prototype.set=function(e,t){return r(this.listen.targetData,e,t)},c.prototype.get=function(e){return r(this.listen.targetData,e)},c.prototype.read=function(e,r){var n,i=this.listen,s=i.targetData;return"function"!=typeof r&&(r=e,e=""),t(e,function(e,t){if(e){var o=(s||{})[e];i=i.getChild(e)||i.addChild(e,new a(i,e)),s=o}return e&&t||(n=i.targetData,i.isData?r(n):i.addRead(r)),t}),n},c.prototype.addListen=function(e,r){var n=this.listen,i=n.targetData;"function"!=typeof r&&(r=e,e=""),t(e,function(e,t){if(e){var s=(i||{})[e];n=n.getChild(e)||n.addChild(e,new a(n,e)),i=s}return e&&t||n.add(r),t})},c.prototype.readWatch=function(e,r){var n,i=this.listen,s=i.targetData;return"function"!=typeof r&&(r=e,e=""),t(e,function(e,t){if(e){var o=(s||{})[e];i=i.getChild(e)||i.addChild(e,new a(i,e)),s=o}return e&&t||(i.add(r),n=i.targetData,i.isData&&r(n)),t}),n},c.prototype.removeListen=function(e,r){var n=this.listen;t(e,function(e,t){return e&&(n=n.getChild(e)),e&&t||n&&n.remove(r),t})},c.prototype.removeRead=function(e,r){var n=this.listen;t(e,function(e,t){return e&&(n=n.getChild(e)),e&&t||n&&n.removeRead(r),t})},c.prototype.destroy=function(){this.listen.destroy(),Object.keys(this).forEach(function(e){delete this[e]}.bind(this))};var l={};return u.prototype.read=function(e,t){return l[this.sourceId].read(e,t)},u.prototype.watch=function(e,t){"function"!=typeof t&&(t=e,e=""),l[this.sourceId].addListen(e,t)},u.prototype.readWatch=function(e,t){return l[this.sourceId].readWatch(e,t)},u.prototype.unWatch=function(e,t){"function"!=typeof t&&"function"==typeof e&&(t=e,e=""),l[this.sourceId].removeListen(e,t)},u.prototype.unRead=function(e,t){l[this.sourceId].removeRead(e,t)},u.prototype.get=function(e){return e="string"==typeof e?e:"",l[this.sourceId].get(e)},u.prototype.destroy=function(){l[this.sourceId].destroy(),delete l[this.sourceId],Object.keys(this).forEach(function(e){delete this[e]}.bind(this))},u.prototype.isObserver=!0,Object.defineProperty(u.prototype,"isObserver",{writable:!1,configurable:!1,enumerable:!1}),h.prototype.read=function(e,t){function r(){i.ob.forEach(function(t){t.unRead(e)})}var n,i=l[this.sourceId];i.ob.forEach(function(i){i.read(e,function(e){n=e,r(),t.call(this,e)})})},h.prototype.watch=function(e,t){l[this.sourceId].ob.forEach(function(r){r.watch(e,t)})},h.prototype.readWatch=function(e,t){function r(t){for(var r;i.length>t;)r=i[t],i.pop(),r.unRead(e),r.unWatch(e)}var n,i=[];l[this.sourceId].ob.forEach(function(s,o){n||(i.push(s),s.readWatch(e,function(e){t.call(this,e),n||(r(o+1),n=!0)}))})},h.prototype.unWatch=function(e,t){l[this.sourceId].ob.forEach(function(r){r.unWatch(e,t)})},h.prototype.get=function(e){for(var t,r=-1,n=l[this.sourceId],i=n.ob.length;++r<i;)if(t=n.ob[r].get(e))return t},h.prototype.destroy=function(){var e=this;l[this.sourceId].ob.forEach(function(e){e.destroy()}),Object.keys(this).forEach(function(t){delete e[t]}),delete l[this.sourceId]},function(e,t){return!0===t&&e instanceof Array?new h(e):new u(e)}}(),this)},{}],10:[function(require,module,exports){!function(e){"function"==typeof define&&define.cmd?define(function(){return e}):this.vf=e()}(function(){return require("./engine/exports")})},{"./engine/exports":1}]},{},[10]);